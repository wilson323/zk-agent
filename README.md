# ç»„ä»¶æ ‡å‡†åº“ (Component Standards Library)

ä¸€ä¸ªç°ä»£åŒ–çš„ React ç»„ä»¶æ ‡å‡†åº“ï¼Œæä¾›ä¸€è‡´æ€§ã€å¯è®¿é—®æ€§ã€æ€§èƒ½ä¼˜åŒ–å’Œå¼€å‘ä½“éªŒçš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

## ğŸŒŸ ç‰¹æ€§

- **ğŸ¨ è®¾è®¡ç³»ç»Ÿå…¼å®¹** - æ”¯æŒ Tailwind CSSã€Styled Componentsã€Emotion ç­‰ä¸»æµæ ·å¼æ–¹æ¡ˆ
- **â™¿ å¯è®¿é—®æ€§ä¼˜å…ˆ** - éµå¾ª WCAG 2.1 AA æ ‡å‡†å’Œ WAI-ARIA æœ€ä½³å®è·µ
- **âš¡ æ€§èƒ½ä¼˜åŒ–** - å†…ç½®æ‡’åŠ è½½ã€è™šæ‹ŸåŒ–ã€é˜²æŠ–èŠ‚æµç­‰æ€§èƒ½ä¼˜åŒ–å·¥å…·
- **ğŸ”’ ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript æ”¯æŒå’Œè¿è¡Œæ—¶éªŒè¯
- **ğŸ§ª æµ‹è¯•å‹å¥½** - å†…ç½®æµ‹è¯•å·¥å…·å’Œè¦†ç›–ç‡æ£€æŸ¥
- **ğŸ“š æ–‡æ¡£å®Œå–„** - è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£å’Œ Storybook é›†æˆ
- **ğŸ”§ å·¥å…·é“¾é›†æˆ** - ESLintã€Prettierã€Husky ç­‰å¼€å‘å·¥å…·æ”¯æŒ
- **ğŸ“¦ æ¸è¿›å¼è¿ç§»** - å…¼å®¹ç°æœ‰é¡¹ç›®ï¼Œæ”¯æŒé€æ­¥è¿ç§»

## ğŸ”§ æœ€æ–°æ”¹è¿› (2024)

### ä»£ç è´¨é‡æå‡
- âœ… **ESLint é…ç½®ä¼˜åŒ–** - å¢å¼ºäº†ä»£ç è´¨é‡æ£€æŸ¥è§„åˆ™ï¼ŒåŒ…æ‹¬ TypeScriptã€React Hooks å’Œå¯¼å…¥é¡ºåºæ£€æŸ¥
- âœ… **Git Hooks é›†æˆ** - æ·»åŠ äº† pre-commit é’©å­ï¼Œè‡ªåŠ¨æ‰§è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–
- âœ… **Lint-staged é…ç½®** - åªå¯¹æš‚å­˜æ–‡ä»¶æ‰§è¡Œæ£€æŸ¥ï¼Œæé«˜æäº¤æ•ˆç‡

### å®‰å…¨æ€§å¢å¼º
- âœ… **ç¯å¢ƒå˜é‡å®‰å…¨** - ç§»é™¤äº†ç¡¬ç¼–ç å¯†ç ï¼Œæ·»åŠ äº†å®‰å…¨é…ç½®æŒ‡å—
- âœ… **å®‰å…¨æ–‡æ¡£** - åˆ›å»ºäº† `SECURITY.md` æ–‡ä»¶ï¼Œæä¾›è¯¦ç»†çš„å®‰å…¨é…ç½®æŒ‡å—
- âœ… **å¯†é’¥ç®¡ç†** - æ·»åŠ äº† JWTã€API å¯†é’¥ç­‰å®‰å…¨é…ç½®é¡¹

### ç›‘æ§ç³»ç»Ÿ
- âœ… **æ€§èƒ½ç›‘æ§** - å®ç°äº† `PerformanceMonitor` ç±»ï¼Œæ”¯æŒè¯·æ±‚æŒ‡æ ‡æ”¶é›†å’Œç³»ç»Ÿç›‘æ§
- âœ… **é”™è¯¯è¿½è¸ª** - åˆ›å»ºäº† `ErrorTracker` ç³»ç»Ÿï¼Œæ”¯æŒé”™è¯¯åˆ†æå’Œå‘Šè­¦
- âœ… **æ•°æ®åº“é›†æˆ** - é”™è¯¯æ—¥å¿—å¯¼å‡ºåŠŸèƒ½å·²ä»æ¨¡æ‹Ÿæ•°æ®æ”¹ä¸ºçœŸå®æ•°æ®åº“æŸ¥è¯¢

### å¼€å‘ä½“éªŒ
- âœ… **è‡ªåŠ¨åŒ–å·¥å…·** - é…ç½®äº†ä»£ç æ ¼å¼åŒ–å’Œè´¨é‡æ£€æŸ¥çš„è‡ªåŠ¨åŒ–æµç¨‹
- âœ… **ç±»å‹å®‰å…¨** - å¢å¼ºäº† TypeScript é…ç½®å’Œç±»å‹æ£€æŸ¥
- âœ… **æ–‡æ¡£å®Œå–„** - æ›´æ–°äº†å®‰å…¨é…ç½®å’Œå¼€å‘æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è‡ªåŠ¨åˆå§‹åŒ–ï¼ˆæ¨èï¼‰

```bash
# ä½¿ç”¨åˆå§‹åŒ–è„šæœ¬å¿«é€Ÿè®¾ç½®
npx tsx scripts/init-component-standards.ts

# æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰é…ç½®
npx tsx scripts/init-component-standards.ts \
  --name=my-project \
  --framework=next \
  --styling=tailwind \
  --testing=jest
```

### æ‰‹åŠ¨å®‰è£…

```bash
# å®‰è£…æ ¸å¿ƒä¾èµ–
npm install react react-dom zod clsx class-variance-authority

# å®‰è£…å¼€å‘ä¾èµ–
npm install -D typescript @types/react @types/react-dom

# å¦‚æœä½¿ç”¨ Tailwind CSS
npm install -D tailwindcss autoprefixer postcss tailwind-merge
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # ç»„ä»¶ç›®å½•
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Button.test.tsx
â”‚   â”‚   â””â”€â”€ Button.stories.tsx
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ component-standards/  # ç»„ä»¶æ ‡å‡†åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ index.ts         # ä¸»å…¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ component-factory.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ design-tokens.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ component-patterns.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ validation-schemas.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ accessibility-helpers.ts
â”‚   â”‚   â”‚   â””â”€â”€ performance-optimizers.ts
â”‚   â”‚   â””â”€â”€ utils.ts
â”‚   â”œâ”€â”€ hooks/              # è‡ªå®šä¹‰ Hooks
â”‚   â”œâ”€â”€ types/              # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ styles/             # æ ·å¼æ–‡ä»¶
â”œâ”€â”€ scripts/                # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ init-component-standards.ts
â”‚   â”œâ”€â”€ component-standards-checker.ts
â”‚   â”œâ”€â”€ migrate-components.ts
â”‚   â””â”€â”€ component-standards.config.json
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ component-factory-standards.md
â”‚   â”œâ”€â”€ component-standards-usage-examples.md
â”‚   â””â”€â”€ migration-guide.md
â””â”€â”€ .storybook/             # Storybook é…ç½®
```

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### 1. ç»„ä»¶å·¥å‚æ¨¡å¼

ä½¿ç”¨ç»„ä»¶å·¥å‚åˆ›å»ºä¸€è‡´æ€§çš„ç»„ä»¶å˜ä½“ï¼š

```typescript
import { createComponentVariants } from '@/lib/component-standards';

const buttonVariants = createComponentVariants({
  base: "inline-flex items-center justify-center rounded-md",
  variants: {
    variant: {
      default: "bg-primary text-primary-foreground",
      secondary: "bg-secondary text-secondary-foreground",
    },
    size: {
      sm: "h-9 px-3",
      lg: "h-11 px-8",
    },
  },
  defaultVariants: {
    variant: "default",
    size: "sm",
  },
});
```

### 2. è®¾è®¡ä»¤ç‰Œç³»ç»Ÿ

ç»Ÿä¸€çš„è®¾è®¡ä»¤ç‰Œç®¡ç†ï¼š

```typescript
import { designTokens } from '@/lib/component-standards';

const theme = {
  colors: designTokens.colors.primary,
  spacing: designTokens.spacing.md,
  typography: designTokens.typography.body,
};
```

### 3. å¯è®¿é—®æ€§è¾…åŠ©

å†…ç½®å¯è®¿é—®æ€§å·¥å…·ï¼š

```typescript
import { useFocusTrap, useScreenReaderAnnouncement } from '@/lib/component-standards';

function Dialog({ isOpen, children }) {
  const focusTrapRef = useFocusTrap(isOpen);
  const announce = useScreenReaderAnnouncement();
  
  useEffect(() => {
    if (isOpen) {
      announce('å¯¹è¯æ¡†å·²æ‰“å¼€');
    }
  }, [isOpen]);
  
  return (
    <div ref={focusTrapRef} role="dialog" aria-modal="true">
      {children}
    </div>
  );
}
```

### 4. æ€§èƒ½ä¼˜åŒ–

è‡ªåŠ¨æ€§èƒ½ä¼˜åŒ–ï¼š

```typescript
import { useVirtualization, useDebounce } from '@/lib/component-standards';

function LargeList({ items }) {
  const virtualizer = useVirtualization({
    count: items.length,
    getScrollElement: () => parentRef.current,
    estimateSize: () => 50,
  });
  
  return (
    <div ref={parentRef}>
      {virtualizer.getVirtualItems().map(virtualItem => (
        <div key={virtualItem.index}>
          {items[virtualItem.index]}
        </div>
      ))}
    </div>
  );
}
```

## ğŸ› ï¸ å¼€å‘å·¥å…·

### ç»„ä»¶æ ‡å‡†æ£€æŸ¥

```bash
# æ£€æŸ¥ç»„ä»¶æ˜¯å¦ç¬¦åˆæ ‡å‡†
npm run component:check

# è¯¦ç»†æ¨¡å¼
npm run component:check:verbose

# ç”ŸæˆæŠ¥å‘Š
npm run component:check -- --output=report.json
```

### ç»„ä»¶è¿ç§»

```bash
# è‡ªåŠ¨è¿ç§»ç°æœ‰ç»„ä»¶
npm run component:migrate

# æŒ‡å®šæºç›®å½•
npm run component:migrate -- --src=./old-components
```

### æµ‹è¯•å’ŒéªŒè¯

```bash
# è¿è¡Œæµ‹è¯•
npm run test

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ£€æŸ¥
npm run lint
```

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€æŒ‰é’®ç»„ä»¶

```typescript
import React from 'react';
import { createComponentVariants } from '@/lib/component-standards';
import { cn } from '@/lib/utils';

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'primary' | 'secondary';
  size?: 'sm' | 'md' | 'lg';
  children: React.ReactNode;
}

const buttonVariants = createComponentVariants({
  base: "inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50",
  variants: {
    variant: {
      default: "bg-primary text-primary-foreground hover:bg-primary/90",
      primary: "bg-blue-600 text-white hover:bg-blue-700",
      secondary: "bg-gray-200 text-gray-900 hover:bg-gray-300",
    },
    size: {
      sm: "h-9 px-3 text-sm",
      md: "h-10 px-4 text-sm",
      lg: "h-11 px-8 text-base",
    },
  },
  defaultVariants: {
    variant: "default",
    size: "md",
  },
});

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>((
  { className, variant, size, ...props },
  ref
) => {
  return (
    <button
      className={cn(buttonVariants({ variant, size }), className)}
      ref={ref}
      {...props}
    />
  );
});

Button.displayName = "Button";

export { Button, type ButtonProps };
```

### å¤æ‚è¡¨å•ç»„ä»¶

```typescript
import React from 'react';
import { 
  useFormValidation, 
  useAccessibilityValidation,
  createAriaDescription 
} from '@/lib/component-standards';

interface FormFieldProps {
  label: string;
  name: string;
  type?: string;
  required?: boolean;
  error?: string;
  children?: React.ReactNode;
}

function FormField({ label, name, type = 'text', required, error, children }: FormFieldProps) {
  const fieldId = `field-${name}`;
  const errorId = `${fieldId}-error`;
  const descriptionId = `${fieldId}-description`;
  
  const ariaProps = createAriaDescription({
    describedBy: error ? errorId : descriptionId,
    invalid: !!error,
    required,
  });
  
  return (
    <div className="space-y-2">
      <label 
        htmlFor={fieldId}
        className="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"
      >
        {label}
        {required && <span className="text-red-500 ml-1" aria-label="å¿…å¡«">*</span>}
      </label>
      
      {children || (
        <input
          id={fieldId}
          name={name}
          type={type}
          className="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
          {...ariaProps}
        />
      )}
      
      {error && (
        <p id={errorId} className="text-sm text-red-600" role="alert">
          {error}
        </p>
      )}
    </div>
  );
}

export { FormField, type FormFieldProps };
```

## ğŸ”§ é…ç½®

### ç»„ä»¶æ ‡å‡†é…ç½®

åœ¨ `scripts/component-standards.config.json` ä¸­é…ç½®æ£€æŸ¥è§„åˆ™ï¼š

```json
{
  "rules": {
    "componentNaming": {
      "enabled": true,
      "pattern": "PascalCase",
      "severity": "error"
    },
    "propsInterface": {
      "enabled": true,
      "requireExplicitTypes": true,
      "severity": "warning"
    },
    "accessibility": {
      "enabled": true,
      "requireAriaLabels": true,
      "checkColorContrast": true,
      "severity": "error"
    }
  }
}
```

### Tailwind CSS é…ç½®

```javascript
// tailwind.config.js
module.exports = {
  content: [
    './src/**/*.{js,ts,jsx,tsx}',
  ],
  theme: {
    extend: {
      colors: {
        border: 'hsl(var(--border))',
        input: 'hsl(var(--input))',
        ring: 'hsl(var(--ring))',
        background: 'hsl(var(--background))',
        foreground: 'hsl(var(--foreground))',
        primary: {
          DEFAULT: 'hsl(var(--primary))',
          foreground: 'hsl(var(--primary-foreground))',
        },
        secondary: {
          DEFAULT: 'hsl(var(--secondary))',
          foreground: 'hsl(var(--secondary-foreground))',
        },
      },
    },
  },
  plugins: [],
};
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```typescript
import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import '@testing-library/jest-dom';
import { Button } from './Button';

describe('Button', () => {
  it('renders correctly', () => {
    render(<Button>Click me</Button>);
    expect(screen.getByRole('button')).toBeInTheDocument();
  });

  it('handles click events', () => {
    const handleClick = jest.fn();
    render(<Button onClick={handleClick}>Click me</Button>);
    
    fireEvent.click(screen.getByRole('button'));
    expect(handleClick).toHaveBeenCalledTimes(1);
  });

  it('applies variant styles correctly', () => {
    render(<Button variant="primary">Primary Button</Button>);
    const button = screen.getByRole('button');
    expect(button).toHaveClass('bg-blue-600');
  });
});
```

### å¯è®¿é—®æ€§æµ‹è¯•

```typescript
import { axe, toHaveNoViolations } from 'jest-axe';

expect.extend(toHaveNoViolations);

describe('Button Accessibility', () => {
  it('should not have accessibility violations', async () => {
    const { container } = render(<Button>Accessible Button</Button>);
    const results = await axe(container);
    expect(results).toHaveNoViolations();
  });
});
```

## ğŸ“š æ–‡æ¡£å’Œæ•…äº‹ä¹¦

### Storybook é›†æˆ

```typescript
// Button.stories.tsx
import type { Meta, StoryObj } from '@storybook/react';
import { Button } from './Button';

const meta: Meta<typeof Button> = {
  title: 'Components/Button',
  component: Button,
  parameters: {
    layout: 'centered',
    docs: {
      description: {
        component: 'ä¸€ä¸ªçµæ´»çš„æŒ‰é’®ç»„ä»¶ï¼Œæ”¯æŒå¤šç§å˜ä½“å’Œå°ºå¯¸ã€‚',
      },
    },
  },
  tags: ['autodocs'],
  argTypes: {
    variant: {
      control: { type: 'select' },
      options: ['default', 'primary', 'secondary'],
      description: 'æŒ‰é’®çš„è§†è§‰å˜ä½“',
    },
    size: {
      control: { type: 'select' },
      options: ['sm', 'md', 'lg'],
      description: 'æŒ‰é’®çš„å°ºå¯¸',
    },
  },
};

export default meta;
type Story = StoryObj<typeof meta>;

export const Default: Story = {
  args: {
    children: 'Default Button',
  },
};

export const AllVariants: Story = {
  render: () => (
    <div className="flex gap-4">
      <Button variant="default">Default</Button>
      <Button variant="primary">Primary</Button>
      <Button variant="secondary">Secondary</Button>
    </div>
  ),
};
```

## ğŸš€ éƒ¨ç½²å’Œ CI/CD

### GitHub Actions å·¥ä½œæµ

```yaml
# .github/workflows/ci.yml
name: Component Standards CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Run TypeScript check
      run: npm run type-check
    
    - name: Run ESLint
      run: npm run lint
    
    - name: Run component standards check
      run: npm run component:check
    
    - name: Run tests
      run: npm run test:coverage
    
    - name: Build Storybook
      run: npm run build-storybook
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. æ‰“å¼€ Pull Request

### æäº¤è§„èŒƒ

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

- `feat:` æ–°åŠŸèƒ½
- `fix:` ä¿®å¤ bug
- `docs:` æ–‡æ¡£æ›´æ–°
- `style:` ä»£ç æ ¼å¼åŒ–
- `refactor:` ä»£ç é‡æ„
- `test:` æµ‹è¯•ç›¸å…³
- `chore:` æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
- `component:` ç»„ä»¶ç›¸å…³æ›´æ”¹

## ğŸ“„ è®¸å¯è¯

MIT License - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„å¯å‘å’Œæ”¯æŒï¼š

- [Radix UI](https://www.radix-ui.com/) - æ— æ ·å¼ã€å¯è®¿é—®çš„ç»„ä»¶
- [Tailwind CSS](https://tailwindcss.com/) - å®ç”¨ä¼˜å…ˆçš„ CSS æ¡†æ¶
- [Class Variance Authority](https://cva.style/) - ç»„ä»¶å˜ä½“ç®¡ç†
- [React Hook Form](https://react-hook-form.com/) - é«˜æ€§èƒ½è¡¨å•åº“
- [Storybook](https://storybook.js.org/) - ç»„ä»¶å¼€å‘ç¯å¢ƒ
- [Testing Library](https://testing-library.com/) - ç®€å•è€Œå®Œæ•´çš„æµ‹è¯•å·¥å…·

## ğŸ“ æ”¯æŒ

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [æ–‡æ¡£](./docs/)
2. æœç´¢ [Issues](../../issues)
3. åˆ›å»ºæ–°çš„ [Issue](../../issues/new)
4. å‚ä¸ [Discussions](../../discussions)

---

**è®©æˆ‘ä»¬ä¸€èµ·æ„å»ºæ›´å¥½çš„ç»„ä»¶ç”Ÿæ€ç³»ç»Ÿï¼** ğŸš€