{"version":3,"names":["cov_2mkxn7imb2","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","api_route_wrapper_1","require","api_helper_1","canvas_1","promises_1","path_1","uuid_1","exports","POST","createApiRoute","RouteConfigs","protectedPost","req","params","validatedBody","validatedQuery","user","requestId","title","description","imageUrl","watermark","quality","json","ApiResponseWrapper","error","status","canvas","createCanvas","ctx","getContext","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","image","loadImage","aspectRatio","width","height","maxWidth","maxHeight","drawWidth","drawHeight","x","y","drawImage","console","font","textAlign","fillText","shareId","v4","fileName","uploadsDir","join","process","cwd","mkdir","recursive","filePath","buffer","toBuffer","writeFile","imageUrl_result","downloadUrl","success"],"sources":["E:\\zk-agent\\app\\api\\sharing\\generate-poster\\route.ts"],"sourcesContent":["/**\n * @file sharing\\generate-poster\\route.ts\n * @description Migrated API route with global error handling\n * @author ZK-Agent Team\n * @date 2025-06-25\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { createApiRoute, RouteConfigs, CommonValidations } from '@/lib/middleware/api-route-wrapper';\nimport { ApiResponseWrapper } from '@/lib/utils/api-helper';\nimport { createCanvas, loadImage } from \"canvas\"\nimport { writeFile, mkdir } from \"fs/promises\"\nimport { join } from \"path\"\nimport { v4 as uuidv4 } from \"uuid\"\n\nexport const POST = createApiRoute(\n  RouteConfigs.protectedPost(),\n  async (req: NextRequest, { params, validatedBody, validatedQuery, user, requestId }) => {\n    try {\n      const { type, title, description, imageUrl, watermark, quality } = await req.json()\n    \n      if (!title) {\n        return ApiResponseWrapper.error(\n          \"Missing required parameter: title\",\n          { status: 400 }\n        )\n      }\n    \n        // 创建画布\n        const canvas = createCanvas(800, 600)\n        const ctx = canvas.getContext(\"2d\")\n    \n        // 设置背景\n        const gradient = ctx.createLinearGradient(0, 0, 800, 600)\n        gradient.addColorStop(0, \"#6cb33f\")\n        gradient.addColorStop(1, \"#4a9d2a\")\n        ctx.fillStyle = gradient\n        ctx.fillRect(0, 0, 800, 600)\n    \n        // 添加主要内容\n        if (imageUrl) {\n          try {\n            const image = await loadImage(imageUrl)\n            const aspectRatio = image.width / image.height\n            const maxWidth = 600\n            const maxHeight = 400\n    \n            let drawWidth = maxWidth\n            let drawHeight = maxWidth / aspectRatio\n    \n            if (drawHeight > maxHeight) {\n              drawHeight = maxHeight\n              drawWidth = maxHeight * aspectRatio\n            }\n    \n            const x = (800 - drawWidth) / 2\n            const y = 50\n            \n            ctx.drawImage(image, x, y, drawWidth, drawHeight)\n          } catch (error) {\n            console.error('Failed to load image:', error)\n          }\n        }\n    \n        // 添加标题\n        ctx.fillStyle = \"#ffffff\"\n        ctx.font = \"bold 32px Arial\"\n        ctx.textAlign = \"center\"\n        ctx.fillText(title, 400, 500)\n    \n        // 添加描述\n        if (description) {\n          ctx.font = \"18px Arial\"\n          ctx.fillText(description, 400, 530)\n        }\n    \n        // 添加水印\n        if (watermark) {\n          ctx.fillStyle = \"rgba(255, 255, 255, 0.3)\"\n          ctx.font = \"14px Arial\"\n          ctx.textAlign = \"right\"\n          ctx.fillText(\"AI多智能体宇宙平台\", 780, 580)\n        }\n    \n        // 生成图片\n        const shareId = uuidv4()\n        const fileName = `share-${shareId}.png`\n        const uploadsDir = join(process.cwd(), \"public\", \"uploads\", \"shares\")\n    \n        try {\n          await mkdir(uploadsDir, { recursive: true })\n        } catch (error) {\n          // Directory might already exist\n        }\n    \n        const filePath = join(uploadsDir, fileName)\n        const buffer = canvas.toBuffer(\"image/png\")\n        await writeFile(filePath, buffer)\n    \n        const imageUrl_result = `/uploads/shares/${fileName}`\n        const downloadUrl = `/api/sharing/${shareId}/download`\n    \n        return ApiResponseWrapper.success({\n          success: true,\n          shareId,\n          imageUrl: imageUrl_result,\n          downloadUrl,\n        })\n    } catch (error) {\n      return ApiResponseWrapper.error(\n        \"Internal server error\",\n        { status: 500 }\n      )\n    }\n  }\n);\n\n"],"mappings":";;AAAA;;;;;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF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","ignoreList":[]}