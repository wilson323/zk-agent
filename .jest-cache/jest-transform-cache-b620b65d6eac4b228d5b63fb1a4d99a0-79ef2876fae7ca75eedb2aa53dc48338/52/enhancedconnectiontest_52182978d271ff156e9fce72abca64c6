ca5cc890001325daa22f5b21ace1aea6
"use strict";
/**
 * @file Enhanced Database Connection Tests
 * @description 增强数据库连接管理器的测试文件
 * @author ZK-Agent Team
 * @date 2024-12-19
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
// 模拟Prisma客户端
globals_1.jest.mock('@prisma/client');
const enhanced_connection_1 = require("../../lib/database/enhanced-connection");
const client_1 = require("@prisma/client");
const MockedPrismaClient = client_1.PrismaClient;
(0, globals_1.describe)('增强数据库连接管理器测试', () => {
    let connection;
    let mockPrismaClient;
    (0, globals_1.beforeEach)(() => {
        // 重置所有模拟
        globals_1.jest.clearAllMocks();
        // 创建模拟的Prisma客户端
        mockPrismaClient = {
            $connect: globals_1.jest.fn(),
            $disconnect: globals_1.jest.fn(),
            $queryRaw: globals_1.jest.fn(),
        };
        MockedPrismaClient.mockImplementation(() => mockPrismaClient);
        // 创建新的连接实例
        connection = new enhanced_connection_1.EnhancedDatabaseConnection({ maxConnections: 10, minConnections: 2 }, { enabled: true, maxRetries: 3 }, { enabled: true, intervalMs: 5000 });
    });
    (0, globals_1.afterEach)(async () => {
        // 清理连接
        if (connection.isConnected()) {
            await connection.disconnect();
        }
    });
    (0, globals_1.describe)('连接管理', () => {
        (0, globals_1.it)('应该成功连接到数据库', async () => {
            // 模拟成功连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await connection.connect();
            (0, globals_1.expect)(connection.isConnected()).toBe(true);
            (0, globals_1.expect)(connection.getState()).toBe(enhanced_connection_1.ConnectionState.CONNECTED);
            (0, globals_1.expect)(mockPrismaClient.$connect).toHaveBeenCalled();
        });
        (0, globals_1.it)('应该处理连接失败', async () => {
            // 模拟连接失败
            const connectionError = new Error('Connection failed');
            mockPrismaClient.$connect.mockRejectedValue(connectionError);
            await (0, globals_1.expect)(connection.connect()).rejects.toThrow('Connection failed');
            (0, globals_1.expect)(connection.getState()).toBe(enhanced_connection_1.ConnectionState.FAILED);
        });
        (0, globals_1.it)('应该成功断开连接', async () => {
            // 先连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await connection.connect();
            // 模拟断开连接
            mockPrismaClient.$disconnect.mockResolvedValue(undefined);
            await connection.disconnect();
            (0, globals_1.expect)(connection.isConnected()).toBe(false);
            (0, globals_1.expect)(connection.getState()).toBe(enhanced_connection_1.ConnectionState.DISCONNECTED);
            (0, globals_1.expect)(mockPrismaClient.$disconnect).toHaveBeenCalled();
        });
    });
    (0, globals_1.describe)('重连机制', () => {
        (0, globals_1.it)('应该在连接失败后自动重连', async () => {
            // 配置重连
            connection.updateConfig(undefined, {
                enabled: true,
                maxRetries: 2,
                retryDelayMs: 100
            });
            // 第一次连接失败
            mockPrismaClient.$connect
                .mockRejectedValueOnce(new Error('First attempt failed'))
                .mockResolvedValueOnce(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            // 监听重连事件
            const reconnectingPromise = new Promise(resolve => {
                connection.once('reconnecting', resolve);
            });
            const reconnectedPromise = new Promise(resolve => {
                connection.once('reconnected', resolve);
            });
            // 尝试连接（会失败并触发重连）
            await (0, globals_1.expect)(connection.connect()).rejects.toThrow('First attempt failed');
            // 等待重连事件
            await reconnectingPromise;
            await reconnectedPromise;
            (0, globals_1.expect)(connection.isConnected()).toBe(true);
        }, 10000);
        (0, globals_1.it)('应该在达到最大重试次数后停止重连', async () => {
            // 配置重连
            connection.updateConfig(undefined, {
                enabled: true,
                maxRetries: 1,
                retryDelayMs: 100
            });
            // 所有连接尝试都失败
            mockPrismaClient.$connect.mockRejectedValue(new Error('Connection always fails'));
            // 监听错误事件
            const errorPromise = new Promise(resolve => {
                connection.once('error', resolve);
            });
            // 尝试连接
            await (0, globals_1.expect)(connection.connect()).rejects.toThrow('Connection always fails');
            // 等待错误事件
            await errorPromise;
            // 等待重连尝试完成
            await new Promise(resolve => setTimeout(resolve, 500));
            (0, globals_1.expect)(connection.getState()).toBe(enhanced_connection_1.ConnectionState.FAILED);
        }, 10000);
    });
    (0, globals_1.describe)('健康检查', () => {
        (0, globals_1.it)('应该定期执行健康检查', async () => {
            // 启用健康检查
            connection.updateConfig(undefined, undefined, {
                enabled: true,
                intervalMs: 200
            });
            // 模拟成功连接和健康检查
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ health_check: 1 }]);
            await connection.connect();
            // 监听健康检查事件
            const healthCheckPromise = new Promise(resolve => {
                connection.once('healthCheck', resolve);
            });
            // 等待健康检查执行
            const result = await healthCheckPromise;
            (0, globals_1.expect)(result).toBe(true);
            (0, globals_1.expect)(mockPrismaClient.$queryRaw).toHaveBeenCalledWith(globals_1.expect.arrayContaining([globals_1.expect.stringContaining('health_check')]));
        }, 5000);
        (0, globals_1.it)('应该处理健康检查失败', async () => {
            // 启用健康检查
            connection.updateConfig(undefined, undefined, {
                enabled: true,
                intervalMs: 200,
                timeoutMs: 100
            });
            // 模拟成功连接但健康检查失败
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw
                .mockResolvedValueOnce([{ test: 1 }]) // 初始连接验证
                .mockRejectedValue(new Error('Health check failed')); // 健康检查失败
            await connection.connect();
            // 监听健康检查失败事件
            const healthCheckPromise = new Promise(resolve => {
                connection.once('healthCheck', resolve);
            });
            // 等待健康检查失败
            const result = await healthCheckPromise;
            (0, globals_1.expect)(result).toBe(false);
        }, 5000);
    });
    (0, globals_1.describe)('查询执行', () => {
        (0, globals_1.it)('应该成功执行查询并更新统计信息', async () => {
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await connection.connect();
            // 执行查询
            const queryResult = await connection.executeQuery(async (client) => {
                return await client.$queryRaw `SELECT * FROM users LIMIT 1`;
            });
            (0, globals_1.expect)(queryResult).toEqual([{ test: 1 }]);
            // 检查统计信息
            const stats = connection.getStats();
            (0, globals_1.expect)(stats.totalQueries).toBeGreaterThan(0);
            (0, globals_1.expect)(stats.avgLatency).toBeGreaterThan(0);
        });
        (0, globals_1.it)('应该处理查询失败并更新失败统计', async () => {
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw
                .mockResolvedValueOnce([{ test: 1 }]) // 连接验证
                .mockRejectedValueOnce(new Error('Query failed')); // 查询失败
            await connection.connect();
            // 执行失败的查询
            await (0, globals_1.expect)(connection.executeQuery(async (client) => {
                return await client.$queryRaw `SELECT * FROM non_existent_table`;
            })).rejects.toThrow('Query failed');
            // 检查失败统计
            const stats = connection.getStats();
            (0, globals_1.expect)(stats.failedQueries).toBeGreaterThan(0);
        });
        (0, globals_1.it)('应该在未连接时拒绝查询', async () => {
            // 确保未连接
            (0, globals_1.expect)(connection.isConnected()).toBe(false);
            // 尝试执行查询
            await (0, globals_1.expect)(connection.executeQuery(async (client) => {
                return await client.$queryRaw `SELECT 1`;
            })).rejects.toThrow('Database not connected');
        });
    });
    (0, globals_1.describe)('统计信息', () => {
        (0, globals_1.it)('应该正确跟踪连接统计信息', async () => {
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await connection.connect();
            // 获取统计信息
            const stats = connection.getStats();
            (0, globals_1.expect)(stats.state).toBe(enhanced_connection_1.ConnectionState.CONNECTED);
            (0, globals_1.expect)(stats.connectedAt).toBeInstanceOf(Date);
            (0, globals_1.expect)(stats.reconnectAttempts).toBe(0);
            (0, globals_1.expect)(stats.uptime).toBeGreaterThanOrEqual(0);
        });
        (0, globals_1.it)('应该正确计算运行时间', async () => {
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await connection.connect();
            // 等待一段时间
            await new Promise(resolve => setTimeout(resolve, 100));
            // 检查运行时间
            const stats = connection.getStats();
            (0, globals_1.expect)(stats.uptime).toBeGreaterThan(90); // 至少90ms
        });
    });
    (0, globals_1.describe)('配置更新', () => {
        (0, globals_1.it)('应该允许动态更新连接池配置', () => {
            const newPoolConfig = {
                maxConnections: 20,
                minConnections: 5
            };
            connection.updateConfig(newPoolConfig);
            // 配置应该已更新（无法直接验证私有属性，但不应抛出错误）
            (0, globals_1.expect)(() => connection.updateConfig(newPoolConfig)).not.toThrow();
        });
        (0, globals_1.it)('应该允许动态更新重连配置', () => {
            const newReconnectionConfig = {
                enabled: false,
                maxRetries: 5
            };
            connection.updateConfig(undefined, newReconnectionConfig);
            // 配置应该已更新
            (0, globals_1.expect)(() => connection.updateConfig(undefined, newReconnectionConfig)).not.toThrow();
        });
        (0, globals_1.it)('应该允许动态更新健康检查配置', async () => {
            // 先连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await connection.connect();
            const newHealthCheckConfig = {
                enabled: true,
                intervalMs: 1000
            };
            connection.updateConfig(undefined, undefined, newHealthCheckConfig);
            // 配置应该已更新
            (0, globals_1.expect)(() => connection.updateConfig(undefined, undefined, newHealthCheckConfig)).not.toThrow();
        });
    });
    (0, globals_1.describe)('全局实例测试', () => {
        (0, globals_1.it)('应该提供全局数据库连接实例', () => {
            (0, globals_1.expect)(enhanced_connection_1.enhancedDb).toBeInstanceOf(enhanced_connection_1.EnhancedDatabaseConnection);
        });
        (0, globals_1.it)('应该提供便捷的连接函数', async () => {
            // 模拟成功连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await (0, enhanced_connection_1.connectDatabase)();
            (0, globals_1.expect)((0, enhanced_connection_1.isDatabaseConnected)()).toBe(true);
            const stats = (0, enhanced_connection_1.getDatabaseStats)();
            (0, globals_1.expect)(stats.state).toBe(enhanced_connection_1.ConnectionState.CONNECTED);
            await (0, enhanced_connection_1.disconnectDatabase)();
            (0, globals_1.expect)((0, enhanced_connection_1.isDatabaseConnected)()).toBe(false);
        });
        (0, globals_1.it)('应该提供便捷的查询执行函数', async () => {
            // 模拟成功连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ result: 'success' }]);
            await (0, enhanced_connection_1.connectDatabase)();
            const result = await (0, enhanced_connection_1.executeQuery)(async (client) => {
                return await client.$queryRaw `SELECT 'success' as result`;
            });
            (0, globals_1.expect)(result).toEqual([{ result: 'success' }]);
            await (0, enhanced_connection_1.disconnectDatabase)();
        });
    });
    (0, globals_1.describe)('错误处理', () => {
        (0, globals_1.it)('应该正确识别连接相关错误', async () => {
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw
                .mockResolvedValueOnce([{ test: 1 }]) // 连接验证
                .mockRejectedValueOnce(new Error('ECONNREFUSED: Connection refused')); // 连接错误
            await connection.connect();
            // 监听错误事件
            const errorPromise = new Promise(resolve => {
                connection.once('error', resolve);
            });
            // 执行会导致连接错误的查询
            await (0, globals_1.expect)(connection.executeQuery(async (client) => {
                return await client.$queryRaw `SELECT 1`;
            })).rejects.toThrow('ECONNREFUSED');
            // 等待错误事件
            await errorPromise;
        });
        (0, globals_1.it)('应该处理优雅关闭', async () => {
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            mockPrismaClient.$disconnect.mockResolvedValue(undefined);
            await connection.connect();
            // 执行优雅关闭
            await (0, globals_1.expect)(connection.gracefulShutdown()).resolves.not.toThrow();
        });
    });
    (0, globals_1.describe)('事件系统', () => {
        (0, globals_1.it)('应该正确触发连接事件', async () => {
            // 监听连接事件
            const connectedPromise = new Promise(resolve => {
                connection.once('connected', resolve);
            });
            // 模拟成功连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await connection.connect();
            // 等待连接事件
            await connectedPromise;
        });
        (0, globals_1.it)('应该正确触发断开连接事件', async () => {
            // 先连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([{ test: 1 }]);
            await connection.connect();
            // 监听断开连接事件
            const disconnectedPromise = new Promise(resolve => {
                connection.once('disconnected', resolve);
            });
            // 模拟断开连接
            mockPrismaClient.$disconnect.mockResolvedValue(undefined);
            await connection.disconnect();
            // 等待断开连接事件
            await disconnectedPromise;
        });
        (0, globals_1.it)('应该正确触发错误事件', async () => {
            // 监听错误事件
            const errorPromise = new Promise(resolve => {
                connection.once('error', resolve);
            });
            // 模拟连接失败
            const connectionError = new Error('Connection failed');
            mockPrismaClient.$connect.mockRejectedValue(connectionError);
            await (0, globals_1.expect)(connection.connect()).rejects.toThrow('Connection failed');
            // 等待错误事件
            const error = await errorPromise;
            (0, globals_1.expect)(error).toBe(connectionError);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiRTpcXHprLWFnZW50XFx0ZXN0c1xcZGF0YWJhc2VcXGVuaGFuY2VkLWNvbm5lY3Rpb24udGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7Ozs7O0dBS0c7O0FBRUgsMkNBQWlGO0FBY2pGLGNBQWM7QUFDZCxjQUFJLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUE7QUFiM0IsZ0ZBUytDO0FBQy9DLDJDQUE2QztBQUk3QyxNQUFNLGtCQUFrQixHQUFHLHFCQUFnRCxDQUFBO0FBRTNFLElBQUEsa0JBQVEsRUFBQyxjQUFjLEVBQUUsR0FBRyxFQUFFO0lBQzVCLElBQUksVUFBc0MsQ0FBQTtJQUMxQyxJQUFJLGdCQUFxQixDQUFBO0lBRXpCLElBQUEsb0JBQVUsRUFBQyxHQUFHLEVBQUU7UUFDZCxTQUFTO1FBQ1QsY0FBSSxDQUFDLGFBQWEsRUFBRSxDQUFBO1FBRXBCLGlCQUFpQjtRQUNqQixnQkFBZ0IsR0FBRztZQUNqQixRQUFRLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUNuQixXQUFXLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtZQUN0QixTQUFTLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtTQUNkLENBQUE7UUFFUixrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFBO1FBRTdELFdBQVc7UUFDWCxVQUFVLEdBQUcsSUFBSSxnREFBMEIsQ0FDekMsRUFBRSxjQUFjLEVBQUUsRUFBRSxFQUFFLGNBQWMsRUFBRSxDQUFDLEVBQUUsRUFDekMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFDaEMsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsQ0FDcEMsQ0FBQTtJQUNILENBQUMsQ0FBQyxDQUFBO0lBRUYsSUFBQSxtQkFBUyxFQUFDLEtBQUssSUFBSSxFQUFFO1FBQ25CLE9BQU87UUFDUCxJQUFJLFVBQVUsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFD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RCxNQUFNLElBQUEsZ0JBQU0sRUFBQyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUE7WUFFdkUsU0FBUztZQUNULE1BQU0sS0FBSyxHQUFHLE1BQU0sWUFBWSxDQUFBO1lBQ2hDLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDckMsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDLENBQUMsQ0FBQTtBQUNKLENBQUMsQ0FBQyxDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkU6XFx6ay1hZ2VudFxcdGVzdHNcXGRhdGFiYXNlXFxlbmhhbmNlZC1jb25uZWN0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBFbmhhbmNlZCBEYXRhYmFzZSBDb25uZWN0aW9uIFRlc3RzXG4gKiBAZGVzY3JpcHRpb24g5aKe5by65pWw5o2u5bqT6L+e5o6l566h55CG5Zmo55qE5rWL6K+V5paH5Lu2XG4gKiBAYXV0aG9yIFpLLUFnZW50IFRlYW1cbiAqIEBkYXRlIDIwMjQtMTItMTlcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoLCBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscydcbmltcG9ydCB0eXBlIHsgTW9ja2VkRnVuY3Rpb24sIE1vY2tlZENsYXNzIH0gZnJvbSAnamVzdC1tb2NrJ1xuaW1wb3J0IHsgXG4gIEVuaGFuY2VkRGF0YWJhc2VDb25uZWN0aW9uLCBcbiAgQ29ubmVjdGlvblN0YXRlLFxuICBlbmhhbmNlZERiLFxuICBjb25uZWN0RGF0YWJhc2UsXG4gIGRpc2Nvbm5lY3REYXRhYmFzZSxcbiAgZ2V0RGF0YWJhc2VTdGF0cyxcbiAgaXNEYXRhYmFzZUNvbm5lY3RlZCxcbiAgZXhlY3V0ZVF1ZXJ5XG59IGZyb20gJy4uLy4uL2xpYi9kYXRhYmFzZS9lbmhhbmNlZC1jb25uZWN0aW9uJ1xuaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnXG5cbi8vIOaooeaLn1ByaXNtYeWuouaIt+err1xuamVzdC5tb2NrKCdAcHJpc21hL2NsaWVudCcpXG5jb25zdCBNb2NrZWRQcmlzbWFDbGllbnQgPSBQcmlzbWFDbGllbnQgYXMgTW9ja2VkQ2xhc3M8dHlwZW9mIFByaXNtYUNsaWVudD5cblxuZGVzY3JpYmUoJ+WinuW8uuaVsOaNruW6k+i/nuaOpeeuoeeQhuWZqOa1i+ivlScsICgpID0+IHtcbiAgbGV0IGNvbm5lY3Rpb246IEVuaGFuY2VkRGF0YWJhc2VDb25uZWN0aW9uXG4gIGxldCBtb2NrUHJpc21hQ2xpZW50OiBhbnlcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyDph43nva7miYDmnInmqKHmi59cbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKVxuICAgIFxuICAgIC8vIOWIm+W7uuaooeaLn+eahFByaXNtYeWuouaIt+err1xuICAgIG1vY2tQcmlzbWFDbGllbnQgPSB7XG4gICAgICAkY29ubmVjdDogamVzdC5mbigpLFxuICAgICAgJGRpc2Nvbm5lY3Q6IGplc3QuZm4oKSxcbiAgICAgICRxdWVyeVJhdzogamVzdC5mbigpLFxuICAgIH0gYXMgYW55XG4gICAgXG4gICAgTW9ja2VkUHJpc21hQ2xpZW50Lm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrUHJpc21hQ2xpZW50KVxuICAgIFxuICAgIC8vIOWIm+W7uuaWsOeahOi/nuaOpeWunuS+i1xuICAgIGNvbm5lY3Rpb24gPSBuZXcgRW5oYW5jZWREYXRhYmFzZUNvbm5lY3Rpb24oXG4gICAgICB7IG1heENvbm5lY3Rpb25zOiAxMCwgbWluQ29ubmVjdGlvbnM6IDIgfSxcbiAgICAgIHsgZW5hYmxlZDogdHJ1ZSwgbWF4UmV0cmllczogMyB9LFxuICAgICAgeyBlbmFibGVkOiB0cnVlLCBpbnRlcnZhbE1zOiA1MDAwIH1cbiAgICApXG4gIH0pXG5cbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyDmuIXnkIbov57mjqVcbiAgICBpZiAoY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpKSB7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmRpc2Nvbm5lY3QoKVxuICAgIH1cbiAgfSlcblxuICBkZXNjcmliZSgn6L+e5o6l566h55CGJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmiJDlip/ov57mjqXliLDmlbDmja7lupMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDmqKHmi5/miJDlip/ov57mjqVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgdGVzdDogMSB9XSlcbiAgICAgIFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgZXhwZWN0KGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KGNvbm5lY3Rpb24uZ2V0U3RhdGUoKSkudG9CZShDb25uZWN0aW9uU3RhdGUuQ09OTkVDVEVEKVxuICAgICAgZXhwZWN0KG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5aSE55CG6L+e5o6l5aSx6LSlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5qih5ouf6L+e5o6l5aSx6LSlXG4gICAgICBjb25zdCBjb25uZWN0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gZmFpbGVkJylcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1JlamVjdGVkVmFsdWUoY29ubmVjdGlvbkVycm9yKVxuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QoY29ubmVjdGlvbi5jb25uZWN0KCkpLnJlamVjdHMudG9UaHJvdygnQ29ubmVjdGlvbiBmYWlsZWQnKVxuICAgICAgZXhwZWN0KGNvbm5lY3Rpb24uZ2V0U3RhdGUoKSkudG9CZShDb25uZWN0aW9uU3RhdGUuRkFJTEVEKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5oiQ5Yqf5pat5byA6L+e5o6lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5YWI6L+e5o6lXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IHRlc3Q6IDEgfV0pXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDmqKHmi5/mlq3lvIDov57mjqVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGRpc2Nvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmRpc2Nvbm5lY3QoKVxuICAgICAgXG4gICAgICBleHBlY3QoY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpKS50b0JlKGZhbHNlKVxuICAgICAgZXhwZWN0KGNvbm5lY3Rpb24uZ2V0U3RhdGUoKSkudG9CZShDb25uZWN0aW9uU3RhdGUuRElTQ09OTkVDVEVEKVxuICAgICAgZXhwZWN0KG1vY2tQcmlzbWFDbGllbnQuJGRpc2Nvbm5lY3QpLnRvSGF2ZUJlZW5DYWxsZWQoKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+mHjei/nuacuuWIticsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5Zyo6L+e5o6l5aSx6LSl5ZCO6Ieq5Yqo6YeN6L+eJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g6YWN572u6YeN6L+eXG4gICAgICBjb25uZWN0aW9uLnVwZGF0ZUNvbmZpZyh1bmRlZmluZWQsIHsgXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsIFxuICAgICAgICBtYXhSZXRyaWVzOiAyLCBcbiAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAgXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyDnrKzkuIDmrKHov57mjqXlpLHotKVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3RcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0ZpcnN0IGF0dGVtcHQgZmFpbGVkJykpXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UodW5kZWZpbmVkKVxuICAgICAgXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgXG4gICAgICAvLyDnm5HlkKzph43ov57kuovku7ZcbiAgICAgIGNvbnN0IHJlY29ubmVjdGluZ1Byb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgY29ubmVjdGlvbi5vbmNlKCdyZWNvbm5lY3RpbmcnLCByZXNvbHZlKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVjb25uZWN0ZWRQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ub25jZSgncmVjb25uZWN0ZWQnLCByZXNvbHZlKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g5bCd6K+V6L+e5o6l77yI5Lya5aSx6LSl5bm26Kem5Y+R6YeN6L+e77yJXG4gICAgICBhd2FpdCBleHBlY3QoY29ubmVjdGlvbi5jb25uZWN0KCkpLnJlamVjdHMudG9UaHJvdygnRmlyc3QgYXR0ZW1wdCBmYWlsZWQnKVxuICAgICAgXG4gICAgICAvLyDnrYnlvoXph43ov57kuovku7ZcbiAgICAgIGF3YWl0IHJlY29ubmVjdGluZ1Byb21pc2VcbiAgICAgIGF3YWl0IHJlY29ubmVjdGVkUHJvbWlzZVxuICAgICAgXG4gICAgICBleHBlY3QoY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpKS50b0JlKHRydWUpXG4gICAgfSwgMTAwMDApXG5cbiAgICBpdCgn5bqU6K+l5Zyo6L6+5Yiw5pyA5aSn6YeN6K+V5qyh5pWw5ZCO5YGc5q2i6YeN6L+eJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g6YWN572u6YeN6L+eXG4gICAgICBjb25uZWN0aW9uLnVwZGF0ZUNvbmZpZyh1bmRlZmluZWQsIHsgXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsIFxuICAgICAgICBtYXhSZXRyaWVzOiAxLCBcbiAgICAgICAgcmV0cnlEZWxheU1zOiAxMDAgXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyDmiYDmnInov57mjqXlsJ3or5Xpg73lpLHotKVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdDb25uZWN0aW9uIGFsd2F5cyBmYWlscycpKVxuICAgICAgXG4gICAgICAvLyDnm5HlkKzplJnor6/kuovku7ZcbiAgICAgIGNvbnN0IGVycm9yUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLm9uY2UoJ2Vycm9yJywgcmVzb2x2ZSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIOWwneivlei/nuaOpVxuICAgICAgYXdhaXQgZXhwZWN0KGNvbm5lY3Rpb24uY29ubmVjdCgpKS5yZWplY3RzLnRvVGhyb3coJ0Nvbm5lY3Rpb24gYWx3YXlzIGZhaWxzJylcbiAgICAgIFxuICAgICAgLy8g562J5b6F6ZSZ6K+v5LqL5Lu2XG4gICAgICBhd2FpdCBlcnJvclByb21pc2VcbiAgICAgIFxuICAgICAgLy8g562J5b6F6YeN6L+e5bCd6K+V5a6M5oiQXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSlcbiAgICAgIFxuICAgICAgZXhwZWN0KGNvbm5lY3Rpb24uZ2V0U3RhdGUoKSkudG9CZShDb25uZWN0aW9uU3RhdGUuRkFJTEVEKVxuICAgIH0sIDEwMDAwKVxuICB9KVxuXG4gIGRlc2NyaWJlKCflgaXlurfmo4Dmn6UnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWumuacn+aJp+ihjOWBpeW6t+ajgOafpScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWQr+eUqOWBpeW6t+ajgOafpVxuICAgICAgY29ubmVjdGlvbi51cGRhdGVDb25maWcodW5kZWZpbmVkLCB1bmRlZmluZWQsIHsgXG4gICAgICAgIGVuYWJsZWQ6IHRydWUsIFxuICAgICAgICBpbnRlcnZhbE1zOiAyMDAgXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyDmqKHmi5/miJDlip/ov57mjqXlkozlgaXlurfmo4Dmn6VcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgaGVhbHRoX2NoZWNrOiAxIH1dKVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDnm5HlkKzlgaXlurfmo4Dmn6Xkuovku7ZcbiAgICAgIGNvbnN0IGhlYWx0aENoZWNrUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLm9uY2UoJ2hlYWx0aENoZWNrJywgcmVzb2x2ZSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIOetieW+heWBpeW6t+ajgOafpeaJp+ihjFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGVhbHRoQ2hlY2tQcm9taXNlXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW2V4cGVjdC5zdHJpbmdDb250YWluaW5nKCdoZWFsdGhfY2hlY2snKV0pXG4gICAgICApXG4gICAgfSwgNTAwMClcblxuICAgIGl0KCflupTor6XlpITnkIblgaXlurfmo4Dmn6XlpLHotKUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDlkK/nlKjlgaXlurfmo4Dmn6VcbiAgICAgIGNvbm5lY3Rpb24udXBkYXRlQ29uZmlnKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7IFxuICAgICAgICBlbmFibGVkOiB0cnVlLCBcbiAgICAgICAgaW50ZXJ2YWxNczogMjAwLFxuICAgICAgICB0aW1lb3V0TXM6IDEwMFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g5qih5ouf5oiQ5Yqf6L+e5o6l5L2G5YGl5bq35qOA5p+l5aSx6LSlXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW3sgdGVzdDogMSB9XSkgLy8g5Yid5aeL6L+e5o6l6aqM6K+BXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0hlYWx0aCBjaGVjayBmYWlsZWQnKSkgLy8g5YGl5bq35qOA5p+l5aSx6LSlXG4gICAgICBcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpXG4gICAgICBcbiAgICAgIC8vIOebkeWQrOWBpeW6t+ajgOafpeWksei0peS6i+S7tlxuICAgICAgY29uc3QgaGVhbHRoQ2hlY2tQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ub25jZSgnaGVhbHRoQ2hlY2snLCByZXNvbHZlKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g562J5b6F5YGl5bq35qOA5p+l5aSx6LSlXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoZWFsdGhDaGVja1Byb21pc2VcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSlcbiAgICB9LCA1MDAwKVxuICB9KVxuXG4gIGRlc2NyaWJlKCfmn6Xor6LmiafooYwnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaIkOWKn+aJp+ihjOafpeivouW5tuabtOaWsOe7n+iuoeS/oeaBrycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOi/nuaOpeaVsOaNruW6k1xuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgLy8g5omn6KGM5p+l6K+iXG4gICAgICBjb25zdCBxdWVyeVJlc3VsdCA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KGFzeW5jIChjbGllbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNsaWVudC4kcXVlcnlSYXdgU0VMRUNUICogRlJPTSB1c2VycyBMSU1JVCAxYFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHF1ZXJ5UmVzdWx0KS50b0VxdWFsKFt7IHRlc3Q6IDEgfV0pXG4gICAgICBcbiAgICAgIC8vIOajgOafpee7n+iuoeS/oeaBr1xuICAgICAgY29uc3Qgc3RhdHMgPSBjb25uZWN0aW9uLmdldFN0YXRzKClcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmVHcmVhdGVyVGhhbigwKVxuICAgICAgZXhwZWN0KHN0YXRzLmF2Z0xhdGVuY3kpLnRvQmVHcmVhdGVyVGhhbigwKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5aSE55CG5p+l6K+i5aSx6LSl5bm25pu05paw5aSx6LSl57uf6K6hJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g6L+e5o6l5pWw5o2u5bqTXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoW3sgdGVzdDogMSB9XSkgLy8g6L+e5o6l6aqM6K+BXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdRdWVyeSBmYWlsZWQnKSkgLy8g5p+l6K+i5aSx6LSlXG4gICAgICBcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpXG4gICAgICBcbiAgICAgIC8vIOaJp+ihjOWksei0peeahOafpeivolxuICAgICAgYXdhaXQgZXhwZWN0KGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KGFzeW5jIChjbGllbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNsaWVudC4kcXVlcnlSYXdgU0VMRUNUICogRlJPTSBub25fZXhpc3RlbnRfdGFibGVgXG4gICAgICB9KSkucmVqZWN0cy50b1Rocm93KCdRdWVyeSBmYWlsZWQnKVxuICAgICAgXG4gICAgICAvLyDmo4Dmn6XlpLHotKXnu5/orqFcbiAgICAgIGNvbnN0IHN0YXRzID0gY29ubmVjdGlvbi5nZXRTdGF0cygpXG4gICAgICBleHBlY3Qoc3RhdHMuZmFpbGVkUXVlcmllcykudG9CZUdyZWF0ZXJUaGFuKDApXG4gICAgfSlcblxuICAgIGl0KCflupTor6XlnKjmnKrov57mjqXml7bmi5Lnu53mn6Xor6InLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDnoa7kv53mnKrov57mjqVcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpLnRvQmUoZmFsc2UpXG4gICAgICBcbiAgICAgIC8vIOWwneivleaJp+ihjOafpeivolxuICAgICAgYXdhaXQgZXhwZWN0KGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KGFzeW5jIChjbGllbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNsaWVudC4kcXVlcnlSYXdgU0VMRUNUIDFgXG4gICAgICB9KSkucmVqZWN0cy50b1Rocm93KCdEYXRhYmFzZSBub3QgY29ubmVjdGVkJylcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfnu5/orqHkv6Hmga8nLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeato+ehrui3n+i4qui/nuaOpee7n+iuoeS/oeaBrycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOi/nuaOpeaVsOaNruW6k1xuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgLy8g6I635Y+W57uf6K6h5L+h5oGvXG4gICAgICBjb25zdCBzdGF0cyA9IGNvbm5lY3Rpb24uZ2V0U3RhdHMoKVxuICAgICAgXG4gICAgICBleHBlY3Qoc3RhdHMuc3RhdGUpLnRvQmUoQ29ubmVjdGlvblN0YXRlLkNPTk5FQ1RFRClcbiAgICAgIGV4cGVjdChzdGF0cy5jb25uZWN0ZWRBdCkudG9CZUluc3RhbmNlT2YoRGF0ZSlcbiAgICAgIGV4cGVjdChzdGF0cy5yZWNvbm5lY3RBdHRlbXB0cykudG9CZSgwKVxuICAgICAgZXhwZWN0KHN0YXRzLnVwdGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5q2j56Gu6K6h566X6L+Q6KGM5pe26Ze0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g6L+e5o6l5pWw5o2u5bqTXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IHRlc3Q6IDEgfV0pXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDnrYnlvoXkuIDmrrXml7bpl7RcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDApKVxuICAgICAgXG4gICAgICAvLyDmo4Dmn6Xov5DooYzml7bpl7RcbiAgICAgIGNvbnN0IHN0YXRzID0gY29ubmVjdGlvbi5nZXRTdGF0cygpXG4gICAgICBleHBlY3Qoc3RhdHMudXB0aW1lKS50b0JlR3JlYXRlclRoYW4oOTApIC8vIOiHs+WwkTkwbXNcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfphY3nva7mm7TmlrAnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWFgeiuuOWKqOaAgeabtOaWsOi/nuaOpeaxoOmFjee9ricsICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld1Bvb2xDb25maWcgPSB7XG4gICAgICAgIG1heENvbm5lY3Rpb25zOiAyMCxcbiAgICAgICAgbWluQ29ubmVjdGlvbnM6IDVcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi51cGRhdGVDb25maWcobmV3UG9vbENvbmZpZylcbiAgICAgIFxuICAgICAgLy8g6YWN572u5bqU6K+l5bey5pu05paw77yI5peg5rOV55u05o6l6aqM6K+B56eB5pyJ5bGe5oCn77yM5L2G5LiN5bqU5oqb5Ye66ZSZ6K+v77yJXG4gICAgICBleHBlY3QoKCkgPT4gY29ubmVjdGlvbi51cGRhdGVDb25maWcobmV3UG9vbENvbmZpZykpLm5vdC50b1Rocm93KClcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeWFgeiuuOWKqOaAgeabtOaWsOmHjei/numFjee9ricsICgpID0+IHtcbiAgICAgIGNvbnN0IG5ld1JlY29ubmVjdGlvbkNvbmZpZyA9IHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIG1heFJldHJpZXM6IDVcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi51cGRhdGVDb25maWcodW5kZWZpbmVkLCBuZXdSZWNvbm5lY3Rpb25Db25maWcpXG4gICAgICBcbiAgICAgIC8vIOmFjee9ruW6lOivpeW3suabtOaWsFxuICAgICAgZXhwZWN0KCgpID0+IGNvbm5lY3Rpb24udXBkYXRlQ29uZmlnKHVuZGVmaW5lZCwgbmV3UmVjb25uZWN0aW9uQ29uZmlnKSkubm90LnRvVGhyb3coKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5YWB6K645Yqo5oCB5pu05paw5YGl5bq35qOA5p+l6YWN572uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5YWI6L+e5o6lXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IHRlc3Q6IDEgfV0pXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICBjb25zdCBuZXdIZWFsdGhDaGVja0NvbmZpZyA9IHtcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgaW50ZXJ2YWxNczogMTAwMFxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25uZWN0aW9uLnVwZGF0ZUNvbmZpZyh1bmRlZmluZWQsIHVuZGVmaW5lZCwgbmV3SGVhbHRoQ2hlY2tDb25maWcpXG4gICAgICBcbiAgICAgIC8vIOmFjee9ruW6lOivpeW3suabtOaWsFxuICAgICAgZXhwZWN0KCgpID0+IGNvbm5lY3Rpb24udXBkYXRlQ29uZmlnKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBuZXdIZWFsdGhDaGVja0NvbmZpZykpLm5vdC50b1Rocm93KClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCflhajlsYDlrp7kvovmtYvor5UnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeaPkOS+m+WFqOWxgOaVsOaNruW6k+i/nuaOpeWunuS+iycsICgpID0+IHtcbiAgICAgIGV4cGVjdChlbmhhbmNlZERiKS50b0JlSW5zdGFuY2VPZihFbmhhbmNlZERhdGFiYXNlQ29ubmVjdGlvbilcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeaPkOS+m+S+v+aNt+eahOi/nuaOpeWHveaVsCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOaooeaLn+aIkOWKn+i/nuaOpVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0RGF0YWJhc2UoKVxuICAgICAgXG4gICAgICBleHBlY3QoaXNEYXRhYmFzZUNvbm5lY3RlZCgpKS50b0JlKHRydWUpXG4gICAgICBcbiAgICAgIGNvbnN0IHN0YXRzID0gZ2V0RGF0YWJhc2VTdGF0cygpXG4gICAgICBleHBlY3Qoc3RhdHMuc3RhdGUpLnRvQmUoQ29ubmVjdGlvblN0YXRlLkNPTk5FQ1RFRClcbiAgICAgIFxuICAgICAgYXdhaXQgZGlzY29ubmVjdERhdGFiYXNlKClcbiAgICAgIGV4cGVjdChpc0RhdGFiYXNlQ29ubmVjdGVkKCkpLnRvQmUoZmFsc2UpXG4gICAgfSlcblxuICAgIGl0KCflupTor6Xmj5Dkvpvkvr/mjbfnmoTmn6Xor6LmiafooYzlh73mlbAnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDmqKHmi5/miJDlip/ov57mjqVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgcmVzdWx0OiAnc3VjY2VzcycgfV0pXG4gICAgICBcbiAgICAgIGF3YWl0IGNvbm5lY3REYXRhYmFzZSgpXG4gICAgICBcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShhc3luYyAoY2xpZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjbGllbnQuJHF1ZXJ5UmF3YFNFTEVDVCAnc3VjY2VzcycgYXMgcmVzdWx0YFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbeyByZXN1bHQ6ICdzdWNjZXNzJyB9XSlcbiAgICAgIFxuICAgICAgYXdhaXQgZGlzY29ubmVjdERhdGFiYXNlKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfplJnor6/lpITnkIYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeato+ehruivhuWIq+i/nuaOpeebuOWFs+mUmeivrycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOi/nuaOpeaVsOaNruW6k1xuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhd1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKFt7IHRlc3Q6IDEgfV0pIC8vIOi/nuaOpemqjOivgVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignRUNPTk5SRUZVU0VEOiBDb25uZWN0aW9uIHJlZnVzZWQnKSkgLy8g6L+e5o6l6ZSZ6K+vXG4gICAgICBcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpXG4gICAgICBcbiAgICAgIC8vIOebkeWQrOmUmeivr+S6i+S7tlxuICAgICAgY29uc3QgZXJyb3JQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ub25jZSgnZXJyb3InLCByZXNvbHZlKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g5omn6KGM5Lya5a+86Ie06L+e5o6l6ZSZ6K+v55qE5p+l6K+iXG4gICAgICBhd2FpdCBleHBlY3QoY29ubmVjdGlvbi5leGVjdXRlUXVlcnkoYXN5bmMgKGNsaWVudCkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgY2xpZW50LiRxdWVyeVJhd2BTRUxFQ1QgMWBcbiAgICAgIH0pKS5yZWplY3RzLnRvVGhyb3coJ0VDT05OUkVGVVNFRCcpXG4gICAgICBcbiAgICAgIC8vIOetieW+hemUmeivr+S6i+S7tlxuICAgICAgYXdhaXQgZXJyb3JQcm9taXNlXG4gICAgfSlcblxuICAgIGl0KCflupTor6XlpITnkIbkvJjpm4XlhbPpl60nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDov57mjqXmlbDmja7lupNcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgdGVzdDogMSB9XSlcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGRpc2Nvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDmiafooYzkvJjpm4XlhbPpl61cbiAgICAgIGF3YWl0IGV4cGVjdChjb25uZWN0aW9uLmdyYWNlZnVsU2h1dGRvd24oKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+S6i+S7tuezu+e7nycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5q2j56Gu6Kem5Y+R6L+e5o6l5LqL5Lu2JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g55uR5ZCs6L+e5o6l5LqL5Lu2XG4gICAgICBjb25zdCBjb25uZWN0ZWRQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ub25jZSgnY29ubmVjdGVkJywgcmVzb2x2ZSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIOaooeaLn+aIkOWKn+i/nuaOpVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDnrYnlvoXov57mjqXkuovku7ZcbiAgICAgIGF3YWl0IGNvbm5lY3RlZFByb21pc2VcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeato+ehruinpuWPkeaWreW8gOi/nuaOpeS6i+S7ticsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWFiOi/nuaOpVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgLy8g55uR5ZCs5pat5byA6L+e5o6l5LqL5Lu2XG4gICAgICBjb25zdCBkaXNjb25uZWN0ZWRQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ub25jZSgnZGlzY29ubmVjdGVkJywgcmVzb2x2ZSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIOaooeaLn+aWreW8gOi/nuaOpVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kZGlzY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZGlzY29ubmVjdCgpXG4gICAgICBcbiAgICAgIC8vIOetieW+heaWreW8gOi/nuaOpeS6i+S7tlxuICAgICAgYXdhaXQgZGlzY29ubmVjdGVkUHJvbWlzZVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5q2j56Gu6Kem5Y+R6ZSZ6K+v5LqL5Lu2JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g55uR5ZCs6ZSZ6K+v5LqL5Lu2XG4gICAgICBjb25zdCBlcnJvclByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgY29ubmVjdGlvbi5vbmNlKCdlcnJvcicsIHJlc29sdmUpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyDmqKHmi5/ov57mjqXlpLHotKVcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb25FcnJvciA9IG5ldyBFcnJvcignQ29ubmVjdGlvbiBmYWlsZWQnKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVqZWN0ZWRWYWx1ZShjb25uZWN0aW9uRXJyb3IpXG4gICAgICBcbiAgICAgIGF3YWl0IGV4cGVjdChjb25uZWN0aW9uLmNvbm5lY3QoKSkucmVqZWN0cy50b1Rocm93KCdDb25uZWN0aW9uIGZhaWxlZCcpXG4gICAgICBcbiAgICAgIC8vIOetieW+hemUmeivr+S6i+S7tlxuICAgICAgY29uc3QgZXJyb3IgPSBhd2FpdCBlcnJvclByb21pc2VcbiAgICAgIGV4cGVjdChlcnJvcikudG9CZShjb25uZWN0aW9uRXJyb3IpXG4gICAgfSlcbiAgfSlcbn0pIl0sInZlcnNpb24iOjN9