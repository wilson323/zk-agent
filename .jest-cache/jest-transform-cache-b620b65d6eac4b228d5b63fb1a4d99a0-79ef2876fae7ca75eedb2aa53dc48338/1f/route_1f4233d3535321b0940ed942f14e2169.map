{"version":3,"names":["cov_26ruc71qx4","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","server_1","require","api_route_wrapper_1","api_helper_1","core_1","exports","POST","createApiRoute","RouteConfigs","protectedPost","req","params","validatedBody","validatedQuery","user","requestId","body","json","threadId","runId","appId","apiKey","messages","tools","state","config","ApiResponseWrapper","error","ErrorCode","VALIDATION_ERROR","agentManager","createAgentFromFastGPT","id","agent","runtime","setAgent","getEventStream","subscribe","callbacks","setTimeout","next","timestamp","Date","now","content","complete","unsubscribe","run","Promise","resolve","dispose","stream","ReadableStream","controller","subscription","event","data","JSON","stringify","enqueue","TextEncoder","encode","console","errorEvent","message","details","close","catch","NextResponse","headers","Connection","INTERNAL_SERVER_ERROR"],"sources":["E:\\zk-agent\\app\\api\\ag-ui\\standard\\chat\\route.ts"],"sourcesContent":["/**\n * @file ag-ui\\standard\\chat\\route.ts\n * @description AG-UI standard chat API route\n * @author ZK-Agent Team\n * @date 2025-06-25\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { createApiRoute, RouteConfigs } from '@/lib/middleware/api-route-wrapper';\nimport { ApiResponseWrapper } from '@/lib/utils/api-helper';\nimport { ErrorCode } from '@/types/core';\n\nexport const POST = createApiRoute(\n  RouteConfigs.protectedPost(),\n  async (req: NextRequest, { params, validatedBody, validatedQuery, user, requestId }) => {\n    try {\n      const body = await req.json();\n      const { threadId, runId, appId, apiKey, messages, tools, state, config } = body;\n    \n      // 验证必需参数\n      if (!threadId || !runId || !appId || !messages) {\n        return ApiResponseWrapper.error(ErrorCode.VALIDATION_ERROR, 'Missing required parameters: threadId, runId, appId, messages', null, 400);\n      }\n\n      // 模拟AG-UI智能体管理器\n      const agentManager = {\n        createAgentFromFastGPT: async (appId: string, apiKey: string) => {\n          return {\n            id: appId,\n            tools: tools || [],\n            config: config || {}\n          };\n        }\n      };\n    \n      // 从FastGPT创建智能体定义\n      const agent = await agentManager.createAgentFromFastGPT(appId, apiKey);\n    \n      // 模拟运行时\n      const runtime = {\n        setAgent: (agent: any) => {},\n        getEventStream: () => ({\n          subscribe: (callbacks: any) => {\n            // 模拟事件流\n            setTimeout(() => {\n              callbacks.next({\n                type: \"run-start\",\n                threadId,\n                runId,\n                timestamp: Date.now()\n              });\n              \n              callbacks.next({\n                type: \"message\",\n                threadId,\n                runId,\n                content: \"Hello from AG-UI agent!\",\n                timestamp: Date.now()\n              });\n              \n              callbacks.complete();\n            }, 100);\n            \n            return {\n              unsubscribe: () => {}\n            };\n          }\n        }),\n        run: async (params: any, config: any) => {\n          return Promise.resolve();\n        },\n        dispose: () => {}\n      };\n    \n      // 设置智能体\n      runtime.setAgent(agent);\n    \n      // 创建可读流用于SSE\n      const stream = new ReadableStream({\n        start(controller) {\n          // 订阅事件流\n          const subscription = runtime.getEventStream().subscribe({\n            next: (event: any) => {\n              // 发送AG-UI事件\n              const data = `data: ${JSON.stringify(event)}\\n\\n`;\n              controller.enqueue(new TextEncoder().encode(data));\n            },\n            error: (error: any) => {\n              console.error('Runtime error:', error);\n              const errorEvent = {\n                type: \"run-error\",\n                threadId,\n                runId,\n                error: {\n                  message: error.message,\n                  details: error,\n                },\n                timestamp: Date.now(),\n              };\n              const data = `data: ${JSON.stringify(errorEvent)}\\n\\n`;\n              controller.enqueue(new TextEncoder().encode(data));\n              controller.close();\n            },\n            complete: () => {\n              controller.close();\n            },\n          });\n    \n          // 执行运行\n          runtime\n            .run(\n              {\n                threadId,\n                runId,\n                messages,\n                tools: tools || agent.tools,\n                state: state || {},\n              },\n              config,\n            )\n            .catch((error) => {\n              console.error('Runtime execution error:', error);\n              const errorEvent = {\n                type: \"run-error\",\n                threadId,\n                runId,\n                error: {\n                  message: error.message,\n                  details: error,\n                },\n                timestamp: Date.now(),\n              };\n              const data = `data: ${JSON.stringify(errorEvent)}\\n\\n`;\n              controller.enqueue(new TextEncoder().encode(data));\n              controller.close();\n            });\n    \n          // 清理函数\n          return () => {\n            subscription.unsubscribe();\n            runtime.dispose();\n          };\n        },\n      });\n    \n      // 返回SSE响应\n      return new NextResponse(stream, {\n        headers: {\n          \"Content-Type\": \"text/event-stream\",\n          \"Cache-Control\": \"no-cache\",\n          Connection: \"keep-alive\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Methods\": \"GET, POST, PUT, DELETE, OPTIONS\",\n          \"Access-Control-Allow-Headers\": \"Content-Type, Authorization\",\n        },\n      });\n    } catch (error) {\n      console.error('AG-UI chat error:', error);\n      return ApiResponseWrapper.error(ErrorCode.INTERNAL_SERVER_ERROR, 'Internal server error', null, 500);\n    }\n  }\n);\n\n"],"mappings":";;AAAA;;;;;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAA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","ignoreList":[]}