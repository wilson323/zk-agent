498aef47f2c78de7a8f542c61167959f
// Mock Prisma Client for testing
_getJestObj().mock('@prisma/client', () => {
  return {
    PrismaClient: jest.fn().mockImplementation(() => ({
      $connect: jest.fn().mockResolvedValue(undefined),
      $disconnect: jest.fn().mockResolvedValue(undefined),
      $queryRaw: jest.fn().mockResolvedValue([{
        version: '14.0'
      }]),
      user: {
        findFirst: jest.fn().mockResolvedValue({
          id: 1,
          name: 'test'
        })
      }
    }))
  };
});

// Mock enhanced database connection
_getJestObj().mock('../../lib/database/enhanced-connection', () => {
  const mockEnhancedDb = {
    isConnected: jest.fn().mockReturnValue(true),
    connect: jest.fn().mockResolvedValue(true),
    disconnect: jest.fn().mockResolvedValue(true),
    getClient: jest.fn().mockReturnValue({
      $connect: jest.fn().mockResolvedValue(undefined),
      $queryRaw: jest.fn().mockResolvedValue([{
        version: '14.0'
      }]),
      user: {
        findFirst: jest.fn().mockResolvedValue({
          id: 1,
          name: 'test'
        })
      }
    }),
    getStats: jest.fn().mockReturnValue({
      state: 'connected',
      uptime: 10000,
      totalQueries: 5,
      failedQueries: 0,
      avgLatency: 50,
      reconnectAttempts: 0,
      lastHealthCheck: new Date(),
      isHealthy: true
    }),
    getDetailedStats: jest.fn().mockReturnValue({
      state: 'connected',
      uptime: 10000,
      totalQueries: 5,
      failedQueries: 0,
      avgLatency: 50,
      reconnectAttempts: 0,
      lastHealthCheck: new Date(),
      isHealthy: true,
      configuration: {
        pool: {
          maxConnections: 10,
          minConnections: 2
        },
        recovery: {
          maxRetries: 3,
          retryDelay: 1000
        }
      },
      performance: {
        successRate: 100,
        queriesPerSecond: 0.5,
        avgResponseTime: 50
      }
    })
  };
  return {
    enhancedDb: mockEnhancedDb
  };
});
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
const {
  checkDatabaseConnection,
  getDatabasePoolStatus
} = require('../../lib/database/connection');
describe('Database Connection Tests', () => {
  beforeEach(() => {
    jest.clearAllMocks();
    // Set environment variable for enhanced connection
    process.env.ENHANCED_DB_CONNECTION = 'true';
  });
  afterEach(() => {
    delete process.env.ENHANCED_DB_CONNECTION;
  });
  describe('checkDatabaseConnection', () => {
    it('should successfully connect to database with enhanced connection', async () => {
      const result = await checkDatabaseConnection();
      expect(result).toHaveProperty('connected');
      expect(result).toHaveProperty('message');
      expect(result).toHaveProperty('stats');
      if (result.connected) {
        expect(result.stats).toHaveProperty('totalQueries');
        expect(result.stats).toHaveProperty('failedQueries');
        expect(result.stats).toHaveProperty('avgLatency');
        expect(result.stats).toHaveProperty('reconnectAttempts');
      }
    });
    it('should handle connection errors gracefully', async () => {
      // Mock enhanced db to simulate connection failure
      const {
        enhancedDb
      } = require('../../lib/database/enhanced-connection');
      enhancedDb.isConnected.mockReturnValue(false);
      enhancedDb.getClient.mockReturnValue(null);
      const result = await checkDatabaseConnection();
      expect(result).toHaveProperty('connected');
      expect(result).toHaveProperty('message');
      expect(typeof result.connected).toBe('boolean');
      expect(typeof result.message).toBe('string');
    });
    it('should provide detailed error information on failure', async () => {
      // Mock enhanced db to throw error
      const {
        enhancedDb
      } = require('../../lib/database/enhanced-connection');
      enhancedDb.getClient.mockImplementation(() => {
        throw new Error('Connection timeout');
      });
      const result = await checkDatabaseConnection();
      expect(result.connected).toBe(false);
      expect(result.message).toContain('Connection timeout');
    });
  });
  describe('getDatabasePoolStatus', () => {
    it('should return comprehensive pool status with enhanced connection', async () => {
      const result = await getDatabasePoolStatus();
      expect(result).toHaveProperty('status');
      expect(result).toHaveProperty('connections');
      expect(result).toHaveProperty('performance');
      expect(result).toHaveProperty('configuration');

      // Check enhanced connection specific fields
      if (result.connections) {
        expect(result.connections).toHaveProperty('state');
        expect(result.connections).toHaveProperty('uptime');
        expect(result.connections).toHaveProperty('reconnectAttempts');
      }
      if (result.performance) {
        expect(result.performance).toHaveProperty('successRate');
        expect(result.performance).toHaveProperty('avgLatency');
      }
    });
    it('should handle enhanced connection unavailable scenario', async () => {
      // Mock enhanced db as disconnected
      const {
        enhancedDb
      } = require('../../lib/database/enhanced-connection');
      enhancedDb.isConnected.mockReturnValue(false);
      const result = await getDatabasePoolStatus();
      expect(result).toHaveProperty('status');
      expect(result.status).toBe('disconnected');
    });
    it('should provide fallback status when enhanced connection fails', async () => {
      // Mock enhanced db to throw error
      const {
        enhancedDb
      } = require('../../lib/database/enhanced-connection');
      enhancedDb.getDetailedStats.mockImplementation(() => {
        throw new Error('Stats unavailable');
      });
      const result = await getDatabasePoolStatus();
      expect(result).toHaveProperty('status');
      expect(typeof result.status).toBe('string');
    });
  });
  describe('Database Connection Integration', () => {
    it('should maintain connection state consistency', async () => {
      const connectionResult = await checkDatabaseConnection();
      const poolStatus = await getDatabasePoolStatus();

      // If connection is successful, pool should reflect that
      if (connectionResult.connected) {
        expect(poolStatus.status).not.toBe('error');
      }
    });
    it('should provide performance metrics', async () => {
      const poolStatus = await getDatabasePoolStatus();
      if (poolStatus.performance) {
        expect(typeof poolStatus.performance.successRate).toBe('number');
        expect(typeof poolStatus.performance.avgLatency).toBe('number');
        expect(poolStatus.performance.successRate).toBeGreaterThanOrEqual(0);
        expect(poolStatus.performance.successRate).toBeLessThanOrEqual(100);
      }
    });
    it('should handle configuration information', async () => {
      const poolStatus = await getDatabasePoolStatus();
      if (poolStatus.configuration) {
        expect(poolStatus.configuration).toHaveProperty('pool');
        if (poolStatus.configuration.pool) {
          expect(typeof poolStatus.configuration.pool).toBe('object');
        }
      }
    });
  });
  describe('Error Recovery and Resilience', () => {
    it('should handle database reconnection scenarios', async () => {
      const {
        enhancedDb
      } = require('../../lib/database/enhanced-connection');

      // Simulate reconnection scenario
      enhancedDb.getStats.mockReturnValue({
        state: 'connected',
        uptime: 5000,
        totalQueries: 10,
        failedQueries: 2,
        avgLatency: 75,
        reconnectAttempts: 1,
        lastHealthCheck: new Date(),
        isHealthy: true
      });
      const result = await checkDatabaseConnection();
      expect(result.connected).toBe(true);
      expect(result.stats.reconnectAttempts).toBe(1);
    });
    it('should track query performance over time', async () => {
      const {
        enhancedDb
      } = require('../../lib/database/enhanced-connection');

      // Simulate performance tracking
      enhancedDb.getDetailedStats.mockReturnValue({
        state: 'connected',
        uptime: 60000,
        totalQueries: 100,
        failedQueries: 5,
        avgLatency: 45,
        reconnectAttempts: 0,
        lastHealthCheck: new Date(),
        isHealthy: true,
        configuration: {
          pool: {
            maxConnections: 20,
            minConnections: 5
          },
          recovery: {
            maxRetries: 5,
            retryDelay: 2000
          }
        },
        performance: {
          successRate: 95,
          queriesPerSecond: 1.67,
          avgResponseTime: 45
        }
      });
      const poolStatus = await getDatabasePoolStatus();
      expect(poolStatus.performance.successRate).toBe(95);
      expect(poolStatus.performance.queriesPerSecond).toBeCloseTo(1.67, 1);
      expect(poolStatus.connections.totalQueries).toBe(100);
      expect(poolStatus.connections.failedQueries).toBe(5);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJQcmlzbWFDbGllbnQiLCJqZXN0IiwiZm4iLCJtb2NrSW1wbGVtZW50YXRpb24iLCIkY29ubmVjdCIsIm1vY2tSZXNvbHZlZFZhbHVlIiwidW5kZWZpbmVkIiwiJGRpc2Nvbm5lY3QiLCIkcXVlcnlSYXciLCJ2ZXJzaW9uIiwidXNlciIsImZpbmRGaXJzdCIsImlkIiwibmFtZSIsIm1vY2tFbmhhbmNlZERiIiwiaXNDb25uZWN0ZWQiLCJtb2NrUmV0dXJuVmFsdWUiLCJjb25uZWN0IiwiZGlzY29ubmVjdCIsImdldENsaWVudCIsImdldFN0YXRzIiwic3RhdGUiLCJ1cHRpbWUiLCJ0b3RhbFF1ZXJpZXMiLCJmYWlsZWRRdWVyaWVzIiwiYXZnTGF0ZW5jeSIsInJlY29ubmVjdEF0dGVtcHRzIiwibGFzdEhlYWx0aENoZWNrIiwiRGF0ZSIsImlzSGVhbHRoeSIsImdldERldGFpbGVkU3RhdHMiLCJjb25maWd1cmF0aW9uIiwicG9vbCIsIm1heENvbm5lY3Rpb25zIiwibWluQ29ubmVjdGlvbnMiLCJyZWNvdmVyeSIsIm1heFJldHJpZXMiLCJyZXRyeURlbGF5IiwicGVyZm9ybWFuY2UiLCJzdWNjZXNzUmF0ZSIsInF1ZXJpZXNQZXJTZWNvbmQiLCJhdmdSZXNwb25zZVRpbWUiLCJlbmhhbmNlZERiIiwicmVxdWlyZSIsImNoZWNrRGF0YWJhc2VDb25uZWN0aW9uIiwiZ2V0RGF0YWJhc2VQb29sU3RhdHVzIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInByb2Nlc3MiLCJlbnYiLCJFTkhBTkNFRF9EQl9DT05ORUNUSU9OIiwiYWZ0ZXJFYWNoIiwiaXQiLCJyZXN1bHQiLCJleHBlY3QiLCJ0b0hhdmVQcm9wZXJ0eSIsImNvbm5lY3RlZCIsInN0YXRzIiwidG9CZSIsIm1lc3NhZ2UiLCJFcnJvciIsInRvQ29udGFpbiIsImNvbm5lY3Rpb25zIiwic3RhdHVzIiwiY29ubmVjdGlvblJlc3VsdCIsInBvb2xTdGF0dXMiLCJub3QiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwidG9CZUxlc3NUaGFuT3JFcXVhbCIsInRvQmVDbG9zZVRvIl0sInNvdXJjZXMiOlsiY29ubmVjdGlvbi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgY2hlY2tEYXRhYmFzZUNvbm5lY3Rpb24sIGdldERhdGFiYXNlUG9vbFN0YXR1cyB9ID0gcmVxdWlyZSgnLi4vLi4vbGliL2RhdGFiYXNlL2Nvbm5lY3Rpb24nKVxuXG4vLyBNb2NrIFByaXNtYSBDbGllbnQgZm9yIHRlc3Rpbmdcbmplc3QubW9jaygnQHByaXNtYS9jbGllbnQnLCAoKSA9PiB7XG4gIHJldHVybiB7XG4gICAgUHJpc21hQ2xpZW50OiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgICAkY29ubmVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gICAgICAkZGlzY29ubmVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gICAgICAkcXVlcnlSYXc6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB2ZXJzaW9uOiAnMTQuMCcgfV0pLFxuICAgICAgdXNlcjoge1xuICAgICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGlkOiAxLCBuYW1lOiAndGVzdCcgfSlcbiAgICAgIH1cbiAgICB9KSlcbiAgfVxufSlcblxuLy8gTW9jayBlbmhhbmNlZCBkYXRhYmFzZSBjb25uZWN0aW9uXG5qZXN0Lm1vY2soJy4uLy4uL2xpYi9kYXRhYmFzZS9lbmhhbmNlZC1jb25uZWN0aW9uJywgKCkgPT4ge1xuICBjb25zdCBtb2NrRW5oYW5jZWREYiA9IHtcbiAgICBpc0Nvbm5lY3RlZDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh0cnVlKSxcbiAgICBjb25uZWN0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSksXG4gICAgZGlzY29ubmVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpLFxuICAgIGdldENsaWVudDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAkY29ubmVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gICAgICAkcXVlcnlSYXc6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB2ZXJzaW9uOiAnMTQuMCcgfV0pLFxuICAgICAgdXNlcjoge1xuICAgICAgICBmaW5kRmlyc3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGlkOiAxLCBuYW1lOiAndGVzdCcgfSlcbiAgICAgIH1cbiAgICB9KSxcbiAgICBnZXRTdGF0czogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBzdGF0ZTogJ2Nvbm5lY3RlZCcsXG4gICAgICB1cHRpbWU6IDEwMDAwLFxuICAgICAgdG90YWxRdWVyaWVzOiA1LFxuICAgICAgZmFpbGVkUXVlcmllczogMCxcbiAgICAgIGF2Z0xhdGVuY3k6IDUwLFxuICAgICAgcmVjb25uZWN0QXR0ZW1wdHM6IDAsXG4gICAgICBsYXN0SGVhbHRoQ2hlY2s6IG5ldyBEYXRlKCksXG4gICAgICBpc0hlYWx0aHk6IHRydWVcbiAgICB9KSxcbiAgICBnZXREZXRhaWxlZFN0YXRzOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIHN0YXRlOiAnY29ubmVjdGVkJyxcbiAgICAgIHVwdGltZTogMTAwMDAsXG4gICAgICB0b3RhbFF1ZXJpZXM6IDUsXG4gICAgICBmYWlsZWRRdWVyaWVzOiAwLFxuICAgICAgYXZnTGF0ZW5jeTogNTAsXG4gICAgICByZWNvbm5lY3RBdHRlbXB0czogMCxcbiAgICAgIGxhc3RIZWFsdGhDaGVjazogbmV3IERhdGUoKSxcbiAgICAgIGlzSGVhbHRoeTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgcG9vbDogeyBtYXhDb25uZWN0aW9uczogMTAsIG1pbkNvbm5lY3Rpb25zOiAyIH0sXG4gICAgICAgIHJlY292ZXJ5OiB7IG1heFJldHJpZXM6IDMsIHJldHJ5RGVsYXk6IDEwMDAgfVxuICAgICAgfSxcbiAgICAgIHBlcmZvcm1hbmNlOiB7XG4gICAgICAgIHN1Y2Nlc3NSYXRlOiAxMDAsXG4gICAgICAgIHF1ZXJpZXNQZXJTZWNvbmQ6IDAuNSxcbiAgICAgICAgYXZnUmVzcG9uc2VUaW1lOiA1MFxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgXG4gIHJldHVybiB7XG4gICAgZW5oYW5jZWREYjogbW9ja0VuaGFuY2VkRGJcbiAgfVxufSlcblxuZGVzY3JpYmUoJ0RhdGFiYXNlIENvbm5lY3Rpb24gVGVzdHMnLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpXG4gICAgLy8gU2V0IGVudmlyb25tZW50IHZhcmlhYmxlIGZvciBlbmhhbmNlZCBjb25uZWN0aW9uXG4gICAgcHJvY2Vzcy5lbnYuRU5IQU5DRURfREJfQ09OTkVDVElPTiA9ICd0cnVlJ1xuICB9KVxuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgZGVsZXRlIHByb2Nlc3MuZW52LkVOSEFOQ0VEX0RCX0NPTk5FQ1RJT05cbiAgfSlcblxuICBkZXNjcmliZSgnY2hlY2tEYXRhYmFzZUNvbm5lY3Rpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byBkYXRhYmFzZSB3aXRoIGVuaGFuY2VkIGNvbm5lY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGVja0RhdGFiYXNlQ29ubmVjdGlvbigpXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdjb25uZWN0ZWQnKVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0YXRzJylcbiAgICAgIFxuICAgICAgaWYgKHJlc3VsdC5jb25uZWN0ZWQpIHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0cykudG9IYXZlUHJvcGVydHkoJ3RvdGFsUXVlcmllcycpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdmYWlsZWRRdWVyaWVzJylcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0cykudG9IYXZlUHJvcGVydHkoJ2F2Z0xhdGVuY3knKVxuICAgICAgICBleHBlY3QocmVzdWx0LnN0YXRzKS50b0hhdmVQcm9wZXJ0eSgncmVjb25uZWN0QXR0ZW1wdHMnKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25uZWN0aW9uIGVycm9ycyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gTW9jayBlbmhhbmNlZCBkYiB0byBzaW11bGF0ZSBjb25uZWN0aW9uIGZhaWx1cmVcbiAgICAgIGNvbnN0IHsgZW5oYW5jZWREYiB9ID0gcmVxdWlyZSgnLi4vLi4vbGliL2RhdGFiYXNlL2VuaGFuY2VkLWNvbm5lY3Rpb24nKVxuICAgICAgZW5oYW5jZWREYi5pc0Nvbm5lY3RlZC5tb2NrUmV0dXJuVmFsdWUoZmFsc2UpXG4gICAgICBlbmhhbmNlZERiLmdldENsaWVudC5tb2NrUmV0dXJuVmFsdWUobnVsbClcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tEYXRhYmFzZUNvbm5lY3Rpb24oKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29ubmVjdGVkJylcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdtZXNzYWdlJylcbiAgICAgIGV4cGVjdCh0eXBlb2YgcmVzdWx0LmNvbm5lY3RlZCkudG9CZSgnYm9vbGVhbicpXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5tZXNzYWdlKS50b0JlKCdzdHJpbmcnKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgZGV0YWlsZWQgZXJyb3IgaW5mb3JtYXRpb24gb24gZmFpbHVyZScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZW5oYW5jZWQgZGIgdG8gdGhyb3cgZXJyb3JcbiAgICAgIGNvbnN0IHsgZW5oYW5jZWREYiB9ID0gcmVxdWlyZSgnLi4vLi4vbGliL2RhdGFiYXNlL2VuaGFuY2VkLWNvbm5lY3Rpb24nKVxuICAgICAgZW5oYW5jZWREYi5nZXRDbGllbnQubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb25uZWN0aW9uIHRpbWVvdXQnKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tEYXRhYmFzZUNvbm5lY3Rpb24oKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmNvbm5lY3RlZCkudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCdDb25uZWN0aW9uIHRpbWVvdXQnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ2dldERhdGFiYXNlUG9vbFN0YXR1cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBjb21wcmVoZW5zaXZlIHBvb2wgc3RhdHVzIHdpdGggZW5oYW5jZWQgY29ubmVjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldERhdGFiYXNlUG9vbFN0YXR1cygpXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdzdGF0dXMnKVxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2Nvbm5lY3Rpb25zJylcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdwZXJmb3JtYW5jZScpXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnY29uZmlndXJhdGlvbicpXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGVuaGFuY2VkIGNvbm5lY3Rpb24gc3BlY2lmaWMgZmllbGRzXG4gICAgICBpZiAocmVzdWx0LmNvbm5lY3Rpb25zKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuY29ubmVjdGlvbnMpLnRvSGF2ZVByb3BlcnR5KCdzdGF0ZScpXG4gICAgICAgIGV4cGVjdChyZXN1bHQuY29ubmVjdGlvbnMpLnRvSGF2ZVByb3BlcnR5KCd1cHRpbWUnKVxuICAgICAgICBleHBlY3QocmVzdWx0LmNvbm5lY3Rpb25zKS50b0hhdmVQcm9wZXJ0eSgncmVjb25uZWN0QXR0ZW1wdHMnKVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVzdWx0LnBlcmZvcm1hbmNlKSB7XG4gICAgICAgIGV4cGVjdChyZXN1bHQucGVyZm9ybWFuY2UpLnRvSGF2ZVByb3BlcnR5KCdzdWNjZXNzUmF0ZScpXG4gICAgICAgIGV4cGVjdChyZXN1bHQucGVyZm9ybWFuY2UpLnRvSGF2ZVByb3BlcnR5KCdhdmdMYXRlbmN5JylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZW5oYW5jZWQgY29ubmVjdGlvbiB1bmF2YWlsYWJsZSBzY2VuYXJpbycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZW5oYW5jZWQgZGIgYXMgZGlzY29ubmVjdGVkXG4gICAgICBjb25zdCB7IGVuaGFuY2VkRGIgfSA9IHJlcXVpcmUoJy4uLy4uL2xpYi9kYXRhYmFzZS9lbmhhbmNlZC1jb25uZWN0aW9uJylcbiAgICAgIGVuaGFuY2VkRGIuaXNDb25uZWN0ZWQubW9ja1JldHVyblZhbHVlKGZhbHNlKVxuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXREYXRhYmFzZVBvb2xTdGF0dXMoKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc3RhdHVzJylcbiAgICAgIGV4cGVjdChyZXN1bHQuc3RhdHVzKS50b0JlKCdkaXNjb25uZWN0ZWQnKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgZmFsbGJhY2sgc3RhdHVzIHdoZW4gZW5oYW5jZWQgY29ubmVjdGlvbiBmYWlscycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIE1vY2sgZW5oYW5jZWQgZGIgdG8gdGhyb3cgZXJyb3JcbiAgICAgIGNvbnN0IHsgZW5oYW5jZWREYiB9ID0gcmVxdWlyZSgnLi4vLi4vbGliL2RhdGFiYXNlL2VuaGFuY2VkLWNvbm5lY3Rpb24nKVxuICAgICAgZW5oYW5jZWREYi5nZXREZXRhaWxlZFN0YXRzLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignU3RhdHMgdW5hdmFpbGFibGUnKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0RGF0YWJhc2VQb29sU3RhdHVzKClcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycpXG4gICAgICBleHBlY3QodHlwZW9mIHJlc3VsdC5zdGF0dXMpLnRvQmUoJ3N0cmluZycpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnRGF0YWJhc2UgQ29ubmVjdGlvbiBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIG1haW50YWluIGNvbm5lY3Rpb24gc3RhdGUgY29uc2lzdGVuY3knLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb25uZWN0aW9uUmVzdWx0ID0gYXdhaXQgY2hlY2tEYXRhYmFzZUNvbm5lY3Rpb24oKVxuICAgICAgY29uc3QgcG9vbFN0YXR1cyA9IGF3YWl0IGdldERhdGFiYXNlUG9vbFN0YXR1cygpXG4gICAgICBcbiAgICAgIC8vIElmIGNvbm5lY3Rpb24gaXMgc3VjY2Vzc2Z1bCwgcG9vbCBzaG91bGQgcmVmbGVjdCB0aGF0XG4gICAgICBpZiAoY29ubmVjdGlvblJlc3VsdC5jb25uZWN0ZWQpIHtcbiAgICAgICAgZXhwZWN0KHBvb2xTdGF0dXMuc3RhdHVzKS5ub3QudG9CZSgnZXJyb3InKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgcGVyZm9ybWFuY2UgbWV0cmljcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBvb2xTdGF0dXMgPSBhd2FpdCBnZXREYXRhYmFzZVBvb2xTdGF0dXMoKVxuICAgICAgXG4gICAgICBpZiAocG9vbFN0YXR1cy5wZXJmb3JtYW5jZSkge1xuICAgICAgICBleHBlY3QodHlwZW9mIHBvb2xTdGF0dXMucGVyZm9ybWFuY2Uuc3VjY2Vzc1JhdGUpLnRvQmUoJ251bWJlcicpXG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcG9vbFN0YXR1cy5wZXJmb3JtYW5jZS5hdmdMYXRlbmN5KS50b0JlKCdudW1iZXInKVxuICAgICAgICBleHBlY3QocG9vbFN0YXR1cy5wZXJmb3JtYW5jZS5zdWNjZXNzUmF0ZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKVxuICAgICAgICBleHBlY3QocG9vbFN0YXR1cy5wZXJmb3JtYW5jZS5zdWNjZXNzUmF0ZSkudG9CZUxlc3NUaGFuT3JFcXVhbCgxMDApXG4gICAgICB9XG4gICAgfSlcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwb29sU3RhdHVzID0gYXdhaXQgZ2V0RGF0YWJhc2VQb29sU3RhdHVzKClcbiAgICAgIFxuICAgICAgaWYgKHBvb2xTdGF0dXMuY29uZmlndXJhdGlvbikge1xuICAgICAgICBleHBlY3QocG9vbFN0YXR1cy5jb25maWd1cmF0aW9uKS50b0hhdmVQcm9wZXJ0eSgncG9vbCcpXG4gICAgICAgIGlmIChwb29sU3RhdHVzLmNvbmZpZ3VyYXRpb24ucG9vbCkge1xuICAgICAgICAgIGV4cGVjdCh0eXBlb2YgcG9vbFN0YXR1cy5jb25maWd1cmF0aW9uLnBvb2wpLnRvQmUoJ29iamVjdCcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdFcnJvciBSZWNvdmVyeSBhbmQgUmVzaWxpZW5jZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBkYXRhYmFzZSByZWNvbm5lY3Rpb24gc2NlbmFyaW9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBlbmhhbmNlZERiIH0gPSByZXF1aXJlKCcuLi8uLi9saWIvZGF0YWJhc2UvZW5oYW5jZWQtY29ubmVjdGlvbicpXG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIHJlY29ubmVjdGlvbiBzY2VuYXJpb1xuICAgICAgZW5oYW5jZWREYi5nZXRTdGF0cy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBzdGF0ZTogJ2Nvbm5lY3RlZCcsXG4gICAgICAgIHVwdGltZTogNTAwMCxcbiAgICAgICAgdG90YWxRdWVyaWVzOiAxMCxcbiAgICAgICAgZmFpbGVkUXVlcmllczogMixcbiAgICAgICAgYXZnTGF0ZW5jeTogNzUsXG4gICAgICAgIHJlY29ubmVjdEF0dGVtcHRzOiAxLFxuICAgICAgICBsYXN0SGVhbHRoQ2hlY2s6IG5ldyBEYXRlKCksXG4gICAgICAgIGlzSGVhbHRoeTogdHJ1ZVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hlY2tEYXRhYmFzZUNvbm5lY3Rpb24oKVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmNvbm5lY3RlZCkudG9CZSh0cnVlKVxuICAgICAgZXhwZWN0KHJlc3VsdC5zdGF0cy5yZWNvbm5lY3RBdHRlbXB0cykudG9CZSgxKVxuICAgIH0pXG5cbiAgICBpdCgnc2hvdWxkIHRyYWNrIHF1ZXJ5IHBlcmZvcm1hbmNlIG92ZXIgdGltZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgZW5oYW5jZWREYiB9ID0gcmVxdWlyZSgnLi4vLi4vbGliL2RhdGFiYXNlL2VuaGFuY2VkLWNvbm5lY3Rpb24nKVxuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBwZXJmb3JtYW5jZSB0cmFja2luZ1xuICAgICAgZW5oYW5jZWREYi5nZXREZXRhaWxlZFN0YXRzLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHN0YXRlOiAnY29ubmVjdGVkJyxcbiAgICAgICAgdXB0aW1lOiA2MDAwMCxcbiAgICAgICAgdG90YWxRdWVyaWVzOiAxMDAsXG4gICAgICAgIGZhaWxlZFF1ZXJpZXM6IDUsXG4gICAgICAgIGF2Z0xhdGVuY3k6IDQ1LFxuICAgICAgICByZWNvbm5lY3RBdHRlbXB0czogMCxcbiAgICAgICAgbGFzdEhlYWx0aENoZWNrOiBuZXcgRGF0ZSgpLFxuICAgICAgICBpc0hlYWx0aHk6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICBwb29sOiB7IG1heENvbm5lY3Rpb25zOiAyMCwgbWluQ29ubmVjdGlvbnM6IDUgfSxcbiAgICAgICAgICByZWNvdmVyeTogeyBtYXhSZXRyaWVzOiA1LCByZXRyeURlbGF5OiAyMDAwIH1cbiAgICAgICAgfSxcbiAgICAgICAgcGVyZm9ybWFuY2U6IHtcbiAgICAgICAgICBzdWNjZXNzUmF0ZTogOTUsXG4gICAgICAgICAgcXVlcmllc1BlclNlY29uZDogMS42NyxcbiAgICAgICAgICBhdmdSZXNwb25zZVRpbWU6IDQ1XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IHBvb2xTdGF0dXMgPSBhd2FpdCBnZXREYXRhYmFzZVBvb2xTdGF0dXMoKVxuICAgICAgXG4gICAgICBleHBlY3QocG9vbFN0YXR1cy5wZXJmb3JtYW5jZS5zdWNjZXNzUmF0ZSkudG9CZSg5NSlcbiAgICAgIGV4cGVjdChwb29sU3RhdHVzLnBlcmZvcm1hbmNlLnF1ZXJpZXNQZXJTZWNvbmQpLnRvQmVDbG9zZVRvKDEuNjcsIDEpXG4gICAgICBleHBlY3QocG9vbFN0YXR1cy5jb25uZWN0aW9ucy50b3RhbFF1ZXJpZXMpLnRvQmUoMTAwKVxuICAgICAgZXhwZWN0KHBvb2xTdGF0dXMuY29ubmVjdGlvbnMuZmFpbGVkUXVlcmllcykudG9CZSg1KVxuICAgIH0pXG4gIH0pXG59KSJdLCJtYXBwaW5ncyI6IkFBRUE7QUFDQUEsV0FBQSxHQUFLQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsTUFBTTtFQUNoQyxPQUFPO0lBQ0xDLFlBQVksRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxrQkFBa0IsQ0FBQyxPQUFPO01BQ2hEQyxRQUFRLEVBQUVILElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0csaUJBQWlCLENBQUNDLFNBQVMsQ0FBQztNQUNoREMsV0FBVyxFQUFFTixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNHLGlCQUFpQixDQUFDQyxTQUFTLENBQUM7TUFDbkRFLFNBQVMsRUFBRVAsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDRyxpQkFBaUIsQ0FBQyxDQUFDO1FBQUVJLE9BQU8sRUFBRTtNQUFPLENBQUMsQ0FBQyxDQUFDO01BQzdEQyxJQUFJLEVBQUU7UUFDSkMsU0FBUyxFQUFFVixJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNHLGlCQUFpQixDQUFDO1VBQUVPLEVBQUUsRUFBRSxDQUFDO1VBQUVDLElBQUksRUFBRTtRQUFPLENBQUM7TUFDaEU7SUFDRixDQUFDLENBQUM7RUFDSixDQUFDO0FBQ0gsQ0FBQyxDQUFDOztBQUVGO0FBQ0FmLFdBQUEsR0FBS0MsSUFBSSxDQUFDLHdDQUF3QyxFQUFFLE1BQU07RUFDeEQsTUFBTWUsY0FBYyxHQUFHO0lBQ3JCQyxXQUFXLEVBQUVkLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ2MsZUFBZSxDQUFDLElBQUksQ0FBQztJQUM1Q0MsT0FBTyxFQUFFaEIsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUM7SUFDMUNhLFVBQVUsRUFBRWpCLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQ0cs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