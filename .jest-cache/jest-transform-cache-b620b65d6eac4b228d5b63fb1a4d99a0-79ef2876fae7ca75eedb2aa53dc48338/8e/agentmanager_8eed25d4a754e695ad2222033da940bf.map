{"version":3,"names":["cov_1l01u6zds7","actualCoverage","s","agent_manager_interface_1","require","AgUIAgentManager","constructor","f","fastGPTBaseUrl","b","process","env","FASTGPT_BASE_URL","agents","Map","createAgentFromFastGPT","params","appId","apiKey","name","description","config","trim","AgentValidationError","initResponse","fetch","method","headers","body","JSON","stringify","ok","Error","statusText","appData","json","agent","id","app","intro","instructions","chatConfig","systemPrompt","model","tools","convertFastGPTTools","modules","temperature","maxTokens","variables","extractVariables","userGuide","metadata","fastgptAppId","chatId","welcomeText","questionGuide","tts","whisper","scheduledTriggerConfig","set","error","console","module","flowType","push","type","function","moduleId","parameters","properties","extractToolParameters","inputs","required","extractRequiredParameters","pluginId","input","key","toolDescription","mapFastGPTTypeToJsonSchema","valueType","enum","length","map","e","value","filter","result","variable","label","defaultValue","updateAgent","get","AgentNotFoundError","updatedAgent","validation","validateAgent","valid","errors","deleteAgent","delete","getAgent","getAllAgents","Array","from","values","getAgentAsync","listAgents","warnings","isArray","forEach","tool","index","version","tags","exportAgent","exportedAt","Date","toISOString","checksum","calculateChecksum","importAgent","data","content","Object","keys","sort","hash","i","char","charCodeAt","Math","abs","toString","exports"],"sources":["E:\\zk-agent\\lib\\ag-ui\\protocol\\agent-manager.ts"],"sourcesContent":["import type { AgentDefinition, Tool } from \"./types\"\nimport { \n  IAgentManager, \n  CreateAgentParams, \n  UpdateAgentParams, \n  AgentValidationResult, \n  AgentExportData,\n  AgentValidationError,\n  AgentNotFoundError\n} from '../../interfaces/agent-manager.interface'\n\n/**\n * AG-UI智能体管理器\n * 负责智能体的创建、配置和管理\n */\nexport class AgUIAgentManager implements IAgentManager {\n  private fastGPTBaseUrl: string = process.env.FASTGPT_BASE_URL || 'https://api.fastgpt.run'\n  private agents: Map<string, AgentDefinition> = new Map()\n\n  /**\n   * 从FastGPT配置创建智能体\n   */\n  async createAgentFromFastGPT(params: CreateAgentParams): Promise<AgentDefinition> {\n    const { appId, apiKey, name, description, config } = params\n    // 输入验证\n    if (!appId?.trim()) {\n      throw new AgentValidationError('AppId is required and cannot be empty', ['appId is required'])\n    }\n    if (!apiKey?.trim()) {\n      throw new AgentValidationError('API Key is required and cannot be empty', ['apiKey is required'])\n    }\n\n    try {\n      // 初始化FastGPT应用\n      const initResponse = await fetch(`${this.fastGPTBaseUrl}/api/core/app/detail`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({ appId })\n      })\n\n      if (!initResponse.ok) {\n        throw new Error(`Failed to initialize FastGPT app: ${initResponse.statusText}`)\n      }\n\n      const appData = await initResponse.json()\n      \n      // 验证响应结构\n      if (!appData || typeof appData !== 'object') {\n        throw new AgentValidationError('Invalid response structure from FastGPT API', ['Invalid FastGPT API response format'])\n      }\n\n      // 构建标准AG-UI智能体定义\n      const agent: AgentDefinition = {\n        id: appId,\n        name: appData.app?.name || `Agent-${appId}`,\n        description: appData.app?.intro || \"FastGPT智能体\",\n        instructions: appData.app?.chatConfig?.systemPrompt || \"\",\n        model: appData.app?.chatConfig?.model || \"gpt-3.5-turbo\",\n        tools: this.convertFastGPTTools(appData.app?.modules || []),\n        temperature: appData.app?.chatConfig?.temperature || 0.7,\n        maxTokens: appData.app?.chatConfig?.maxTokens || 2000,\n        variables: this.extractVariables(appData.app?.userGuide?.variables || []),\n        metadata: {\n          fastgptAppId: appId,\n          chatId: appData.chatId,\n          welcomeText: appData.app?.userGuide?.welcomeText,\n          questionGuide: appData.app?.userGuide?.questionGuide,\n          tts: appData.app?.chatConfig?.tts,\n          whisper: appData.app?.chatConfig?.whisper,\n          scheduledTriggerConfig: appData.app?.chatConfig?.scheduledTriggerConfig,\n        },\n      }\n\n      // 保存智能体\n      this.agents.set(agent.id, agent)\n\n      return agent\n    } catch (error) {\n      console.error(\"Error creating agent from FastGPT:\", error)\n      throw error\n    }\n  }\n\n  /**\n   * 转换FastGPT模块为AG-UI工具\n   */\n  private convertFastGPTTools(modules: any[]): Tool[] {\n    const tools: Tool[] = []\n\n    for (const module of modules) {\n      switch (module.flowType) {\n        case \"tools\":\n        case \"httpRequest468\":\n          tools.push({\n            type: \"function\",\n            function: {\n              name: module.name || `tool_${module.moduleId}`,\n              description: module.intro || \"FastGPT工具\",\n              parameters: {\n                type: \"object\",\n                properties: this.extractToolParameters(module.inputs || []),\n                required: this.extractRequiredParameters(module.inputs || []),\n              },\n            },\n          })\n          break\n        case \"pluginModule\":\n          if (module.pluginId) {\n            tools.push({\n              type: \"function\",\n              function: {\n                name: module.name || `plugin_${module.pluginId}`,\n                description: module.intro || \"FastGPT插件\",\n                parameters: {\n                  type: \"object\",\n                  properties: this.extractToolParameters(module.inputs || []),\n                  required: this.extractRequiredParameters(module.inputs || []),\n                },\n              },\n            })\n          }\n          break\n      }\n    }\n\n    return tools\n  }\n\n  /**\n   * 提取工具参数\n   */\n  private extractToolParameters(inputs: any[]): Record<string, any> {\n    const parameters: Record<string, any> = {}\n\n    for (const input of inputs) {\n      if (input.key && input.toolDescription) {\n        parameters[input.key] = {\n          type: this.mapFastGPTTypeToJsonSchema(input.valueType),\n          description: input.toolDescription,\n        }\n\n        if (input.enum && input.enum.length > 0) {\n          parameters[input.key].enum = input.enum.map((e: any) => e.value)\n        }\n      }\n    }\n\n    return parameters\n  }\n\n  /**\n   * 提取必需参数\n   */\n  private extractRequiredParameters(inputs: any[]): string[] {\n    return inputs.filter((input) => input.required && input.key).map((input) => input.key)\n  }\n\n  /**\n   * 映射FastGPT类型到JSON Schema类型\n   */\n  private mapFastGPTTypeToJsonSchema(valueType: string): string {\n    switch (valueType) {\n      case \"string\":\n      case \"textarea\":\n        return \"string\"\n      case \"number\":\n        return \"number\"\n      case \"boolean\":\n        return \"boolean\"\n      case \"arrayString\":\n        return \"array\"\n      case \"arrayNumber\":\n        return \"array\"\n      case \"object\":\n        return \"object\"\n      default:\n        return \"string\"\n    }\n  }\n\n  /**\n   * 提取全局变量\n   */\n  private extractVariables(variables: any[]): Record<string, any> {\n    const result: Record<string, any> = {}\n\n    for (const variable of variables) {\n      if (variable.key) {\n        result[variable.key] = {\n          label: variable.label,\n          type: variable.type,\n          required: variable.required,\n          defaultValue: variable.defaultValue,\n          description: variable.description,\n        }\n      }\n    }\n\n    return result\n  }\n\n  /**\n   * 更新智能体配置\n   */\n  async updateAgent(params: UpdateAgentParams): Promise<AgentDefinition> {\n    const { id, name, description, config, tools } = params\n    \n    const agent = this.agents.get(id)\n    if (!agent) {\n      throw new AgentNotFoundError(id)\n    }\n\n    const updatedAgent: AgentDefinition = {\n      ...agent,\n      ...(name && { name: name.trim() }),\n      ...(description && { description: description.trim() }),\n      ...(tools && { tools }),\n      ...(config && { metadata: { ...agent.metadata, ...config } })\n    }\n\n    const validation = this.validateAgent(updatedAgent)\n    if (!validation.valid) {\n      throw new AgentValidationError('智能体配置验证失败', validation.errors)\n    }\n\n    this.agents.set(id, updatedAgent)\n    return updatedAgent\n  }\n\n  /**\n   * 删除智能体\n   */\n  async deleteAgent(id: string): Promise<boolean> {\n    if (!id || typeof id !== 'string') {\n      throw new AgentValidationError('智能体ID无效', ['Invalid agent ID'])\n    }\n    \n    return this.agents.delete(id)\n  }\n\n  /**\n   * 获取智能体\n   */\n  getAgent(id: string): AgentDefinition | undefined {\n    return this.agents.get(id)\n  }\n\n  /**\n   * 获取所有智能体\n   */\n  getAllAgents(): AgentDefinition[] {\n    return Array.from(this.agents.values())\n  }\n\n  /**\n   * 根据ID获取智能体 (异步版本)\n   */\n  async getAgentAsync(id: string): Promise<AgentDefinition | null> {\n    return this.agents.get(id) || null\n  }\n\n  /**\n   * 获取智能体列表\n   */\n  async listAgents(): Promise<AgentDefinition[]> {\n    return Array.from(this.agents.values())\n  }\n\n  /**\n   * 验证智能体配置\n   */\n  validateAgent(agent: AgentDefinition): AgentValidationResult {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    // 验证智能体对象本身\n    if (!agent || typeof agent !== 'object') {\n      errors.push('智能体配置不能为空且必须是对象')\n      return { valid: false, errors, warnings }\n    }\n\n    // 验证基本信息\n    if (!agent.id || typeof agent.id !== 'string' || agent.id.trim().length === 0) {\n      errors.push('智能体ID不能为空')\n    }\n    if (!agent.name || typeof agent.name !== 'string' || agent.name.trim().length === 0) {\n      errors.push('智能体名称不能为空')\n    }\n    if (!agent.description || typeof agent.description !== 'string') {\n      errors.push('智能体描述必须是字符串')\n    }\n\n    // 验证模型配置\n    if (!agent.model || typeof agent.model !== 'string') {\n      errors.push('模型配置不能为空')\n    }\n\n    // 验证工具配置\n    if (agent.tools && Array.isArray(agent.tools)) {\n      agent.tools.forEach((tool, index) => {\n        if (!tool || typeof tool !== 'object') {\n          errors.push(`工具[${index}]配置无效`)\n          return\n        }\n        if (!tool.function.name || typeof tool.function.name !== 'string') {\n          errors.push(`工具[${index}]名称不能为空`)\n        }\n        if (!tool.function.description || typeof tool.function.description !== 'string') {\n          errors.push(`工具[${index}]描述不能为空`)\n        }\n        if (tool.function.parameters && typeof tool.function.parameters !== 'object') {\n          errors.push(`工具[${index}]参数配置必须是对象`)\n        }\n      })\n    }\n\n    // 验证版本号\n    if (agent.version && typeof agent.version !== 'string') {\n      errors.push('版本号必须是字符串')\n    }\n\n    // 验证标签\n    if (agent.tags && !Array.isArray(agent.tags)) {\n      errors.push('标签必须是数组')\n    }\n\n    // 添加警告检查\n    if (agent.temperature && (agent.temperature < 0 || agent.temperature > 2)) {\n      warnings.push('温度参数建议在0-2之间')\n    }\n    if (agent.maxTokens && agent.maxTokens > 4096) {\n      warnings.push('最大令牌数过大可能影响性能')\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors,\n      warnings\n    }\n  }\n\n  /**\n   * 导出智能体配置\n   */\n  async exportAgent(id: string): Promise<AgentExportData> {\n    const agent = this.agents.get(id)\n    if (!agent) {\n      throw new AgentNotFoundError(id)\n    }\n\n    return {\n      agent,\n      metadata: {\n        exportedAt: new Date().toISOString(),\n        version: '1.0.0',\n        checksum: this.calculateChecksum(agent)\n      }\n    }\n  }\n\n  /**\n   * 导入智能体配置\n   */\n  async importAgent(data: AgentExportData): Promise<AgentDefinition> {\n    const { agent } = data\n    \n    const validation = this.validateAgent(agent)\n    if (!validation.valid) {\n      throw new AgentValidationError('导入的智能体配置无效', validation.errors)\n    }\n\n    this.agents.set(agent.id, agent)\n    return agent\n  }\n\n  /**\n   * 计算校验和\n   */\n  private calculateChecksum(agent: AgentDefinition): string {\n    const content = JSON.stringify(agent, Object.keys(agent).sort())\n    // 简单的哈希实现\n    let hash = 0\n    for (let i = 0; i < content.length; i++) {\n      const char = content.charCodeAt(i)\n      hash = ((hash << 5) - hash) + char\n      hash = hash & hash // 转换为32位整数\n    }\n    return Math.abs(hash).toString(16)\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}