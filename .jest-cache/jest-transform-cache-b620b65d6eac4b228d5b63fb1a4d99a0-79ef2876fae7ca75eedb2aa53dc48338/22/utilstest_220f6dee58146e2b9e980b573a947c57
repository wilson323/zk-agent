559a3fc17ffd4dfbb0b489f71f7172e7
/**
 * @file utils.test.js
 * @description 核心工具函数测试
 * @author ZK-Agent Team
 * @date 2025-05-25
 */

describe('核心工具函数测试', () => {
  test('环境变量设置正确', () => {
    expect(process.env.NODE_ENV).toBe('test');
    expect(process.env.DATABASE_URL).toContain('zkagent2');
    expect(process.env.JWT_SECRET).toBeDefined();
  });
  test('全局变量可用', () => {
    expect(global.TextEncoder).toBeDefined();
    expect(global.TextDecoder).toBeDefined();
  });
  test('基础数学运算', () => {
    expect(1 + 1).toBe(2);
    expect(Math.max(1, 2, 3)).toBe(3);
    expect(Math.min(1, 2, 3)).toBe(1);
  });
  test('字符串操作', () => {
    const testString = 'ZK-Agent';
    expect(testString.toLowerCase()).toBe('zk-agent');
    expect(testString.includes('Agent')).toBe(true);
    expect(testString.split('-')).toEqual(['ZK', 'Agent']);
  });
  test('数组操作', () => {
    const testArray = [1, 2, 3, 4, 5];
    expect(testArray.length).toBe(5);
    expect(testArray.filter(x => x > 3)).toEqual([4, 5]);
    expect(testArray.map(x => x * 2)).toEqual([2, 4, 6, 8, 10]);
  });
  test('对象操作', () => {
    const testObject = {
      name: 'ZK-Agent',
      version: '1.0.0'
    };
    expect(testObject.name).toBe('ZK-Agent');
    expect(Object.keys(testObject)).toEqual(['name', 'version']);
    expect(Object.values(testObject)).toEqual(['ZK-Agent', '1.0.0']);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsInRlc3QiLCJleHBlY3QiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJ0b0JlIiwiREFUQUJBU0VfVVJMIiwidG9Db250YWluIiwiSldUX1NFQ1JFVCIsInRvQmVEZWZpbmVkIiwiZ2xvYmFsIiwiVGV4dEVuY29kZXIiLCJUZXh0RGVjb2RlciIsIk1hdGgiLCJtYXgiLCJtaW4iLCJ0ZXN0U3RyaW5nIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInNwbGl0IiwidG9FcXVhbCIsInRlc3RBcnJheSIsImxlbmd0aCIsImZpbHRlciIsIngiLCJtYXAiLCJ0ZXN0T2JqZWN0IiwibmFtZSIsInZlcnNpb24iLCJPYmplY3QiLCJrZXlzIiwidmFsdWVzIl0sInNvdXJjZXMiOlsidXRpbHMudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGZpbGUgdXRpbHMudGVzdC5qc1xyXG4gKiBAZGVzY3JpcHRpb24g5qC45b+D5bel5YW35Ye95pWw5rWL6K+VXHJcbiAqIEBhdXRob3IgWkstQWdlbnQgVGVhbVxyXG4gKiBAZGF0ZSAyMDI1LTA1LTI1XHJcbiAqL1xyXG5cclxuZGVzY3JpYmUoJ+aguOW/g+W3peWFt+WHveaVsOa1i+ivlScsICgpID0+IHtcclxuICB0ZXN0KCfnjq/looPlj5jph4/orr7nva7mraPnoa4nLCAoKSA9PiB7XHJcbiAgICBleHBlY3QocHJvY2Vzcy5lbnYuTk9ERV9FTlYpLnRvQmUoJ3Rlc3QnKTtcclxuICAgIGV4cGVjdChwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwpLnRvQ29udGFpbignemthZ2VudDInKTtcclxuICAgIGV4cGVjdChwcm9jZXNzLmVudi5KV1RfU0VDUkVUKS50b0JlRGVmaW5lZCgpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCflhajlsYDlj5jph4/lj6/nlKgnLCAoKSA9PiB7XHJcbiAgICBleHBlY3QoZ2xvYmFsLlRleHRFbmNvZGVyKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgZXhwZWN0KGdsb2JhbC5UZXh0RGVjb2RlcikudG9CZURlZmluZWQoKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgn5Z+656GA5pWw5a2m6L+Q566XJywgKCkgPT4ge1xyXG4gICAgZXhwZWN0KDEgKyAxKS50b0JlKDIpO1xyXG4gICAgZXhwZWN0KE1hdGgubWF4KDEsIDIsIDMpKS50b0JlKDMpO1xyXG4gICAgZXhwZWN0KE1hdGgubWluKDEsIDIsIDMpKS50b0JlKDEpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCflrZfnrKbkuLLmk43kvZwnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB0ZXN0U3RyaW5nID0gJ1pLLUFnZW50JztcclxuICAgIGV4cGVjdCh0ZXN0U3RyaW5nLnRvTG93ZXJDYXNlKCkpLnRvQmUoJ3prLWFnZW50Jyk7XHJcbiAgICBleHBlY3QodGVzdFN0cmluZy5pbmNsdWRlcygnQWdlbnQnKSkudG9CZSh0cnVlKTtcclxuICAgIGV4cGVjdCh0ZXN0U3RyaW5nLnNwbGl0KCctJykpLnRvRXF1YWwoWydaSycsICdBZ2VudCddKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgn5pWw57uE5pON5L2cJywgKCkgPT4ge1xyXG4gICAgY29uc3QgdGVzdEFycmF5ID0gWzEsIDIsIDMsIDQsIDVdO1xyXG4gICAgZXhwZWN0KHRlc3RBcnJheS5sZW5ndGgpLnRvQmUoNSk7XHJcbiAgICBleHBlY3QodGVzdEFycmF5LmZpbHRlcih4ID0+IHggPiAzKSkudG9FcXVhbChbNCwgNV0pO1xyXG4gICAgZXhwZWN0KHRlc3RBcnJheS5tYXAoeCA9PiB4ICogMikpLnRvRXF1YWwoWzIsIDQsIDYsIDgsIDEwXSk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ+WvueixoeaTjeS9nCcsICgpID0+IHtcclxuICAgIGNvbnN0IHRlc3RPYmplY3QgPSB7IG5hbWU6ICdaSy1BZ2VudCcsIHZlcnNpb246ICcxLjAuMCcgfTtcclxuICAgIGV4cGVjdCh0ZXN0T2JqZWN0Lm5hbWUpLnRvQmUoJ1pLLUFnZW50Jyk7XHJcbiAgICBleHBlY3QoT2JqZWN0LmtleXModGVzdE9iamVjdCkpLnRvRXF1YWwoWyduYW1lJywgJ3ZlcnNpb24nXSk7XHJcbiAgICBleHBlY3QoT2JqZWN0LnZhbHVlcyh0ZXN0T2JqZWN0KSkudG9FcXVhbChbJ1pLLUFnZW50JywgJzEuMC4wJ10pO1xyXG4gIH0pO1xyXG59KTsgIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUFBLFFBQVEsQ0FBQyxVQUFVLEVBQUUsTUFBTTtFQUN6QkMsSUFBSSxDQUFDLFVBQVUsRUFBRSxNQUFNO0lBQ3JCQyxNQUFNLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN6Q0osTUFBTSxDQUFDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0csWUFBWSxDQUFDLENBQUNDLFNBQVMsQ0FBQyxVQUFVLENBQUM7SUFDdEROLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUNLLFVBQVUsQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBQztFQUM5QyxDQUFDLENBQUM7RUFFRlQsSUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNO0lBQ25CQyxNQUFNLENBQUNTLE1BQU0sQ0FBQ0MsV0FBVyxDQUFDLENBQUNGLFdBQVcsQ0FBQyxDQUFDO0lBQ3hDUixNQUFNLENBQUNTLE1BQU0sQ0FBQ0UsV0FBVyxDQUFDLENBQUNILFdBQVcsQ0FBQyxDQUFDO0VBQzFDLENBQUMsQ0FBQztFQUVGVCxJQUFJLENBQUMsUUFBUSxFQUFFLE1BQU07SUFDbkJDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUNJLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDckJKLE1BQU0sQ0FBQ1ksSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDVCxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2pDSixNQUFNLENBQUNZLElBQUksQ0FBQ0UsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQ1YsSUFBSSxDQUFDLENBQUMsQ0FBQztFQUNuQyxDQUFDLENBQUM7RUFFRkwsSUFBSSxDQUFDLE9BQU8sRUFBRSxNQUFNO0lBQ2xCLE1BQU1nQixVQUFVLEdBQUcsVUFBVTtJQUM3QmYsTUFBTSxDQUFDZSxVQUFVLENBQUNDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQ1osSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUNqREosTUFBTSxDQUFDZSxVQUFVLENBQUNFLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDYixJQUFJLENBQUMsSUFBSSxDQUFDO0lBQy9DSixNQUFNLENBQUNlLFVBQVUsQ0FBQ0csS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUNDLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztFQUN4RCxDQUFDLENBQUM7RUFFRnBCLElBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTTtJQUNqQixNQUFNcUIsU0FBUyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNqQ3BCLE1BQU0sQ0FBQ29CLFNBQVMsQ0FBQ0MsTUFBTSxDQUFDLENBQUNqQixJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2hDSixNQUFNLENBQUNvQixTQUFTLENBQUNFLE1BQU0sQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQ0osT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3BEbkIsTUFBTSxDQUFDb0IsU0FBUyxDQUFDSSxHQUFHLENBQUNELENBQUMsSUFBSUEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUNKLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztFQUM3RCxDQUFDLENBQUM7RUFFRnBCLElBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTTtJQUNqQixNQUFNMEIsVUFBVSxHQUFHO01BQUVDLElBQUksRUFBRSxVQUFVO01BQUVDLE9BQU8sRUFBRTtJQUFRLENBQUM7SUFDekQzQixNQUFNLENBQUN5QixVQUFVLENBQUNDLElBQUksQ0FBQyxDQUFDdEIsSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN4Q0osTUFBTSxDQUFDNEIsTUFBTSxDQUFDQyxJQUFJLENBQUNKLFVBQVUsQ0FBQyxDQUFDLENBQUNOLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztJQUM1RG5CLE1BQU0sQ0FBQzRCLE1BQU0sQ0FBQ0UsTUFBTSxDQUFDTCxVQUFVLENBQUMsQ0FBQyxDQUFDTixPQUFPLENBQUMsQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7RUFDbEUsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119