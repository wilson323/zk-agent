{"version":3,"names":["performance","require","fs","path","describe","performanceData","timestamp","Date","toISOString","testResults","systemInfo","nodeVersion","process","version","platform","arch","memory","memoryUsage","test","iterations","times","i","start","now","Promise","resolve","setTimeout","Math","random","end","push","avgTime","reduce","a","b","length","minTime","min","maxTime","max","testName","average","unit","expect","toBeLessThan","memUsage","heapUsed","round","heapTotal","external","rss","result","j","sqrt","sin","reportDir","join","__dirname","reportFile","existsSync","mkdirSync","recursive","writeFileSync","JSON","stringify","textReport","generateTextReport","textReportFile","console","log","toBe","data","report","repeat","forEach","toFixed","undefined","toLocaleString"],"sources":["performance-report.test.js"],"sourcesContent":["/**\n * @file Performance Report Generator\n * @description ÊÄßËÉΩÊµãËØïÊä•ÂëäÁîüÊàêÂô®\n */\n\nconst { performance } = require('perf_hooks');\nconst fs = require('fs');\nconst path = require('path');\n\ndescribe('Performance Report', () => {\n  let performanceData = {\n    timestamp: new Date().toISOString(),\n    testResults: [],\n    systemInfo: {\n      nodeVersion: process.version,\n      platform: process.platform,\n      arch: process.arch,\n      memory: process.memoryUsage()\n    }\n  };\n  \n  /**\n   * Êî∂ÈõÜAPIÂìçÂ∫îÊó∂Èó¥Êï∞ÊçÆ\n   */\n  test('Êî∂ÈõÜAPIÂìçÂ∫îÊó∂Èó¥Êï∞ÊçÆ', async () => {\n    const iterations = 5;\n    const times = [];\n    \n    for (let i = 0; i < iterations; i++) {\n      const start = performance.now();\n      await new Promise(resolve => setTimeout(resolve, 30 + Math.random() * 20));\n      const end = performance.now();\n      times.push(end - start);\n    }\n    \n    const avgTime = times.reduce((a, b) => a + b, 0) / times.length;\n    const minTime = Math.min(...times);\n    const maxTime = Math.max(...times);\n    \n    performanceData.testResults.push({\n      testName: 'APIÂìçÂ∫îÊó∂Èó¥',\n      average: avgTime,\n      min: minTime,\n      max: maxTime,\n      iterations: iterations,\n      unit: 'ms'\n    });\n    \n    expect(avgTime).toBeLessThan(100);\n  });\n  \n  /**\n   * Êî∂ÈõÜÂÜÖÂ≠ò‰ΩøÁî®Êï∞ÊçÆ\n   */\n  test('Êî∂ÈõÜÂÜÖÂ≠ò‰ΩøÁî®Êï∞ÊçÆ', () => {\n    const memUsage = process.memoryUsage();\n    \n    performanceData.testResults.push({\n      testName: 'ÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ',\n      heapUsed: Math.round(memUsage.heapUsed / 1024 / 1024 * 100) / 100,\n      heapTotal: Math.round(memUsage.heapTotal / 1024 / 1024 * 100) / 100,\n      external: Math.round(memUsage.external / 1024 / 1024 * 100) / 100,\n      rss: Math.round(memUsage.rss / 1024 / 1024 * 100) / 100,\n      unit: 'MB'\n    });\n    \n    expect(memUsage.heapUsed / 1024 / 1024).toBeLessThan(100);\n  });\n  \n  /**\n   * Êî∂ÈõÜCPUÊÄßËÉΩÊï∞ÊçÆ\n   */\n  test('Êî∂ÈõÜCPUÊÄßËÉΩÊï∞ÊçÆ', () => {\n    const iterations = 3;\n    const times = [];\n    \n    for (let i = 0; i < iterations; i++) {\n      const start = performance.now();\n      \n      // CPUÂØÜÈõÜÂûãËÆ°ÁÆó\n      let result = 0;\n      for (let j = 0; j < 50000; j++) {\n        result += Math.sqrt(j) * Math.sin(j);\n      }\n      \n      const end = performance.now();\n      times.push(end - start);\n    }\n    \n    const avgTime = times.reduce((a, b) => a + b, 0) / times.length;\n    \n    performanceData.testResults.push({\n      testName: 'CPUËÆ°ÁÆóÊÄßËÉΩ',\n      average: avgTime,\n      iterations: iterations,\n      unit: 'ms'\n    });\n    \n    expect(avgTime).toBeLessThan(200);\n  });\n  \n  /**\n   * ÁîüÊàêÊÄßËÉΩÊä•Âëä\n   */\n  test('ÁîüÊàêÊÄßËÉΩÊä•Âëä', () => {\n    const reportDir = path.join(__dirname, '../../reports');\n    const reportFile = path.join(reportDir, 'performance-report.json');\n    \n    // Á°Æ‰øùÊä•ÂëäÁõÆÂΩïÂ≠òÂú®\n    if (!fs.existsSync(reportDir)) {\n      fs.mkdirSync(reportDir, { recursive: true });\n    }\n    \n    // ÂÜôÂÖ•ÊÄßËÉΩÊä•Âëä\n    fs.writeFileSync(reportFile, JSON.stringify(performanceData, null, 2));\n    \n    // ÁîüÊàêÁÆÄÂåñÁöÑÊñáÊú¨Êä•Âëä\n    const textReport = generateTextReport(performanceData);\n    const textReportFile = path.join(reportDir, 'performance-summary.txt');\n    fs.writeFileSync(textReportFile, textReport);\n    \n    console.log('\\nüìä ÊÄßËÉΩÊµãËØïÊä•ÂëäÂ∑≤ÁîüÊàê:');\n    console.log(`   ËØ¶ÁªÜÊä•Âëä: ${reportFile}`);\n    console.log(`   ÊëòË¶ÅÊä•Âëä: ${textReportFile}`);\n    \n    expect(fs.existsSync(reportFile)).toBe(true);\n    expect(fs.existsSync(textReportFile)).toBe(true);\n  });\n});\n\n/**\n * ÁîüÊàêÊñáÊú¨Ê†ºÂºèÁöÑÊÄßËÉΩÊä•Âëä\n * @param {Object} data - ÊÄßËÉΩÊï∞ÊçÆ\n * @returns {string} ÊñáÊú¨Êä•Âëä\n */\nfunction generateTextReport(data) {\n  let report = `ZK-Agent ÊÄßËÉΩÊµãËØïÊä•Âëä\\n`;\n  report += `ÁîüÊàêÊó∂Èó¥: ${data.timestamp}\\n`;\n  report += `Node.jsÁâàÊú¨: ${data.systemInfo.nodeVersion}\\n`;\n  report += `Âπ≥Âè∞: ${data.systemInfo.platform} ${data.systemInfo.arch}\\n\\n`;\n  \n  report += `ÊµãËØïÁªìÊûú:\\n`;\n  report += `${'='.repeat(50)}\\n`;\n  \n  data.testResults.forEach(result => {\n    report += `\\n${result.testName}:\\n`;\n    \n    if (result.testName === 'ÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ') {\n      report += `  Â†ÜÂÜÖÂ≠ò‰ΩøÁî®: ${result.heapUsed} ${result.unit}\\n`;\n      report += `  Â†ÜÂÜÖÂ≠òÊÄªËÆ°: ${result.heapTotal} ${result.unit}\\n`;\n      report += `  Â§ñÈÉ®ÂÜÖÂ≠ò: ${result.external} ${result.unit}\\n`;\n      report += `  RSSÂÜÖÂ≠ò: ${result.rss} ${result.unit}\\n`;\n    } else {\n      report += `  Âπ≥ÂùáÊó∂Èó¥: ${result.average?.toFixed(2)} ${result.unit}\\n`;\n      if (result.min !== undefined) {\n        report += `  ÊúÄÁü≠Êó∂Èó¥: ${result.min.toFixed(2)} ${result.unit}\\n`;\n        report += `  ÊúÄÈïøÊó∂Èó¥: ${result.max.toFixed(2)} ${result.unit}\\n`;\n      }\n      if (result.iterations) {\n        report += `  ÊµãËØïÊ¨°Êï∞: ${result.iterations}\\n`;\n      }\n    }\n  });\n  \n  report += `\\n${'='.repeat(50)}\\n`;\n  report += `ÊµãËØïÂÆåÊàêÊó∂Èó¥: ${new Date().toLocaleString()}\\n`;\n  \n  return report;\n}"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAY,CAAC,GAAGC,OAAO,CAAC,YAAY,CAAC;AAC7C,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAI,CAAC;AACxB,MAAME,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;AAE5BG,QAAQ,CAAC,oBAAoB,EAAE,MAAM;EACnC,IAAIC,eAAe,GAAG;IACpBC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IACnCC,WAAW,EAAE,EAAE;IACfC,UAAU,EAAE;MACVC,WAAW,EAAEC,OAAO,CAACC,OAAO;MAC5BC,QAAQ,EAAEF,OAAO,CAACE,QAAQ;MAC1BC,IAAI,EAAEH,OAAO,CAACG,IAAI;MAClBC,MAAM,EAAEJ,OAAO,CAACK,WAAW,CAAC;IAC9B;EACF,CAAC;;EAED;AACF;AACA;EACEC,IAAI,CAAC,aAAa,EAAE,YAAY;IAC9B,MAAMC,UAAU,GAAG,CAAC;IACpB,MAAMC,KAAK,GAAG,EAAE;IAEhB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,UAAU,EAAEE,CAAC,EAAE,EAAE;MACnC,MAAMC,KAAK,GAAGtB,WAAW,CAACuB,GAAG,CAAC,CAAC;MAC/B,MAAM,IAAIC,OAAO,CAACC,OAAO,IAAIC,UAAU,CAACD,OAAO,EAAE,EAAE,GAAGE,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;MAC1E,MAAMC,GAAG,GAAG7B,WAAW,CAACuB,GAAG,CAAC,CAAC;MAC7BH,KAAK,CAACU,IAAI,CAACD,GAAG,GAAGP,KAAK,CAAC;IACzB;IAEA,MAAMS,OAAO,GAAGX,KAAK,CAACY,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC,GAAGd,KAAK,CAACe,MAAM;IAC/D,MAAMC,OAAO,GAAGT,IAAI,CAACU,GAAG,CAAC,GAAGjB,KAAK,CAAC;IAClC,MAAMkB,OAAO,GAAGX,IAAI,CAACY,GAAG,CAAC,GAAGnB,KAAK,CAAC;IAElCf,eAAe,CAACI,WAAW,CAACqB,IAAI,CAAC;MAC/BU,QAAQ,EAAE,SAAS;MACnBC,OAAO,EAAEV,OAAO;MAChBM,GAAG,EAAED,OAAO;MACZG,GAAG,EAAED,OAAO;MACZnB,UAAU,EAAEA,UAAU;MACtBuB,IAAI,EAAE;IACR,CAAC,CAAC;IAEFC,MAAM,CAACZ,OAAO,CAAC,CAACa,YAAY,CAAC,GAAG,CAAC;EACnC,CAAC,CAAC;;EAEF;AACF;AACA;EACE1B,IAAI,CAAC,UAAU,EAAE,MAAM;IACrB,MAAM2B,QAAQ,GAAGjC,OAAO,CAACK,WAAW,CAAC,CAAC;IAEtCZ,eAAe,CAACI,WAAW,CAACqB,IAAI,CAAC;MAC/BU,QAAQ,EAAE,QAAQ;MAClBM,QAAQ,EAAEnB,IAAI,CAACoB,KAAK,CAACF,QAAQ,CAACC,QAAQ,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG;MACjEE,SAAS,EAAErB,IAAI,CAACoB,KAAK,CAACF,QAAQ,CAACG,SAAS,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG;MACnEC,QAAQ,EAAEtB,IAAI,CAACoB,KAAK,CAACF,QAAQ,CAACI,QAAQ,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG;MACjEC,GAAG,EAAEvB,IAAI,CAACoB,KAAK,CAACF,QAAQ,CAACK,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG;MACvDR,IAAI,EAAE;IACR,CAAC,CAAC;IAEFC,MAAM,CAACE,QAAQ,CAACC,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,CAACF,YAAY,CAAC,GAAG,CAAC;EAC3D,CAAC,CAAC;;EAEF;AACF;AACA;EACE1B,IAAI,CAAC,WAAW,EAAE,MAAM;IACtB,MAAMC,UAAU,GAAG,CAAC;IACpB,MAAMC,KAAK,GAAG,EAAE;IAEhB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,UAAU,EAAEE,CAAC,EAAE,EAAE;MACnC,MAAMC,KAAK,GAAGtB,WAAW,CAACuB,GAAG,CAAC,CAAC;;MAE/B;MACA,IAAI4B,MAAM,GAAG,CAAC;MACd,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,KAAK,EAAEA,CAAC,EAAE,EAAE;QAC9BD,MAAM,IAAIxB,IAAI,CAAC0B,IAAI,CAACD,CAAC,CAAC,GAAGzB,IAAI,CAAC2B,GAAG,CAACF,CAAC,CAAC;MACtC;MAEA,MAAMvB,GAAG,GAAG7B,WAAW,CAACuB,GAAG,CAAC,CAAC;MAC7BH,KAAK,CAACU,IAAI,CAACD,GAAG,GAAGP,KAAK,CAAC;IACzB;IAEA,MAAMS,OAAO,GAAGX,KAAK,CAACY,MAAM,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,GAAGC,CAAC,EAAE,CAAC,CAAC,GAAGd,KAAK,CAACe,MAAM;IAE/D9B,eAAe,CAACI,WAAW,CAACqB,IAAI,CAAC;MAC/BU,QAAQ,EAAE,SAAS;MACnBC,OAAO,EAAEV,OAAO;MAChBZ,UAAU,EAAEA,UAAU;MACtBuB,IAAI,EAAE;IACR,CAAC,CAAC;IAEFC,MAAM,CAACZ,OAAO,CAAC,CAACa,YAAY,CAAC,GAAG,CAAC;EACnC,CAAC,CAAC;;EAEF;AACF;AACA;EACE1B,IAAI,CAAC,QAAQ,EAAE,MAAM;IACnB,MAAMqC,SAAS,GAAGpD,IAAI,CAACqD,IAAI,CAACC,SAAS,EAAE,eAAe,CAAC;IACvD,MAAMC,UAAU,GAAGvD,IAAI,CAACqD,IAAI,CAACD,SAAS,EAAE,yBAAyB,CAAC;;IAElE;IACA,IAAI,CAACrD,EAAE,CAACyD,UAAU,CAACJ,SAAS,CAAC,EAAE;MAC7BrD,EAAE,CAAC0D,SAAS,CAACL,SAAS,EAAE;QAAEM,SAAS,EAAE;MAAK,CAAC,CAAC;IAC9C;;IAEA;IACA3D,EAAE,CAAC4D,aAAa,CAACJ,UAAU,EAAEK,IAAI,CAACC,SAAS,CAAC3D,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;;IAEtE;IACA,MAAM4D,UAAU,GAAGC,kBAAkB,CAAC7D,eAAe,CAAC;IACtD,MAAM8D,cAAc,GAAGhE,IAAI,CAACqD,IAAI,CAACD,SAAS,EAAE,yBAAyB,CAAC;IACtErD,EAAE,CAAC4D,aAAa,CAACK,cAAc,EAAEF,UAAU,CAAC;IAE5CG,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAC9BD,OAAO,CAACC,GAAG,CAAC,YAAYX,UAAU,EAAE,CAAC;IACrCU,OAAO,CAACC,GAAG,CAAC,YAAYF,cAAc,EAAE,CAAC;IAEzCxB,MAAM,CAACzC,EAAE,CAACyD,UAAU,CAACD,UAAU,CAAC,CAAC,CAACY,IAAI,CAAC,IAAI,CAAC;IAC5C3B,MAAM,CAACzC,EAAE,CAACyD,UAAU,CAACQ,cAAc,CAAC,CAAC,CAACG,IAAI,CAAC,IAAI,CAAC;EAClD,CAAC,CAAC;AACJ,CAAC,CAAC;;AAEF;AACA;AACA;AACA;AACA;AACA,SAASJ,kBAAkBA,CAACK,IAAI,EAAE;EAChC,IAAIC,MAAM,GAAG,mBAAmB;EAChCA,MAAM,IAAI,SAASD,IAAI,CAACjE,SAAS,IAAI;EACrCkE,MAAM,IAAI,cAAcD,IAAI,CAAC7D,UAAU,CAACC,WAAW,IAAI;EACvD6D,MAAM,IAAI,OAAOD,IAAI,CAAC7D,UAAU,CAACI,QAAQ,IAAIyD,IAAI,CAAC7D,UAAU,CAACK,IAAI,MAAM;EAEvEyD,MAAM,IAAI,SAAS;EACnBA,MAAM,IAAI,GAAG,GAAG,CAACC,MAAM,CAAC,EAAE,CAAC,IAAI;EAE/BF,IAAI,CAAC9D,WAAW,CAACiE,OAAO,CAACvB,MAAM,IAAI;IACjCqB,MAAM,IAAI,KAAKrB,MAAM,CAACX,QAAQ,KAAK;IAEnC,IAAIW,MAAM,CAACX,QAAQ,KAAK,QAAQ,EAAE;MAChCgC,MAAM,IAAI,YAAYrB,MAAM,CAACL,QAAQ,IAAIK,MAAM,CAACT,IAAI,IAAI;MACxD8B,MAAM,IAAI,YAAYrB,MAAM,CAACH,SAAS,IAAIG,MAAM,CAACT,IAAI,IAAI;MACzD8B,MAAM,IAAI,WAAWrB,MAAM,CAACF,QAAQ,IAAIE,MAAM,CAACT,IAAI,IAAI;MACvD8B,MAAM,IAAI,YAAYrB,MAAM,CAACD,GAAG,IAAIC,MAAM,CAACT,IAAI,IAAI;IACrD,CAAC,MAAM;MACL8B,MAAM,IAAI,WAAWrB,MAAM,CAACV,OAAO,EAAEkC,OAAO,CAAC,CAAC,CAAC,IAAIxB,MAAM,CAACT,IAAI,IAAI;MAClE,IAAIS,MAAM,CAACd,GAAG,KAAKuC,SAAS,EAAE;QAC5BJ,MAAM,IAAI,WAAWrB,MAAM,CAACd,GAAG,CAACsC,OAAO,CAAC,CAAC,CAAC,IAAIxB,MAAM,CAACT,IAAI,IAAI;QAC7D8B,MAAM,IAAI,WAAWrB,MAAM,CAACZ,GAAG,CAACoC,OAAO,CAAC,CAAC,CAAC,IAAIxB,MAAM,CAACT,IAAI,IAAI;MAC/D;MACA,IAAIS,MAAM,CAAChC,UAAU,EAAE;QACrBqD,MAAM,IAAI,WAAWrB,MAAM,CAAChC,UAAU,IAAI;MAC5C;IACF;EACF,CAAC,CAAC;EAEFqD,MAAM,IAAI,KAAK,GAAG,CAACC,MAAM,CAAC,EAAE,CAAC,IAAI;EACjCD,MAAM,IAAI,WAAW,IAAIjE,IAAI,CAAC,CAAC,CAACsE,cAAc,CAAC,CAAC,IAAI;EAEpD,OAAOL,MAAM;AACf","ignoreList":[]}