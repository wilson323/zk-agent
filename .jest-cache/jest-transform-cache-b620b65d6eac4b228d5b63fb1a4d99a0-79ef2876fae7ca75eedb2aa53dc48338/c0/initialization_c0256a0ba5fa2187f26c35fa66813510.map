{"version":3,"names":["cov_2pg2qgr5vf","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","exports","initializeDI","isDIInitialized","getDIInitializationStatus","require","events_1","container_1","config_1","DIInitializationStatus","DIInitializationManager","EventEmitter","constructor","status","PENDING","initializationPromise","getStatus","isInitialized","COMPLETED","initialize","force","performInitialization","updateStatus","INITIALIZING","emitProgress","configureServices","validateContainer","emit","console","log","error","FAILED","requiredServices","service","serviceSymbol","Symbol","for","container","isRegistered","Error","step","progress","diInitializer"],"sources":["E:\\zk-agent\\lib\\di\\initialization.ts"],"sourcesContent":["/**\r\n * @file 依赖注入系统初始化\r\n * @description 负责在应用启动时初始化依赖注入容器\r\n * @author ZK-Agent Team\r\n * @date 2024-12-20\r\n */\r\n\r\nimport 'reflect-metadata';\r\nimport { EventEmitter } from 'events';\r\nimport { container } from './container';\r\nimport { configureServices } from './config';\r\n\r\n/**\r\n * 依赖注入初始化状态\r\n */\r\nexport enum DIInitializationStatus {\r\n  PENDING = 'pending',\r\n  INITIALIZING = 'initializing',\r\n  COMPLETED = 'completed',\r\n  FAILED = 'failed'\r\n}\r\n\r\n/**\r\n * 依赖注入初始化事件\r\n */\r\nexport interface DIInitializationEvents {\r\n  'status-change': (status: DIInitializationStatus) => void;\r\n  'progress': (step: string, progress: number) => void;\r\n  'error': (error: Error) => void;\r\n  'completed': () => void;\r\n}\r\n\r\n/**\r\n * 依赖注入初始化管理器\r\n * \r\n * 该类负责管理依赖注入系统的初始化流程，包括：\r\n * - 注册基础服务\r\n * - 注册业务服务\r\n * - 验证容器状态\r\n */\r\nclass DIInitializationManager extends EventEmitter {\r\n  private status: DIInitializationStatus = DIInitializationStatus.PENDING;\r\n  private initializationPromise: Promise<void> | null = null;\r\n\r\n  /**\r\n   * 获取当前初始化状态\r\n   * @returns {DIInitializationStatus} 当前状态\r\n   */\r\n  getStatus(): DIInitializationStatus {\r\n    return this.status;\r\n  }\r\n\r\n  /**\r\n   * 检查是否已完成初始化\r\n   * @returns {boolean} 是否已完成\r\n   */\r\n  isInitialized(): boolean {\r\n    return this.status === DIInitializationStatus.COMPLETED;\r\n  }\r\n\r\n  /**\r\n   * 执行依赖注入系统初始化\r\n   * @param {boolean} force - 是否强制重新初始化\r\n   * @returns {Promise<void>}\r\n   */\r\n  async initialize(force: boolean = false): Promise<void> {\r\n    // 如果已经在初始化中且不是强制初始化，返回现有的Promise\r\n    if (this.initializationPromise && !force) {\r\n      return this.initializationPromise;\r\n    }\r\n\r\n    // 如果已经完成且不是强制初始化，直接返回\r\n    if (this.status === DIInitializationStatus.COMPLETED && !force) {\r\n      return;\r\n    }\r\n\r\n    this.initializationPromise = this.performInitialization();\r\n    return this.initializationPromise;\r\n  }\r\n\r\n  /**\r\n   * 执行实际的初始化流程\r\n   * @returns {Promise<void>}\r\n   */\r\n  private async performInitialization(): Promise<void> {\r\n    try {\r\n      this.updateStatus(DIInitializationStatus.INITIALIZING);\r\n      this.emitProgress('开始依赖注入系统初始化', 0);\r\n\r\n      // 步骤1: 配置服务\r\n      this.configureServices();\r\n      this.emitProgress('服务配置完成', 50);\r\n\r\n      // 步骤2: 验证容器状态\r\n      this.validateContainer();\r\n      this.emitProgress('容器状态验证完成', 100);\r\n\r\n      this.updateStatus(DIInitializationStatus.COMPLETED);\r\n      this.emit('completed');\r\n\r\n      console.log('依赖注入系统初始化完成');\r\n    } catch (error) {\r\n      console.error('依赖注入系统初始化失败:', error);\r\n      this.emit('error', error as Error);\r\n      this.updateStatus(DIInitializationStatus.FAILED);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 配置服务\r\n   */\r\n  private configureServices(): void {\r\n    try {\r\n      // 调用配置服务函数\r\n      configureServices();\r\n      console.log('依赖注入服务配置成功');\r\n    } catch (error) {\r\n      console.error('依赖注入服务配置失败:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 验证容器状态\r\n   */\r\n  private validateContainer(): void {\r\n    try {\r\n      // 验证基础服务是否已注册\r\n      const requiredServices = [\r\n        'PrismaClient',\r\n        'Logger',\r\n        'Config'\r\n      ];\r\n\r\n      for (const service of requiredServices) {\r\n        const serviceSymbol = Symbol.for(service);\r\n        if (!container.isRegistered(serviceSymbol)) {\r\n          throw new Error(`必需的服务 ${service} 未注册`); \r\n        }\r\n      }\r\n\r\n      console.log('依赖注入容器状态验证成功');\r\n    } catch (error) {\r\n      console.error('依赖注入容器状态验证失败:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新初始化状态\r\n   * @param {DIInitializationStatus} status - 新状态\r\n   */\r\n  private updateStatus(status: DIInitializationStatus): void {\r\n    this.status = status;\r\n    this.emit('status-change', status);\r\n  }\r\n\r\n  /**\r\n   * 发送进度事件\r\n   * @param {string} step - 当前步骤描述\r\n   * @param {number} progress - 进度百分比 (0-100)\r\n   */\r\n  private emitProgress(step: string, progress: number): void {\r\n    this.emit('progress', step, progress);\r\n  }\r\n}\r\n\r\n// 创建全局初始化管理器实例\r\nexport const diInitializer = new DIInitializationManager();\r\n\r\n/**\r\n * 初始化依赖注入系统的便捷函数\r\n * @param {boolean} force - 是否强制重新初始化\r\n * @returns {Promise<void>}\r\n */\r\nexport async function initializeDI(force: boolean = false): Promise<void> {\r\n  return diInitializer.initialize(force);\r\n}\r\n\r\n/**\r\n * 检查依赖注入系统是否已初始化\r\n * @returns {boolean} 是否已初始化\r\n */\r\nexport function isDIInitialized(): boolean {\r\n  return diInitializer.isInitialized();\r\n}\r\n\r\n/**\r\n * 获取依赖注入初始化状态\r\n * @returns {DIInitializationStatus} 当前状态\r\n */\r\nexport function getDIInitializationStatus(): DIInitializationStatus {\r\n  return diInitializer.getStatus();\r\n}\r\n"],"mappings":";;AAAA;;;;;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF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","ignoreList":[]}