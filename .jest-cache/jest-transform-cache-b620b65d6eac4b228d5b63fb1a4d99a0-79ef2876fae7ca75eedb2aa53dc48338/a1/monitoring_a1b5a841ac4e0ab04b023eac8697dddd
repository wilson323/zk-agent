a8646abccf5a14d963544d9e50422014
"use strict";
/**
 * @file Database Connection Monitoring
 * @description 数据库连接监控和指标收集工具
 * @author ZK-Agent Team
 * @date 2024-12-19
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.getDatabasePerformanceStats = exports.getDatabaseAlerts = exports.getDatabaseMetrics = exports.stopDatabaseMonitoring = exports.startDatabaseMonitoring = exports.PerformanceMonitorEnhancer = exports.CacheStrategyOptimizer = exports.IntelligentCacheManager = exports.QueryPerformanceOptimizer = exports.DynamicPoolAdjuster = exports.ConnectionPoolAnalyzer = exports.PerformanceOptimizationCoordinator = exports.databaseMonitor = exports.DatabaseMonitor = exports.AlertLevel = void 0;
const enhanced_connection_1 = require("./enhanced-connection");
const events_1 = require("events");
const performance_optimization_coordinator_1 = require("./performance-optimization-coordinator");
Object.defineProperty(exports, "PerformanceOptimizationCoordinator", { enumerable: true, get: function () { return performance_optimization_coordinator_1.PerformanceOptimizationCoordinator; } });
const connection_pool_analyzer_1 = require("./connection-pool-analyzer");
Object.defineProperty(exports, "ConnectionPoolAnalyzer", { enumerable: true, get: function () { return connection_pool_analyzer_1.ConnectionPoolAnalyzer; } });
const dynamic_pool_adjuster_1 = require("./dynamic-pool-adjuster");
Object.defineProperty(exports, "DynamicPoolAdjuster", { enumerable: true, get: function () { return dynamic_pool_adjuster_1.DynamicPoolAdjuster; } });
const query_performance_optimizer_1 = require("./query-performance-optimizer");
Object.defineProperty(exports, "QueryPerformanceOptimizer", { enumerable: true, get: function () { return query_performance_optimizer_1.QueryPerformanceOptimizer; } });
const intelligent_cache_manager_1 = require("./intelligent-cache-manager");
Object.defineProperty(exports, "IntelligentCacheManager", { enumerable: true, get: function () { return intelligent_cache_manager_1.IntelligentCacheManager; } });
const cache_strategy_optimizer_1 = require("./cache-strategy-optimizer");
Object.defineProperty(exports, "CacheStrategyOptimizer", { enumerable: true, get: function () { return cache_strategy_optimizer_1.CacheStrategyOptimizer; } });
const performance_monitor_enhancer_1 = require("./performance-monitor-enhancer");
Object.defineProperty(exports, "PerformanceMonitorEnhancer", { enumerable: true, get: function () { return performance_monitor_enhancer_1.PerformanceMonitorEnhancer; } });
// 告警级别
var AlertLevel;
(function (AlertLevel) {
    AlertLevel["INFO"] = "info";
    AlertLevel["WARNING"] = "warning";
    AlertLevel["ERROR"] = "error";
    AlertLevel["CRITICAL"] = "critical";
})(AlertLevel || (exports.AlertLevel = AlertLevel = {}));
/**
 * 数据库监控器
 */
class DatabaseMonitor extends events_1.EventEmitter {
    constructor(thresholds, intervalMs = 30000, maxHistorySize = 100) {
        super();
        this.isMonitoring = false;
        this.monitoringInterval = null;
        this.metricsHistory = [];
        this.alerts = [];
        this.lastCpuUsage = null;
        // 默认性能阈值
        this.thresholds = {
            maxLatency: parseInt(process.env.DB_MAX_LATENCY || '1000'),
            maxFailureRate: parseFloat(process.env.DB_MAX_FAILURE_RATE || '5'),
            maxReconnectAttempts: parseInt(process.env.DB_MAX_RECONNECT_ATTEMPTS || '5'),
            minUptime: parseInt(process.env.DB_MIN_UPTIME || '60000'),
            ...thresholds
        };
        this.intervalMs = intervalMs;
        this.maxHistorySize = maxHistorySize;
        // 初始化性能优化组件
        this.initializeOptimizationComponents();
        // 监听数据库事件
        this.setupDatabaseEventListeners();
    }
    /**
     * 初始化性能优化组件
     */
    initializeOptimizationComponents() {
        try {
            // 初始化连接池分析器
            this.poolAnalyzer = new connection_pool_analyzer_1.ConnectionPoolAnalyzer({
                analysisInterval: 60000, // 1分钟分析一次
                historySize: 100,
                enableRealtimeMonitoring: true
            });
            // 初始化动态连接池调整器
            this.dynamicAdjuster = new dynamic_pool_adjuster_1.DynamicPoolAdjuster({
                adjustmentInterval: 120000, // 2分钟调整一次
                cooldownPeriod: 300000, // 5分钟冷却期
                enablePredictiveAdjustment: true,
                maxAdjustmentPercentage: 20
            });
            // 初始化查询性能优化器
            this.queryOptimizer = new query_performance_optimizer_1.QueryPerformanceOptimizer({
                slowQueryThreshold: 1000, // 1秒
                enableQueryCache: true,
                cacheSize: 1000,
                enableOptimizationSuggestions: true
            });
            // 初始化智能缓存管理器
            this.cacheManager = new intelligent_cache_manager_1.IntelligentCacheManager({
                l1Config: {
                    maxSize: 1000,
                    ttl: 300000 // 5分钟
                },
                l2Config: {
                    host: process.env.REDIS_HOST || 'localhost',
                    port: parseInt(process.env.REDIS_PORT || '6379'),
                    ttl: 3600000 // 1小时
                },
                enablePrewarming: true,
                enableDistributedConsistency: true
            });
            // 初始化缓存策略优化器
            this.cacheOptimizer = new cache_strategy_optimizer_1.CacheStrategyOptimizer({
                optimizationInterval: 300000, // 5分钟
                enableABTesting: true,
                enableMLOptimization: true,
                strategyEvaluationPeriod: 3600000 // 1小时
            });
            // 初始化性能监控增强器
            this.monitorEnhancer = new performance_monitor_enhancer_1.PerformanceMonitorEnhancer({
                metricsCollectionInterval: 30000, // 30秒
                anomalyDetectionEnabled: true,
                trendAnalysisEnabled: true,
                autoOptimizationEnabled: true
            });
            // 初始化性能优化协调器
            this.optimizationCoordinator = new performance_optimization_coordinator_1.PerformanceOptimizationCoordinator({
                healthCheckInterval: 60000, // 1分钟
                optimizationEvaluationInterval: 300000, // 5分钟
                enableAutoOptimization: true,
                maxConcurrentOptimizations: 3
            });
            // 注册组件到协调器
            this.optimizationCoordinator.registerComponent('poolAnalyzer', this.poolAnalyzer);
            this.optimizationCoordinator.registerComponent('dynamicAdjuster', this.dynamicAdjuster);
            this.optimizationCoordinator.registerComponent('queryOptimizer', this.queryOptimizer);
            this.optimizationCoordinator.registerComponent('cacheManager', this.cacheManager);
            this.optimizationCoordinator.registerComponent('cacheOptimizer', this.cacheOptimizer);
            this.optimizationCoordinator.registerComponent('monitorEnhancer', this.monitorEnhancer);
            // 设置组件间的事件监听
            this.setupOptimizationEventListeners();
            console.log('Performance optimization components initialized successfully');
        }
        catch (error) {
            console.error('Failed to initialize optimization components:', error);
            this.createAlert(AlertLevel.ERROR, `性能优化组件初始化失败: ${error}`);
        }
    }
    /**
     * 设置优化组件事件监听器
     */
    setupOptimizationEventListeners() {
        // 监听连接池分析完成事件
        this.poolAnalyzer.on('analysisComplete', (analysis) => {
            this.emit('poolAnalysis', analysis);
            // 触发动态调整器评估
            this.dynamicAdjuster.triggerImmediateAdjustment();
        });
        // 监听动态调整完成事件
        this.dynamicAdjuster.on('adjustmentComplete', (result) => {
            this.emit('poolAdjustment', result);
            this.createAlert(AlertLevel.INFO, `连接池动态调整完成: ${result.description}`);
        });
        // 监听查询优化事件
        this.queryOptimizer.on('slowQueryDetected', (query) => {
            this.createAlert(AlertLevel.WARNING, `检测到慢查询: ${query.template} (${query.executionTime}ms)`);
        });
        this.queryOptimizer.on('optimizationSuggestion', (suggestion) => {
            this.emit('optimizationSuggestion', suggestion);
        });
        // 监听缓存事件
        this.cacheManager.on('cacheHit', (key, level) => {
            this.emit('cacheHit', { key, level });
        });
        this.cacheManager.on('cacheMiss', (key) => {
            this.emit('cacheMiss', { key });
        });
        // 监听缓存策略优化事件
        this.cacheOptimizer.on('strategyOptimized', (result) => {
            this.emit('cacheStrategyOptimized', result);
            this.createAlert(AlertLevel.INFO, `缓存策略优化完成: ${result.description}`);
        });
        // 监听性能监控增强器事件
        this.monitorEnhancer.on('anomalyDetected', (anomaly) => {
            this.createAlert(AlertLevel.WARNING, `性能异常检测: ${anomaly.description}`);
        });
        this.monitorEnhancer.on('optimizationRecommendation', (recommendation) => {
            this.emit('optimizationRecommendation', recommendation);
        });
        // 监听协调器事件
        this.optimizationCoordinator.on('optimizationComplete', (result) => {
            this.emit('coordinatedOptimization', result);
            this.createAlert(AlertLevel.INFO, `协调优化完成: ${result.description}`);
        });
        this.optimizationCoordinator.on('criticalAlert', (alert) => {
            this.createAlert(AlertLevel.CRITICAL, `关键性能告警: ${alert.message}`);
        });
    }
    /**
     * 设置数据库事件监听器
     */
    setupDatabaseEventListeners() {
        enhancedDatabaseManager.getPrismaClient().on('connected', () => {
            this.createAlert(AlertLevel.INFO, '数据库连接成功建立');
        });
        enhancedDatabaseManager.getPrismaClient().on('disconnected', (error) => {
            const message = error ? `数据库连接断开: ${error.message}` : '数据库连接断开';
            this.createAlert(AlertLevel.WARNING, message);
        });
        enhancedDatabaseManager.getPrismaClient().on('reconnecting', (attempt) => {
            this.createAlert(AlertLevel.WARNING, `数据库重连中 (第${attempt}次尝试)`);
        });
        enhancedDatabaseManager.getPrismaClient().on('reconnected', () => {
            this.createAlert(AlertLevel.INFO, '数据库重连成功');
        });
        enhancedDatabaseManager.getPrismaClient().on('error', (error) => {
            this.createAlert(AlertLevel.ERROR, `数据库错误: ${error.message}`);
        });
        enhancedDatabaseManager.getPrismaClient().on('healthCheck', (healthy) => {
            if (!healthy) {
                this.createAlert(AlertLevel.WARNING, '数据库健康检查失败');
            }
        });
    }
    /**
     * 开始监控
     */
    startMonitoring() {
        if (this.isMonitoring) {
            console.log('Database monitoring is already running');
            return;
        }
        console.log(`Starting database monitoring (interval: ${this.intervalMs}ms)`);
        this.isMonitoring = true;
        this.lastCpuUsage = process.cpuUsage();
        // 启动所有性能优化组件
        this.startOptimizationComponents();
        this.monitoringInterval = setInterval(() => {
            this.collectMetrics();
        }, this.intervalMs);
        // 立即收集一次指标
        this.collectMetrics();
    }
    /**
     * 停止监控
     */
    stopMonitoring() {
        if (!this.isMonitoring) {
            return;
        }
        console.log('Stopping database monitoring');
        this.isMonitoring = false;
        // 停止所有性能优化组件
        this.stopOptimizationComponents();
        if (this.monitoringInterval) {
            clearInterval(this.monitoringInterval);
            this.monitoringInterval = null;
        }
    }
    /**
     * 启动所有性能优化组件
     */
    startOptimizationComponents() {
        try {
            console.log('Starting performance optimization components...');
            // 启动协调器（会自动启动所有注册的组件）
            this.optimizationCoordinator.start();
            console.log('All performance optimization components started successfully');
        }
        catch (error) {
            console.error('Failed to start optimization components:', error);
            this.createAlert(AlertLevel.ERROR, `性能优化组件启动失败: ${error}`);
        }
    }
    /**
     * 停止所有性能优化组件
     */
    stopOptimizationComponents() {
        try {
            console.log('Stopping performance optimization components...');
            // 停止协调器（会自动停止所有注册的组件）
            this.optimizationCoordinator.stop();
            console.log('All performance optimization components stopped successfully');
        }
        catch (error) {
            console.error('Failed to stop optimization components:', error);
            this.createAlert(AlertLevel.ERROR, `性能优化组件停止失败: ${error}`);
        }
    }
    /**
     * 获取性能优化状态
     */
    getOptimizationStatus() {
        return {
            coordinator: this.optimizationCoordinator?.getStatus() || null,
            poolAnalyzer: this.poolAnalyzer?.getStatus() || null,
            dynamicAdjuster: this.dynamicAdjuster?.getStatus() || null,
            queryOptimizer: this.queryOptimizer?.getStatus() || null,
            cacheManager: this.cacheManager?.getStatus() || null,
            cacheOptimizer: this.cacheOptimizer?.getStatus() || null,
            monitorEnhancer: this.monitorEnhancer?.getStatus() || null
        };
    }
    /**
     * 手动触发性能优化
     */
    triggerOptimization(strategy) {
        try {
            if (strategy) {
                this.optimizationCoordinator.executeStrategy(strategy);
            }
            else {
                this.optimizationCoordinator.triggerOptimizationEvaluation();
            }
            this.createAlert(AlertLevel.INFO, `手动触发性能优化${strategy ? `: ${strategy}` : ''}`);
        }
        catch (error) {
            console.error('Failed to trigger optimization:', error);
            this.createAlert(AlertLevel.ERROR, `手动优化触发失败: ${error}`);
        }
    }
    /**
     * 获取优化建议
     */
    getOptimizationRecommendations() {
        const recommendations = [];
        try {
            // 从各个组件收集优化建议
            if (this.poolAnalyzer) {
                const poolRecommendations = this.poolAnalyzer.generateOptimizationRecommendations();
                recommendations.push(...poolRecommendations);
            }
            if (this.queryOptimizer) {
                const queryRecommendations = this.queryOptimizer.getOptimizationSuggestions();
                recommendations.push(...queryRecommendations);
            }
            if (this.cacheOptimizer) {
                const cacheRecommendations = this.cacheOptimizer.generateOptimizationRecommendations();
                recommendations.push(...cacheRecommendations);
            }
            if (this.monitorEnhancer) {
                const monitorRecommendations = this.monitorEnhancer.generateOptimizationRecommendations();
                recommendations.push(...monitorRecommendations);
            }
        }
        catch (error) {
            console.error('Failed to get optimization recommendations:', error);
        }
        return recommendations;
    }
    /**
     * 收集指标
     */
    collectMetrics() {
        try {
            const stats = enhancedDatabaseManager.getPrismaClient().getStats();
            const memUsage = process.memoryUsage();
            const cpuUsage = process.cpuUsage(this.lastCpuUsage || undefined);
            this.lastCpuUsage = process.cpuUsage();
            const metrics = {
                timestamp: new Date(),
                connectionState: stats.state,
                uptime: stats.uptime,
                totalQueries: stats.totalQueries,
                failedQueries: stats.failedQueries,
                successRate: stats.totalQueries > 0
                    ? ((stats.totalQueries - stats.failedQueries) / stats.totalQueries) * 100
                    : 100,
                avgLatency: stats.avgLatency,
                reconnectAttempts: stats.reconnectAttempts,
                memoryUsage: {
                    rss: memUsage.rss,
                    heapUsed: memUsage.heapUsed,
                    heapTotal: memUsage.heapTotal,
                    external: memUsage.external
                },
                cpuUsage: {
                    user: cpuUsage.user / 1000, // 转换为毫秒
                    system: cpuUsage.system / 1000
                }
            };
            // 添加到历史记录
            this.addMetricsToHistory(metrics);
            // 检查性能阈值
            this.checkPerformanceThresholds(metrics);
            // 触发指标收集事件
            this.emit('metrics', metrics);
        }
        catch (error) {
            console.error('Failed to collect database metrics:', error);
            this.createAlert(AlertLevel.ERROR, `指标收集失败: ${error}`);
        }
    }
    /**
     * 添加指标到历史记录
     */
    addMetricsToHistory(metrics) {
        this.metricsHistory.push(metrics);
        // 限制历史记录大小
        if (this.metricsHistory.length > this.maxHistorySize) {
            this.metricsHistory = this.metricsHistory.slice(-this.maxHistorySize);
        }
    }
    /**
     * 检查性能阈值
     */
    checkPerformanceThresholds(metrics) {
        // 检查延迟
        if (metrics.avgLatency > this.thresholds.maxLatency) {
            this.createAlert(AlertLevel.WARNING, `数据库平均延迟过高: ${metrics.avgLatency.toFixed(2)}ms (阈值: ${this.thresholds.maxLatency}ms)`, metrics, { threshold: this.thresholds.maxLatency, actual: metrics.avgLatency });
        }
        // 检查失败率
        if (metrics.successRate < (100 - this.thresholds.maxFailureRate)) {
            this.createAlert(AlertLevel.ERROR, `数据库查询失败率过高: ${(100 - metrics.successRate).toFixed(2)}% (阈值: ${this.thresholds.maxFailureRate}%)`, metrics, { threshold: this.thresholds.maxFailureRate, actual: 100 - metrics.successRate });
        }
        // 检查重连次数
        if (metrics.reconnectAttempts > this.thresholds.maxReconnectAttempts) {
            this.createAlert(AlertLevel.CRITICAL, `数据库重连次数过多: ${metrics.reconnectAttempts} (阈值: ${this.thresholds.maxReconnectAttempts})`, metrics, { threshold: this.thresholds.maxReconnectAttempts, actual: metrics.reconnectAttempts });
        }
        // 检查运行时间（如果连接状态为已连接但运行时间过短）
        if (metrics.connectionState === enhanced_connection_1.ConnectionState.CONNECTED &&
            metrics.uptime < this.thresholds.minUptime) {
            this.createAlert(AlertLevel.WARNING, `数据库连接运行时间过短: ${(metrics.uptime / 1000).toFixed(2)}s (阈值: ${this.thresholds.minUptime / 1000}s)`, metrics, { threshold: this.thresholds.minUptime, actual: metrics.uptime });
        }
        // 检查连接状态
        if (metrics.connectionState === enhanced_connection_1.ConnectionState.FAILED ||
            metrics.connectionState === enhanced_connection_1.ConnectionState.DISCONNECTED) {
            this.createAlert(AlertLevel.CRITICAL, `数据库连接状态异常: ${metrics.connectionState}`, metrics);
        }
    }
    /**
     * 创建告警
     */
    createAlert(level, message, metrics, threshold) {
        const alert = {
            level,
            message,
            timestamp: new Date(),
            metrics: metrics || this.getCurrentMetrics(),
            threshold
        };
        this.alerts.push(alert);
        // 限制告警历史大小
        if (this.alerts.length > 1000) {
            this.alerts = this.alerts.slice(-1000);
        }
        // 触发告警事件
        this.emit('alert', alert);
        // 根据级别输出日志
        switch (level) {
            case AlertLevel.INFO:
                console.info(`[DB Monitor] ${message}`);
                break;
            case AlertLevel.WARNING:
                console.warn(`[DB Monitor] ${message}`);
                break;
            case AlertLevel.ERROR:
                console.error(`[DB Monitor] ${message}`);
                break;
            case AlertLevel.CRITICAL:
                console.error(`[DB Monitor] CRITICAL: ${message}`);
                break;
        }
    }
    /**
     * 获取当前指标
     */
    getCurrentMetrics() {
        const stats = enhancedDatabaseManager.getPrismaClient().getStats();
        const memUsage = process.memoryUsage();
        const cpuUsage = process.cpuUsage();
        return {
            timestamp: new Date(),
            connectionState: stats.state,
            uptime: stats.uptime,
            totalQueries: stats.totalQueries,
            failedQueries: stats.failedQueries,
            successRate: stats.totalQueries > 0
                ? ((stats.totalQueries - stats.failedQueries) / stats.totalQueries) * 100
                : 100,
            avgLatency: stats.avgLatency,
            reconnectAttempts: stats.reconnectAttempts,
            memoryUsage: {
                rss: memUsage.rss,
                heapUsed: memUsage.heapUsed,
                heapTotal: memUsage.heapTotal,
                external: memUsage.external
            },
            cpuUsage: {
                user: cpuUsage.user / 1000,
                system: cpuUsage.system / 1000
            }
        };
    }
    /**
     * 获取指标历史
     */
    getMetricsHistory(limit) {
        if (limit) {
            return this.metricsHistory.slice(-limit);
        }
        return [...this.metricsHistory];
    }
    /**
     * 获取告警历史
     */
    getAlerts(level, limit) {
        let alerts = level
            ? this.alerts.filter(alert => alert.level === level)
            : [...this.alerts];
        if (limit) {
            alerts = alerts.slice(-limit);
        }
        return alerts;
    }
    /**
     * 获取性能统计
     */
    getPerformanceStats(timeRangeMs) {
        let metrics = this.metricsHistory;
        // 如果指定了时间范围，过滤指标
        if (timeRangeMs) {
            const cutoffTime = new Date(Date.now() - timeRangeMs);
            metrics = metrics.filter(m => m.timestamp >= cutoffTime);
        }
        if (metrics.length === 0) {
            return {
                avgLatency: 0,
                maxLatency: 0,
                minLatency: 0,
                successRate: 100,
                totalQueries: 0,
                failedQueries: 0,
                uptimePercentage: 0
            };
        }
        const latencies = metrics.map(m => m.avgLatency).filter(l => l > 0);
        const totalQueries = metrics[metrics.length - 1].totalQueries - (metrics[0].totalQueries || 0);
        const failedQueries = metrics[metrics.length - 1].failedQueries - (metrics[0].failedQueries || 0);
        const connectedMetrics = metrics.filter(m => m.connectionState === enhanced_connection_1.ConnectionState.CONNECTED);
        return {
            avgLatency: latencies.length > 0 ? latencies.reduce((a, b) => a + b, 0) / latencies.length : 0,
            maxLatency: latencies.length > 0 ? Math.max(...latencies) : 0,
            minLatency: latencies.length > 0 ? Math.min(...latencies) : 0,
            successRate: totalQueries > 0 ? ((totalQueries - failedQueries) / totalQueries) * 100 : 100,
            totalQueries,
            failedQueries,
            uptimePercentage: (connectedMetrics.length / metrics.length) * 100
        };
    }
    /**
     * 更新性能阈值
     */
    updateThresholds(thresholds) {
        this.thresholds = { ...this.thresholds, ...thresholds };
        console.log('Database monitoring thresholds updated:', this.thresholds);
    }
    /**
     * 清除历史数据
     */
    clearHistory() {
        this.metricsHistory = [];
        this.alerts = [];
        console.log('Database monitoring history cleared');
    }
    /**
     * 获取监控状态
     */
    getMonitoringStatus() {
        return {
            isMonitoring: this.isMonitoring,
            intervalMs: this.intervalMs,
            metricsCount: this.metricsHistory.length,
            alertsCount: this.alerts.length,
            thresholds: this.thresholds
        };
    }
    /**
     * 导出监控数据
     */
    exportData() {
        return {
            metrics: this.getMetricsHistory(),
            alerts: this.getAlerts(),
            thresholds: this.thresholds,
            exportedAt: new Date()
        };
    }
}
exports.DatabaseMonitor = DatabaseMonitor;
// 创建全局监控实例
exports.databaseMonitor = new DatabaseMonitor();
// 如果启用了监控，自动开始监控
if (process.env.DB_MONITORING_ENABLED === 'true') {
    exports.databaseMonitor.startMonitoring();
    // 监听告警事件
    exports.databaseMonitor.on('alert', (alert) => {
        // 这里可以集成外部告警系统，如邮件、Slack、钉钉等
        if (alert.level === AlertLevel.CRITICAL) {
            console.error('CRITICAL DATABASE ALERT:', alert.message);
            // 可以在这里发送紧急通知
        }
    });
    // 监听指标事件
    exports.databaseMonitor.on('metrics', (metrics) => {
        // 这里可以将指标发送到外部监控系统，如Prometheus、InfluxDB等
        if (process.env.DB_METRICS_COLLECTION === 'true') {
            // 发送指标到外部系统
        }
    });
}
// 导出便捷函数
const startDatabaseMonitoring = () => exports.databaseMonitor.startMonitoring();
exports.startDatabaseMonitoring = startDatabaseMonitoring;
const stopDatabaseMonitoring = () => exports.databaseMonitor.stopMonitoring();
exports.stopDatabaseMonitoring = stopDatabaseMonitoring;
const getDatabaseMetrics = () => exports.databaseMonitor.getMetricsHistory(1)[0];
exports.getDatabaseMetrics = getDatabaseMetrics;
const getDatabaseAlerts = (level) => exports.databaseMonitor.getAlerts(level);
exports.getDatabaseAlerts = getDatabaseAlerts;
const getDatabasePerformanceStats = (timeRangeMs) => exports.databaseMonitor.getPerformanceStats(timeRangeMs);
exports.getDatabasePerformanceStats = getDatabasePerformanceStats;
// 默认导出监控器
exports.default = exports.databaseMonitor;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QTtBQUE1RSxRQUFBLGlCQUFpQixxQkFBMkQ7QUFDbEYsTUFBTSwyQkFBMkIsR0FBRyxDQUFDLFdBQW9CLEVBQUUsRUFBRSxDQUNsRSx1QkFBZSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQyxDQUFBO0FBRHJDLFFBQUEsMkJBQTJCLCtCQUNVO0FBRWxELFVBQVU7QUFDVixrQkFBZSx1QkFBZSxDQUFBIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkU6XFx6ay1hZ2VudFxcbGliXFxkYXRhYmFzZVxcbW9uaXRvcmluZy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQGZpbGUgRGF0YWJhc2UgQ29ubmVjdGlvbiBNb25pdG9yaW5nXHJcbiAqIEBkZXNjcmlwdGlvbiDmlbDmja7lupPov57mjqXnm5HmjqflkozmjIfmoIfmlLbpm4blt6XlhbdcclxuICogQGF1dGhvciBaSy1BZ2VudCBUZWFtXHJcbiAqIEBkYXRlIDIwMjQtMTItMTlcclxuICovXHJcblxyXG5pbXBvcnQgeyBlbmhhbmNlZERiIH0gZnJvbSAnLi9lbmhhbmNlZC1jb25uZWN0aW9uJztcclxuaW1wb3J0IHsgQ29ubmVjdGlvblN0YXRlIH0gZnJvbSAnLi9lbmhhbmNlZC1jb25uZWN0aW9uJ1xyXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xyXG5pbXBvcnQgeyBQZXJmb3JtYW5jZU9wdGltaXphdGlvbkNvb3JkaW5hdG9yIH0gZnJvbSAnLi9wZXJmb3JtYW5jZS1vcHRpbWl6YXRpb24tY29vcmRpbmF0b3InO1xyXG5pbXBvcnQgeyBDb25uZWN0aW9uUG9vbEFuYWx5emVyIH0gZnJvbSAnLi9jb25uZWN0aW9uLXBvb2wtYW5hbHl6ZXInO1xyXG5pbXBvcnQgeyBEeW5hbWljUG9vbEFkanVzdGVyIH0gZnJvbSAnLi9keW5hbWljLXBvb2wtYWRqdXN0ZXInO1xyXG5pbXBvcnQgeyBRdWVyeVBlcmZvcm1hbmNlT3B0aW1pemVyIH0gZnJvbSAnLi9xdWVyeS1wZXJmb3JtYW5jZS1vcHRpbWl6ZXInO1xyXG5pbXBvcnQgeyBJbnRlbGxpZ2VudENhY2hlTWFuYWdlciB9IGZyb20gJy4vaW50ZWxsaWdlbnQtY2FjaGUtbWFuYWdlcic7XHJcbmltcG9ydCB7IENhY2hlU3RyYXRlZ3lPcHRpbWl6ZXIgfSBmcm9tICcuL2NhY2hlLXN0cmF0ZWd5LW9wdGltaXplcic7XHJcbmltcG9ydCB7IFBlcmZvcm1hbmNlTW9uaXRvckVuaGFuY2VyIH0gZnJvbSAnLi9wZXJmb3JtYW5jZS1tb25pdG9yLWVuaGFuY2VyJztcclxuXHJcbi8vIOebkeaOp+aMh+agh+aOpeWPo1xyXG5leHBvcnQgaW50ZXJmYWNlIERhdGFiYXNlTWV0cmljcyB7XHJcbiAgdGltZXN0YW1wOiBEYXRlXHJcbiAgY29ubmVjdGlvblN0YXRlOiBDb25uZWN0aW9uU3RhdGVcclxuICB1cHRpbWU6IG51bWJlclxyXG4gIHRvdGFsUXVlcmllczogbnVtYmVyXHJcbiAgZmFpbGVkUXVlcmllczogbnVtYmVyXHJcbiAgc3VjY2Vzc1JhdGU6IG51bWJlclxyXG4gIGF2Z0xhdGVuY3k6IG51bWJlclxyXG4gIHJlY29ubmVjdEF0dGVtcHRzOiBudW1iZXJcclxuICAvLyDov57mjqXmsaDnm7jlhbPmjIfmoIdcclxuICBhY3RpdmVDb25uZWN0aW9ucz86IG51bWJlclxyXG4gIGlkbGVDb25uZWN0aW9ucz86IG51bWJlclxyXG4gIHdhaXRpbmdSZXF1ZXN0cz86IG51bWJlclxyXG4gIGNvbm5lY3Rpb25DcmVhdGlvbnM/OiBudW1iZXJcclxuICBjb25uZWN0aW9uRGVzdHJ1Y3Rpb25zPzogbnVtYmVyXHJcbiAgbWVtb3J5VXNhZ2U6IHtcclxuICAgIHJzczogbnVtYmVyXHJcbiAgICBoZWFwVXNlZDogbnVtYmVyXHJcbiAgICBoZWFwVG90YWw6IG51bWJlclxyXG4gICAgZXh0ZXJuYWw6IG51bWJlclxyXG4gIH1cclxuICBjcHVVc2FnZToge1xyXG4gICAgdXNlcjogbnVtYmVyXHJcbiAgICBzeXN0ZW06IG51bWJlclxyXG4gIH1cclxufVxyXG5cclxuLy8g5oCn6IO96ZiI5YC86YWN572uXHJcbmV4cG9ydCBpbnRlcmZhY2UgUGVyZm9ybWFuY2VUaHJlc2hvbGRzIHtcclxuICBtYXhMYXRlbmN5OiBudW1iZXIgLy8g5pyA5aSn5bu26L+f77yI5q+r56eS77yJXHJcbiAgbWF4RmFpbHVyZVJhdGU6IG51bWJlciAvLyDmnIDlpKflpLHotKXnjofvvIjnmb7liIbmr5TvvIlcclxuICBtYXhSZWNvbm5lY3RBdHRlbXB0czogbnVtYmVyIC8vIOacgOWkp+mHjei/nuWwneivleasoeaVsFxyXG4gIG1pblVwdGltZTogbnVtYmVyIC8vIOacgOWwj+i/kOihjOaXtumXtO+8iOavq+enku+8iVxyXG59XHJcblxyXG4vLyDlkYrorabnuqfliKtcclxuZXhwb3J0IGVudW0gQWxlcnRMZXZlbCB7XHJcbiAgSU5GTyA9ICdpbmZvJyxcclxuICBXQVJOSU5HID0gJ3dhcm5pbmcnLFxyXG4gIEVSUk9SID0gJ2Vycm9yJyxcclxuICBDUklUSUNBTCA9ICdjcml0aWNhbCdcclxufVxyXG5cclxuLy8g5ZGK6K2m5L+h5oGvXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWxlcnQge1xyXG4gIGxldmVsOiBBbGVydExldmVsXHJcbiAgbWVzc2FnZTogc3RyaW5nXHJcbiAgdGltZXN0YW1wOiBEYXRlXHJcbiAgbWV0cmljczogRGF0YWJhc2VNZXRyaWNzXHJcbiAgdGhyZXNob2xkPzogYW55XHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmlbDmja7lupPnm5HmjqflmahcclxuICovXHJcbmV4cG9ydCBjbGFzcyBEYXRhYmFzZU1vbml0b3IgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xyXG4gIHByaXZhdGUgaXNNb25pdG9yaW5nOiBib29sZWFuID0gZmFsc2VcclxuICBwcml2YXRlIG1vbml0b3JpbmdJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbFxyXG4gIHByaXZhdGUgbWV0cmljc0hpc3Rvcnk6IERhdGFiYXNlTWV0cmljc1tdID0gW11cclxuICBwcml2YXRlIGFsZXJ0czogQWxlcnRbXSA9IFtdXHJcbiAgcHJpdmF0ZSB0aHJlc2hvbGRzOiBQZXJmb3JtYW5jZVRocmVzaG9sZHNcclxuICBwcml2YXRlIGludGVydmFsTXM6IG51bWJlclxyXG4gIHByaXZhdGUgbWF4SGlzdG9yeVNpemU6IG51bWJlclxyXG4gIHByaXZhdGUgbGFzdENwdVVzYWdlOiBOb2RlSlMuQ3B1VXNhZ2UgfCBudWxsID0gbnVsbFxyXG4gIFxyXG4gIC8vIOaAp+iDveS8mOWMlue7hOS7tlxyXG4gIHByaXZhdGUgb3B0aW1pemF0aW9uQ29vcmRpbmF0b3I6IFBlcmZvcm1hbmNlT3B0aW1pemF0aW9uQ29vcmRpbmF0b3JcclxuICBwcml2YXRlIHBvb2xBbmFseXplcjogQ29ubmVjdGlvblBvb2xBbmFseXplclxyXG4gIHByaXZhdGUgZHluYW1pY0FkanVzdGVyOiBEeW5hbWljUG9vbEFkanVzdGVyXHJcbiAgcHJpdmF0ZSBxdWVyeU9wdGltaXplcjogUXVlcnlQZXJmb3JtYW5jZU9wdGltaXplclxyXG4gIHByaXZhdGUgY2FjaGVNYW5hZ2VyOiBJbnRlbGxpZ2VudENhY2hlTWFuYWdlclxyXG4gIHByaXZhdGUgY2FjaGVPcHRpbWl6ZXI6IENhY2hlU3RyYXRlZ3lPcHRpbWl6ZXJcclxuICBwcml2YXRlIG1vbml0b3JFbmhhbmNlcjogUGVyZm9ybWFuY2VNb25pdG9yRW5oYW5jZXJcclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB0aHJlc2hvbGRzPzogUGFydGlhbDxQZXJmb3JtYW5jZVRocmVzaG9sZHM+LFxyXG4gICAgaW50ZXJ2YWxNczogbnVtYmVyID0gMzAwMDAsXHJcbiAgICBtYXhIaXN0b3J5U2l6ZTogbnVtYmVyID0gMTAwXHJcbiAgKSB7XHJcbiAgICBzdXBlcigpXHJcblxyXG4gICAgLy8g6buY6K6k5oCn6IO96ZiI5YC8XHJcbiAgICB0aGlzLnRocmVzaG9sZHMgPSB7XHJcbiAgICAgIG1heExhdGVuY3k6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX01BWF9MQVRFTkNZIHx8ICcxMDAwJyksXHJcbiAgICAgIG1heEZhaWx1cmVSYXRlOiBwYXJzZUZsb2F0KHByb2Nlc3MuZW52LkRCX01BWF9GQUlMVVJFX1JBVEUgfHwgJzUnKSxcclxuICAgICAgbWF4UmVjb25uZWN0QXR0ZW1wdHM6IHBhcnNlSW50KHByb2Nlc3MuZW52LkRCX01BWF9SRUNPTk5FQ1RfQVRURU1QVFMgfHwgJzUnKSxcclxuICAgICAgbWluVXB0aW1lOiBwYXJzZUludChwcm9jZXNzLmVudi5EQl9NSU5fVVBUSU1FIHx8ICc2MDAwMCcpLFxyXG4gICAgICAuLi50aHJlc2hvbGRzXHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5pbnRlcnZhbE1zID0gaW50ZXJ2YWxNc1xyXG4gICAgdGhpcy5tYXhIaXN0b3J5U2l6ZSA9IG1heEhpc3RvcnlTaXplXHJcblxyXG4gICAgLy8g5Yid5aeL5YyW5oCn6IO95LyY5YyW57uE5Lu2XHJcbiAgICB0aGlzLmluaXRpYWxpemVPcHRpbWl6YXRpb25Db21wb25lbnRzKClcclxuXHJcbiAgICAvLyDnm5HlkKzmlbDmja7lupPkuovku7ZcclxuICAgIHRoaXMuc2V0dXBEYXRhYmFzZUV2ZW50TGlzdGVuZXJzKClcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOWIneWni+WMluaAp+iDveS8mOWMlue7hOS7tlxyXG4gICAqL1xyXG4gIHByaXZhdGUgaW5pdGlhbGl6ZU9wdGltaXphdGlvbkNvbXBvbmVudHMoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDliJ3lp4vljJbov57mjqXmsaDliIbmnpDlmahcclxuICAgICAgdGhpcy5wb29sQW5hbHl6ZXIgPSBuZXcgQ29ubmVjdGlvblBvb2xBbmFseXplcih7XHJcbiAgICAgICAgYW5hbHlzaXNJbnRlcnZhbDogNjAwMDAsIC8vIDHliIbpkp/liIbmnpDkuIDmrKFcclxuICAgICAgICBoaXN0b3J5U2l6ZTogMTAwLFxyXG4gICAgICAgIGVuYWJsZVJlYWx0aW1lTW9uaXRvcmluZzogdHJ1ZVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8g5Yid5aeL5YyW5Yqo5oCB6L+e5o6l5rGg6LCD5pW05ZmoXHJcbiAgICAgIHRoaXMuZHluYW1pY0FkanVzdGVyID0gbmV3IER5bmFtaWNQb29sQWRqdXN0ZXIoe1xyXG4gICAgICAgIGFkanVzdG1lbnRJbnRlcnZhbDogMTIwMDAwLCAvLyAy5YiG6ZKf6LCD5pW05LiA5qyhXHJcbiAgICAgICAgY29vbGRvd25QZXJpb2Q6IDMwMDAwMCwgLy8gNeWIhumSn+WGt+WNtOacn1xyXG4gICAgICAgIGVuYWJsZVByZWRpY3RpdmVBZGp1c3RtZW50OiB0cnVlLFxyXG4gICAgICAgIG1heEFkanVzdG1lbnRQZXJjZW50YWdlOiAyMFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLy8g5Yid5aeL5YyW5p+l6K+i5oCn6IO95LyY5YyW5ZmoXHJcbiAgICAgIHRoaXMucXVlcnlPcHRpbWl6ZXIgPSBuZXcgUXVlcnlQZXJmb3JtYW5jZU9wdGltaXplcih7XHJcbiAgICAgICAgc2xvd1F1ZXJ5VGhyZXNob2xkOiAxMDAwLCAvLyAx56eSXHJcbiAgICAgICAgZW5hYmxlUXVlcnlDYWNoZTogdHJ1ZSxcclxuICAgICAgICBjYWNoZVNpemU6IDEwMDAsXHJcbiAgICAgICAgZW5hYmxlT3B0aW1pemF0aW9uU3VnZ2VzdGlvbnM6IHRydWVcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIOWIneWni+WMluaZuuiDvee8k+WtmOeuoeeQhuWZqFxyXG4gICAgICB0aGlzLmNhY2hlTWFuYWdlciA9IG5ldyBJbnRlbGxpZ2VudENhY2hlTWFuYWdlcih7XHJcbiAgICAgICAgbDFDb25maWc6IHtcclxuICAgICAgICAgIG1heFNpemU6IDEwMDAsXHJcbiAgICAgICAgICB0dGw6IDMwMDAwMCAvLyA15YiG6ZKfXHJcbiAgICAgICAgfSxcclxuICAgICAgICBsMkNvbmZpZzoge1xyXG4gICAgICAgICAgaG9zdDogcHJvY2Vzcy5lbnYuUkVESVNfSE9TVCB8fCAnbG9jYWxob3N0JyxcclxuICAgICAgICAgIHBvcnQ6IHBhcnNlSW50KHByb2Nlc3MuZW52LlJFRElTX1BPUlQgfHwgJzYzNzknKSxcclxuICAgICAgICAgIHR0bDogMzYwMDAwMCAvLyAx5bCP5pe2XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbmFibGVQcmV3YXJtaW5nOiB0cnVlLFxyXG4gICAgICAgIGVuYWJsZURpc3RyaWJ1dGVkQ29uc2lzdGVuY3k6IHRydWVcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIOWIneWni+WMlue8k+WtmOetlueVpeS8mOWMluWZqFxyXG4gICAgICB0aGlzLmNhY2hlT3B0aW1pemVyID0gbmV3IENhY2hlU3RyYXRlZ3lPcHRpbWl6ZXIoe1xyXG4gICAgICAgIG9wdGltaXphdGlvbkludGVydmFsOiAzMDAwMDAsIC8vIDXliIbpkp9cclxuICAgICAgICBlbmFibGVBQlRlc3Rpbmc6IHRydWUsXHJcbiAgICAgICAgZW5hYmxlTUxPcHRpbWl6YXRpb246IHRydWUsXHJcbiAgICAgICAgc3RyYXRlZ3lFdmFsdWF0aW9uUGVyaW9kOiAzNjAwMDAwIC8vIDHlsI/ml7ZcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIOWIneWni+WMluaAp+iDveebkeaOp+WinuW8uuWZqFxyXG4gICAgICB0aGlzLm1vbml0b3JFbmhhbmNlciA9IG5ldyBQZXJmb3JtYW5jZU1vbml0b3JFbmhhbmNlcih7XHJcbiAgICAgICAgbWV0cmljc0NvbGxlY3Rpb25JbnRlcnZhbDogMzAwMDAsIC8vIDMw56eSXHJcbiAgICAgICAgYW5vbWFseURldGVjdGlvbkVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgdHJlbmRBbmFseXNpc0VuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgYXV0b09wdGltaXphdGlvbkVuYWJsZWQ6IHRydWVcclxuICAgICAgfSlcclxuXHJcbiAgICAgIC8vIOWIneWni+WMluaAp+iDveS8mOWMluWNj+iwg+WZqFxyXG4gICAgICB0aGlzLm9wdGltaXphdGlvbkNvb3JkaW5hdG9yID0gbmV3IFBlcmZvcm1hbmNlT3B0aW1pemF0aW9uQ29vcmRpbmF0b3Ioe1xyXG4gICAgICAgIGhlYWx0aENoZWNrSW50ZXJ2YWw6IDYwMDAwLCAvLyAx5YiG6ZKfXHJcbiAgICAgICAgb3B0aW1pemF0aW9uRXZhbHVhdGlvbkludGVydmFsOiAzMDAwMDAsIC8vIDXliIbpkp9cclxuICAgICAgICBlbmFibGVBdXRvT3B0aW1pemF0aW9uOiB0cnVlLFxyXG4gICAgICAgIG1heENvbmN1cnJlbnRPcHRpbWl6YXRpb25zOiAzXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICAvLyDms6jlhoznu4Tku7bliLDljY/osIPlmahcclxuICAgICAgdGhpcy5vcHRpbWl6YXRpb25Db29yZGluYXRvci5yZWdpc3RlckNvbXBvbmVudCgncG9vbEFuYWx5emVyJywgdGhpcy5wb29sQW5hbHl6ZXIpXHJcbiAgICAgIHRoaXMub3B0aW1pemF0aW9uQ29vcmRpbmF0b3IucmVnaXN0ZXJDb21wb25lbnQoJ2R5bmFtaWNBZGp1c3RlcicsIHRoaXMuZHluYW1pY0FkanVzdGVyKVxyXG4gICAgICB0aGlzLm9wdGltaXphdGlvbkNvb3JkaW5hdG9yLnJlZ2lzdGVyQ29tcG9uZW50KCdxdWVyeU9wdGltaXplcicsIHRoaXMucXVlcnlPcHRpbWl6ZXIpXHJcbiAgICAgIHRoaXMub3B0aW1pemF0aW9uQ29vcmRpbmF0b3IucmVnaXN0ZXJDb21wb25lbnQoJ2NhY2hlTWFuYWdlcicsIHRoaXMuY2FjaGVNYW5hZ2VyKVxyXG4gICAgICB0aGlzLm9wdGltaXphdGlvbkNvb3JkaW5hdG9yLnJlZ2lzdGVyQ29tcG9uZW50KCdjYWNoZU9wdGltaXplcicsIHRoaXMuY2FjaGVPcHRpbWl6ZXIpXHJcbiAgICAgIHRoaXMub3B0aW1pemF0aW9uQ29vcmRpbmF0b3IucmVnaXN0ZXJDb21wb25lbnQoJ21vbml0b3JFbmhhbmNlcicsIHRoaXMubW9uaXRvckVuaGFuY2VyKVxyXG5cclxuICAgICAgLy8g6K6+572u57uE5Lu26Ze055qE5LqL5Lu255uR5ZCsXHJcbiAgICAgIHRoaXMuc2V0dXBPcHRpbWl6YXRpb25FdmVudExpc3RlbmVycygpXHJcblxyXG4gICAgICBjb25zb2xlLmxvZygnUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIGNvbXBvbmVudHMgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5JylcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIG9wdGltaXphdGlvbiBjb21wb25lbnRzOicsIGVycm9yKVxyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KEFsZXJ0TGV2ZWwuRVJST1IsIGDmgKfog73kvJjljJbnu4Tku7bliJ3lp4vljJblpLHotKU6ICR7ZXJyb3J9YClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruS8mOWMlue7hOS7tuS6i+S7tuebkeWQrOWZqFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0dXBPcHRpbWl6YXRpb25FdmVudExpc3RlbmVycygpOiB2b2lkIHtcclxuICAgIC8vIOebkeWQrOi/nuaOpeaxoOWIhuaekOWujOaIkOS6i+S7tlxyXG4gICAgdGhpcy5wb29sQW5hbHl6ZXIub24oJ2FuYWx5c2lzQ29tcGxldGUnLCAoYW5hbHlzaXMpID0+IHtcclxuICAgICAgdGhpcy5lbWl0KCdwb29sQW5hbHlzaXMnLCBhbmFseXNpcylcclxuICAgICAgLy8g6Kem5Y+R5Yqo5oCB6LCD5pW05Zmo6K+E5LywXHJcbiAgICAgIHRoaXMuZHluYW1pY0FkanVzdGVyLnRyaWdnZXJJbW1lZGlhdGVBZGp1c3RtZW50KClcclxuICAgIH0pXHJcblxyXG4gICAgLy8g55uR5ZCs5Yqo5oCB6LCD5pW05a6M5oiQ5LqL5Lu2XHJcbiAgICB0aGlzLmR5bmFtaWNBZGp1c3Rlci5vbignYWRqdXN0bWVudENvbXBsZXRlJywgKHJlc3VsdCkgPT4ge1xyXG4gICAgICB0aGlzLmVtaXQoJ3Bvb2xBZGp1c3RtZW50JywgcmVzdWx0KVxyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KEFsZXJ0TGV2ZWwuSU5GTywgYOi/nuaOpeaxoOWKqOaAgeiwg+aVtOWujOaIkDogJHtyZXN1bHQuZGVzY3JpcHRpb259YClcclxuICAgIH0pXHJcblxyXG4gICAgLy8g55uR5ZCs5p+l6K+i5LyY5YyW5LqL5Lu2XHJcbiAgICB0aGlzLnF1ZXJ5T3B0aW1pemVyLm9uKCdzbG93UXVlcnlEZXRlY3RlZCcsIChxdWVyeSkgPT4ge1xyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KEFsZXJ0TGV2ZWwuV0FSTklORywgYOajgOa1i+WIsOaFouafpeivojogJHtxdWVyeS50ZW1wbGF0ZX0gKCR7cXVlcnkuZXhlY3V0aW9uVGltZX1tcylgKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLnF1ZXJ5T3B0aW1pemVyLm9uKCdvcHRpbWl6YXRpb25TdWdnZXN0aW9uJywgKHN1Z2dlc3Rpb24pID0+IHtcclxuICAgICAgdGhpcy5lbWl0KCdvcHRpbWl6YXRpb25TdWdnZXN0aW9uJywgc3VnZ2VzdGlvbilcclxuICAgIH0pXHJcblxyXG4gICAgLy8g55uR5ZCs57yT5a2Y5LqL5Lu2XHJcbiAgICB0aGlzLmNhY2hlTWFuYWdlci5vbignY2FjaGVIaXQnLCAoa2V5LCBsZXZlbCkgPT4ge1xyXG4gICAgICB0aGlzLmVtaXQoJ2NhY2hlSGl0JywgeyBrZXksIGxldmVsIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIHRoaXMuY2FjaGVNYW5hZ2VyLm9uKCdjYWNoZU1pc3MnLCAoa2V5KSA9PiB7XHJcbiAgICAgIHRoaXMuZW1pdCgnY2FjaGVNaXNzJywgeyBrZXkgfSlcclxuICAgIH0pXHJcblxyXG4gICAgLy8g55uR5ZCs57yT5a2Y562W55Wl5LyY5YyW5LqL5Lu2XHJcbiAgICB0aGlzLmNhY2hlT3B0aW1pemVyLm9uKCdzdHJhdGVneU9wdGltaXplZCcsIChyZXN1bHQpID0+IHtcclxuICAgICAgdGhpcy5lbWl0KCdjYWNoZVN0cmF0ZWd5T3B0aW1pemVkJywgcmVzdWx0KVxyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KEFsZXJ0TGV2ZWwuSU5GTywgYOe8k+WtmOetlueVpeS8mOWMluWujOaIkDogJHtyZXN1bHQuZGVzY3JpcHRpb259YClcclxuICAgIH0pXHJcblxyXG4gICAgLy8g55uR5ZCs5oCn6IO955uR5o6n5aKe5by65Zmo5LqL5Lu2XHJcbiAgICB0aGlzLm1vbml0b3JFbmhhbmNlci5vbignYW5vbWFseURldGVjdGVkJywgKGFub21hbHkpID0+IHtcclxuICAgICAgdGhpcy5jcmVhdGVBbGVydChBbGVydExldmVsLldBUk5JTkcsIGDmgKfog73lvILluLjmo4DmtYs6ICR7YW5vbWFseS5kZXNjcmlwdGlvbn1gKVxyXG4gICAgfSlcclxuXHJcbiAgICB0aGlzLm1vbml0b3JFbmhhbmNlci5vbignb3B0aW1pemF0aW9uUmVjb21tZW5kYXRpb24nLCAocmVjb21tZW5kYXRpb24pID0+IHtcclxuICAgICAgdGhpcy5lbWl0KCdvcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbicsIHJlY29tbWVuZGF0aW9uKVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyDnm5HlkKzljY/osIPlmajkuovku7ZcclxuICAgIHRoaXMub3B0aW1pemF0aW9uQ29vcmRpbmF0b3Iub24oJ29wdGltaXphdGlvbkNvbXBsZXRlJywgKHJlc3VsdCkgPT4ge1xyXG4gICAgICB0aGlzLmVtaXQoJ2Nvb3JkaW5hdGVkT3B0aW1pemF0aW9uJywgcmVzdWx0KVxyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KEFsZXJ0TGV2ZWwuSU5GTywgYOWNj+iwg+S8mOWMluWujOaIkDogJHtyZXN1bHQuZGVzY3JpcHRpb259YClcclxuICAgIH0pXHJcblxyXG4gICAgdGhpcy5vcHRpbWl6YXRpb25Db29yZGluYXRvci5vbignY3JpdGljYWxBbGVydCcsIChhbGVydCkgPT4ge1xyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KEFsZXJ0TGV2ZWwuQ1JJVElDQUwsIGDlhbPplK7mgKfog73lkYroraY6ICR7YWxlcnQubWVzc2FnZX1gKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiuvue9ruaVsOaNruW6k+S6i+S7tuebkeWQrOWZqFxyXG4gICAqL1xyXG4gIHByaXZhdGUgc2V0dXBEYXRhYmFzZUV2ZW50TGlzdGVuZXJzKCk6IHZvaWQge1xyXG4gICAgZW5oYW5jZWREYXRhYmFzZU1hbmFnZXIuZ2V0UHJpc21hQ2xpZW50KCkub24oJ2Nvbm5lY3RlZCcsICgpID0+IHtcclxuICAgICAgdGhpcy5jcmVhdGVBbGVydChBbGVydExldmVsLklORk8sICfmlbDmja7lupPov57mjqXmiJDlip/lu7rnq4snKVxyXG4gICAgfSlcclxuXHJcbiAgICBlbmhhbmNlZERhdGFiYXNlTWFuYWdlci5nZXRQcmlzbWFDbGllbnQoKS5vbignZGlzY29ubmVjdGVkJywgKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBlcnJvciA/IGDmlbDmja7lupPov57mjqXmlq3lvIA6ICR7ZXJyb3IubWVzc2FnZX1gIDogJ+aVsOaNruW6k+i/nuaOpeaWreW8gCdcclxuICAgICAgdGhpcy5jcmVhdGVBbGVydChBbGVydExldmVsLldBUk5JTkcsIG1lc3NhZ2UpXHJcbiAgICB9KVxyXG5cclxuICAgIGVuaGFuY2VkRGF0YWJhc2VNYW5hZ2VyLmdldFByaXNtYUNsaWVudCgpLm9uKCdyZWNvbm5lY3RpbmcnLCAoYXR0ZW1wdCkgPT4ge1xyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KEFsZXJ0TGV2ZWwuV0FSTklORywgYOaVsOaNruW6k+mHjei/nuS4rSAo56ysJHthdHRlbXB0feasoeWwneivlSlgKVxyXG4gICAgfSlcclxuXHJcbiAgICBlbmhhbmNlZERhdGFiYXNlTWFuYWdlci5nZXRQcmlzbWFDbGllbnQoKS5vbigncmVjb25uZWN0ZWQnLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoQWxlcnRMZXZlbC5JTkZPLCAn5pWw5o2u5bqT6YeN6L+e5oiQ5YqfJylcclxuICAgIH0pXHJcblxyXG4gICAgZW5oYW5jZWREYXRhYmFzZU1hbmFnZXIuZ2V0UHJpc21hQ2xpZW50KCkub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoQWxlcnRMZXZlbC5FUlJPUiwgYOaVsOaNruW6k+mUmeivrzogJHtlcnJvci5tZXNzYWdlfWApXHJcbiAgICB9KVxyXG5cclxuICAgIGVuaGFuY2VkRGF0YWJhc2VNYW5hZ2VyLmdldFByaXNtYUNsaWVudCgpLm9uKCdoZWFsdGhDaGVjaycsIChoZWFsdGh5KSA9PiB7XHJcbiAgICAgIGlmICghaGVhbHRoeSkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlQWxlcnQoQWxlcnRMZXZlbC5XQVJOSU5HLCAn5pWw5o2u5bqT5YGl5bq35qOA5p+l5aSx6LSlJylcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOW8gOWni+ebkeaOp1xyXG4gICAqL1xyXG4gIHN0YXJ0TW9uaXRvcmluZygpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmlzTW9uaXRvcmluZykge1xyXG4gICAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgbW9uaXRvcmluZyBpcyBhbHJlYWR5IHJ1bm5pbmcnKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBjb25zb2xlLmxvZyhgU3RhcnRpbmcgZGF0YWJhc2UgbW9uaXRvcmluZyAoaW50ZXJ2YWw6ICR7dGhpcy5pbnRlcnZhbE1zfW1zKWApXHJcbiAgICB0aGlzLmlzTW9uaXRvcmluZyA9IHRydWVcclxuICAgIHRoaXMubGFzdENwdVVzYWdlID0gcHJvY2Vzcy5jcHVVc2FnZSgpXHJcblxyXG4gICAgLy8g5ZCv5Yqo5omA5pyJ5oCn6IO95LyY5YyW57uE5Lu2XHJcbiAgICB0aGlzLnN0YXJ0T3B0aW1pemF0aW9uQ29tcG9uZW50cygpXHJcblxyXG4gICAgdGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgIHRoaXMuY29sbGVjdE1ldHJpY3MoKVxyXG4gICAgfSwgdGhpcy5pbnRlcnZhbE1zKVxyXG5cclxuICAgIC8vIOeri+WNs+aUtumbhuS4gOasoeaMh+agh1xyXG4gICAgdGhpcy5jb2xsZWN0TWV0cmljcygpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDlgZzmraLnm5HmjqdcclxuICAgKi9cclxuICBzdG9wTW9uaXRvcmluZygpOiB2b2lkIHtcclxuICAgIGlmICghdGhpcy5pc01vbml0b3JpbmcpIHtcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1N0b3BwaW5nIGRhdGFiYXNlIG1vbml0b3JpbmcnKVxyXG4gICAgdGhpcy5pc01vbml0b3JpbmcgPSBmYWxzZVxyXG5cclxuICAgIC8vIOWBnOatouaJgOacieaAp+iDveS8mOWMlue7hOS7tlxyXG4gICAgdGhpcy5zdG9wT3B0aW1pemF0aW9uQ29tcG9uZW50cygpXHJcblxyXG4gICAgaWYgKHRoaXMubW9uaXRvcmluZ0ludGVydmFsKSB7XHJcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5tb25pdG9yaW5nSW50ZXJ2YWwpXHJcbiAgICAgIHRoaXMubW9uaXRvcmluZ0ludGVydmFsID0gbnVsbFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5ZCv5Yqo5omA5pyJ5oCn6IO95LyY5YyW57uE5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdGFydE9wdGltaXphdGlvbkNvbXBvbmVudHMoKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIGNvbXBvbmVudHMuLi4nKVxyXG4gICAgICBcclxuICAgICAgLy8g5ZCv5Yqo5Y2P6LCD5Zmo77yI5Lya6Ieq5Yqo5ZCv5Yqo5omA5pyJ5rOo5YaM55qE57uE5Lu277yJXHJcbiAgICAgIHRoaXMub3B0aW1pemF0aW9uQ29vcmRpbmF0b3Iuc3RhcnQoKVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5sb2coJ0FsbCBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24gY29tcG9uZW50cyBzdGFydGVkIHN1Y2Nlc3NmdWxseScpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RhcnQgb3B0aW1pemF0aW9uIGNvbXBvbmVudHM6JywgZXJyb3IpXHJcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoQWxlcnRMZXZlbC5FUlJPUiwgYOaAp+iDveS8mOWMlue7hOS7tuWQr+WKqOWksei0pTogJHtlcnJvcn1gKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5YGc5q2i5omA5pyJ5oCn6IO95LyY5YyW57uE5Lu2XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBzdG9wT3B0aW1pemF0aW9uQ29tcG9uZW50cygpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdTdG9wcGluZyBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24gY29tcG9uZW50cy4uLicpXHJcbiAgICAgIFxyXG4gICAgICAvLyDlgZzmraLljY/osIPlmajvvIjkvJroh6rliqjlgZzmraLmiYDmnInms6jlhoznmoTnu4Tku7bvvIlcclxuICAgICAgdGhpcy5vcHRpbWl6YXRpb25Db29yZGluYXRvci5zdG9wKClcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdBbGwgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uIGNvbXBvbmVudHMgc3RvcHBlZCBzdWNjZXNzZnVsbHknKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHN0b3Agb3B0aW1pemF0aW9uIGNvbXBvbmVudHM6JywgZXJyb3IpXHJcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoQWxlcnRMZXZlbC5FUlJPUiwgYOaAp+iDveS8mOWMlue7hOS7tuWBnOatouWksei0pTogJHtlcnJvcn1gKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5oCn6IO95LyY5YyW54q25oCBXHJcbiAgICovXHJcbiAgZ2V0T3B0aW1pemF0aW9uU3RhdHVzKCk6IHtcclxuICAgIGNvb3JkaW5hdG9yOiBhbnlcclxuICAgIHBvb2xBbmFseXplcjogYW55XHJcbiAgICBkeW5hbWljQWRqdXN0ZXI6IGFueVxyXG4gICAgcXVlcnlPcHRpbWl6ZXI6IGFueVxyXG4gICAgY2FjaGVNYW5hZ2VyOiBhbnlcclxuICAgIGNhY2hlT3B0aW1pemVyOiBhbnlcclxuICAgIG1vbml0b3JFbmhhbmNlcjogYW55XHJcbiAgfSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBjb29yZGluYXRvcjogdGhpcy5vcHRpbWl6YXRpb25Db29yZGluYXRvcj8uZ2V0U3RhdHVzKCkgfHwgbnVsbCxcclxuICAgICAgcG9vbEFuYWx5emVyOiB0aGlzLnBvb2xBbmFseXplcj8uZ2V0U3RhdHVzKCkgfHwgbnVsbCxcclxuICAgICAgZHluYW1pY0FkanVzdGVyOiB0aGlzLmR5bmFtaWNBZGp1c3Rlcj8uZ2V0U3RhdHVzKCkgfHwgbnVsbCxcclxuICAgICAgcXVlcnlPcHRpbWl6ZXI6IHRoaXMucXVlcnlPcHRpbWl6ZXI/LmdldFN0YXR1cygpIHx8IG51bGwsXHJcbiAgICAgIGNhY2hlTWFuYWdlcjogdGhpcy5jYWNoZU1hbmFnZXI/LmdldFN0YXR1cygpIHx8IG51bGwsXHJcbiAgICAgIGNhY2hlT3B0aW1pemVyOiB0aGlzLmNhY2hlT3B0aW1pemVyPy5nZXRTdGF0dXMoKSB8fCBudWxsLFxyXG4gICAgICBtb25pdG9yRW5oYW5jZXI6IHRoaXMubW9uaXRvckVuaGFuY2VyPy5nZXRTdGF0dXMoKSB8fCBudWxsXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmiYvliqjop6blj5HmgKfog73kvJjljJZcclxuICAgKi9cclxuICB0cmlnZ2VyT3B0aW1pemF0aW9uKHN0cmF0ZWd5Pzogc3RyaW5nKTogdm9pZCB7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAoc3RyYXRlZ3kpIHtcclxuICAgICAgICB0aGlzLm9wdGltaXphdGlvbkNvb3JkaW5hdG9yLmV4ZWN1dGVTdHJhdGVneShzdHJhdGVneSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLm9wdGltaXphdGlvbkNvb3JkaW5hdG9yLnRyaWdnZXJPcHRpbWl6YXRpb25FdmFsdWF0aW9uKClcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGhpcy5jcmVhdGVBbGVydChBbGVydExldmVsLklORk8sIGDmiYvliqjop6blj5HmgKfog73kvJjljJYke3N0cmF0ZWd5ID8gYDogJHtzdHJhdGVneX1gIDogJyd9YClcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB0cmlnZ2VyIG9wdGltaXphdGlvbjonLCBlcnJvcilcclxuICAgICAgdGhpcy5jcmVhdGVBbGVydChBbGVydExldmVsLkVSUk9SLCBg5omL5Yqo5LyY5YyW6Kem5Y+R5aSx6LSlOiAke2Vycm9yfWApXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bkvJjljJblu7rorq5cclxuICAgKi9cclxuICBnZXRPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMoKTogYW55W10ge1xyXG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBhbnlbXSA9IFtdXHJcbiAgICBcclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIOS7juWQhOS4que7hOS7tuaUtumbhuS8mOWMluW7uuiurlxyXG4gICAgICBpZiAodGhpcy5wb29sQW5hbHl6ZXIpIHtcclxuICAgICAgICBjb25zdCBwb29sUmVjb21tZW5kYXRpb25zID0gdGhpcy5wb29sQW5hbHl6ZXIuZ2VuZXJhdGVPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMoKVxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLnBvb2xSZWNvbW1lbmRhdGlvbnMpXHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGlmICh0aGlzLnF1ZXJ5T3B0aW1pemVyKSB7XHJcbiAgICAgICAgY29uc3QgcXVlcnlSZWNvbW1lbmRhdGlvbnMgPSB0aGlzLnF1ZXJ5T3B0aW1pemVyLmdldE9wdGltaXphdGlvblN1Z2dlc3Rpb25zKClcclxuICAgICAgICByZWNvbW1lbmRhdGlvbnMucHVzaCguLi5xdWVyeVJlY29tbWVuZGF0aW9ucylcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgaWYgKHRoaXMuY2FjaGVPcHRpbWl6ZXIpIHtcclxuICAgICAgICBjb25zdCBjYWNoZVJlY29tbWVuZGF0aW9ucyA9IHRoaXMuY2FjaGVPcHRpbWl6ZXIuZ2VuZXJhdGVPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMoKVxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLmNhY2hlUmVjb21tZW5kYXRpb25zKVxyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpZiAodGhpcy5tb25pdG9yRW5oYW5jZXIpIHtcclxuICAgICAgICBjb25zdCBtb25pdG9yUmVjb21tZW5kYXRpb25zID0gdGhpcy5tb25pdG9yRW5oYW5jZXIuZ2VuZXJhdGVPcHRpbWl6YXRpb25SZWNvbW1lbmRhdGlvbnMoKVxyXG4gICAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKC4uLm1vbml0b3JSZWNvbW1lbmRhdGlvbnMpXHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZXQgb3B0aW1pemF0aW9uIHJlY29tbWVuZGF0aW9uczonLCBlcnJvcilcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJlY29tbWVuZGF0aW9uc1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pS26ZuG5oyH5qCHXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjb2xsZWN0TWV0cmljcygpOiB2b2lkIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN0YXRzID0gZW5oYW5jZWREYXRhYmFzZU1hbmFnZXIuZ2V0UHJpc21hQ2xpZW50KCkuZ2V0U3RhdHMoKVxyXG4gICAgICBjb25zdCBtZW1Vc2FnZSA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKVxyXG4gICAgICBjb25zdCBjcHVVc2FnZSA9IHByb2Nlc3MuY3B1VXNhZ2UodGhpcy5sYXN0Q3B1VXNhZ2UgfHwgdW5kZWZpbmVkKVxyXG4gICAgICB0aGlzLmxhc3RDcHVVc2FnZSA9IHByb2Nlc3MuY3B1VXNhZ2UoKVxyXG5cclxuICAgICAgY29uc3QgbWV0cmljczogRGF0YWJhc2VNZXRyaWNzID0ge1xyXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcclxuICAgICAgICBjb25uZWN0aW9uU3RhdGU6IHN0YXRzLnN0YXRlLFxyXG4gICAgICAgIHVwdGltZTogc3RhdHMudXB0aW1lLFxyXG4gICAgICAgIHRvdGFsUXVlcmllczogc3RhdHMudG90YWxRdWVyaWVzLFxyXG4gICAgICAgIGZhaWxlZFF1ZXJpZXM6IHN0YXRzLmZhaWxlZFF1ZXJpZXMsXHJcbiAgICAgICAgc3VjY2Vzc1JhdGU6IHN0YXRzLnRvdGFsUXVlcmllcyA+IDAgXHJcbiAgICAgICAgICA/ICgoc3RhdHMudG90YWxRdWVyaWVzIC0gc3RhdHMuZmFpbGVkUXVlcmllcykgLyBzdGF0cy50b3RhbFF1ZXJpZXMpICogMTAwXHJcbiAgICAgICAgICA6IDEwMCxcclxuICAgICAgICBhdmdMYXRlbmN5OiBzdGF0cy5hdmdMYXRlbmN5LFxyXG4gICAgICAgIHJlY29ubmVjdEF0dGVtcHRzOiBzdGF0cy5yZWNvbm5lY3RBdHRlbXB0cyxcclxuICAgICAgICBtZW1vcnlVc2FnZToge1xyXG4gICAgICAgICAgcnNzOiBtZW1Vc2FnZS5yc3MsXHJcbiAgICAgICAgICBoZWFwVXNlZDogbWVtVXNhZ2UuaGVhcFVzZWQsXHJcbiAgICAgICAgICBoZWFwVG90YWw6IG1lbVVzYWdlLmhlYXBUb3RhbCxcclxuICAgICAgICAgIGV4dGVybmFsOiBtZW1Vc2FnZS5leHRlcm5hbFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY3B1VXNhZ2U6IHtcclxuICAgICAgICAgIHVzZXI6IGNwdVVzYWdlLnVzZXIgLyAxMDAwLCAvLyDovazmjaLkuLrmr6vnp5JcclxuICAgICAgICAgIHN5c3RlbTogY3B1VXNhZ2Uuc3lzdGVtIC8gMTAwMFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5re75Yqg5Yiw5Y6G5Y+y6K6w5b2VXHJcbiAgICAgIHRoaXMuYWRkTWV0cmljc1RvSGlzdG9yeShtZXRyaWNzKVxyXG5cclxuICAgICAgLy8g5qOA5p+l5oCn6IO96ZiI5YC8XHJcbiAgICAgIHRoaXMuY2hlY2tQZXJmb3JtYW5jZVRocmVzaG9sZHMobWV0cmljcylcclxuXHJcbiAgICAgIC8vIOinpuWPkeaMh+agh+aUtumbhuS6i+S7tlxyXG4gICAgICB0aGlzLmVtaXQoJ21ldHJpY3MnLCBtZXRyaWNzKVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjb2xsZWN0IGRhdGFiYXNlIG1ldHJpY3M6JywgZXJyb3IpXHJcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoQWxlcnRMZXZlbC5FUlJPUiwgYOaMh+agh+aUtumbhuWksei0pTogJHtlcnJvcn1gKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5re75Yqg5oyH5qCH5Yiw5Y6G5Y+y6K6w5b2VXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBhZGRNZXRyaWNzVG9IaXN0b3J5KG1ldHJpY3M6IERhdGFiYXNlTWV0cmljcyk6IHZvaWQge1xyXG4gICAgdGhpcy5tZXRyaWNzSGlzdG9yeS5wdXNoKG1ldHJpY3MpXHJcblxyXG4gICAgLy8g6ZmQ5Yi25Y6G5Y+y6K6w5b2V5aSn5bCPXHJcbiAgICBpZiAodGhpcy5tZXRyaWNzSGlzdG9yeS5sZW5ndGggPiB0aGlzLm1heEhpc3RvcnlTaXplKSB7XHJcbiAgICAgIHRoaXMubWV0cmljc0hpc3RvcnkgPSB0aGlzLm1ldHJpY3NIaXN0b3J5LnNsaWNlKC10aGlzLm1heEhpc3RvcnlTaXplKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5qOA5p+l5oCn6IO96ZiI5YC8XHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjaGVja1BlcmZvcm1hbmNlVGhyZXNob2xkcyhtZXRyaWNzOiBEYXRhYmFzZU1ldHJpY3MpOiB2b2lkIHtcclxuICAgIC8vIOajgOafpeW7tui/n1xyXG4gICAgaWYgKG1ldHJpY3MuYXZnTGF0ZW5jeSA+IHRoaXMudGhyZXNob2xkcy5tYXhMYXRlbmN5KSB7XHJcbiAgICAgIHRoaXMuY3JlYXRlQWxlcnQoXHJcbiAgICAgICAgQWxlcnRMZXZlbC5XQVJOSU5HLFxyXG4gICAgICAgIGDmlbDmja7lupPlubPlnYflu7bov5/ov4fpq5g6ICR7bWV0cmljcy5hdmdMYXRlbmN5LnRvRml4ZWQoMil9bXMgKOmYiOWAvDogJHt0aGlzLnRocmVzaG9sZHMubWF4TGF0ZW5jeX1tcylgLFxyXG4gICAgICAgIG1ldHJpY3MsXHJcbiAgICAgICAgeyB0aHJlc2hvbGQ6IHRoaXMudGhyZXNob2xkcy5tYXhMYXRlbmN5LCBhY3R1YWw6IG1ldHJpY3MuYXZnTGF0ZW5jeSB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6XlpLHotKXnjodcclxuICAgIGlmIChtZXRyaWNzLnN1Y2Nlc3NSYXRlIDwgKDEwMCAtIHRoaXMudGhyZXNob2xkcy5tYXhGYWlsdXJlUmF0ZSkpIHtcclxuICAgICAgdGhpcy5jcmVhdGVBbGVydChcclxuICAgICAgICBBbGVydExldmVsLkVSUk9SLFxyXG4gICAgICAgIGDmlbDmja7lupPmn6Xor6LlpLHotKXnjofov4fpq5g6ICR7KDEwMCAtIG1ldHJpY3Muc3VjY2Vzc1JhdGUpLnRvRml4ZWQoMil9JSAo6ZiI5YC8OiAke3RoaXMudGhyZXNob2xkcy5tYXhGYWlsdXJlUmF0ZX0lKWAsXHJcbiAgICAgICAgbWV0cmljcyxcclxuICAgICAgICB7IHRocmVzaG9sZDogdGhpcy50aHJlc2hvbGRzLm1heEZhaWx1cmVSYXRlLCBhY3R1YWw6IDEwMCAtIG1ldHJpY3Muc3VjY2Vzc1JhdGUgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8g5qOA5p+l6YeN6L+e5qyh5pWwXHJcbiAgICBpZiAobWV0cmljcy5yZWNvbm5lY3RBdHRlbXB0cyA+IHRoaXMudGhyZXNob2xkcy5tYXhSZWNvbm5lY3RBdHRlbXB0cykge1xyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KFxyXG4gICAgICAgIEFsZXJ0TGV2ZWwuQ1JJVElDQUwsXHJcbiAgICAgICAgYOaVsOaNruW6k+mHjei/nuasoeaVsOi/h+WkmjogJHttZXRyaWNzLnJlY29ubmVjdEF0dGVtcHRzfSAo6ZiI5YC8OiAke3RoaXMudGhyZXNob2xkcy5tYXhSZWNvbm5lY3RBdHRlbXB0c30pYCxcclxuICAgICAgICBtZXRyaWNzLFxyXG4gICAgICAgIHsgdGhyZXNob2xkOiB0aGlzLnRocmVzaG9sZHMubWF4UmVjb25uZWN0QXR0ZW1wdHMsIGFjdHVhbDogbWV0cmljcy5yZWNvbm5lY3RBdHRlbXB0cyB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6Xov5DooYzml7bpl7TvvIjlpoLmnpzov57mjqXnirbmgIHkuLrlt7Lov57mjqXkvYbov5DooYzml7bpl7Tov4fnn63vvIlcclxuICAgIGlmIChtZXRyaWNzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNPTk5FQ1RFRCAmJiBcclxuICAgICAgICBtZXRyaWNzLnVwdGltZSA8IHRoaXMudGhyZXNob2xkcy5taW5VcHRpbWUpIHtcclxuICAgICAgdGhpcy5jcmVhdGVBbGVydChcclxuICAgICAgICBBbGVydExldmVsLldBUk5JTkcsXHJcbiAgICAgICAgYOaVsOaNruW6k+i/nuaOpei/kOihjOaXtumXtOi/h+efrTogJHsobWV0cmljcy51cHRpbWUgLyAxMDAwKS50b0ZpeGVkKDIpfXMgKOmYiOWAvDogJHt0aGlzLnRocmVzaG9sZHMubWluVXB0aW1lIC8gMTAwMH1zKWAsXHJcbiAgICAgICAgbWV0cmljcyxcclxuICAgICAgICB7IHRocmVzaG9sZDogdGhpcy50aHJlc2hvbGRzLm1pblVwdGltZSwgYWN0dWFsOiBtZXRyaWNzLnVwdGltZSB9XHJcbiAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICAvLyDmo4Dmn6Xov57mjqXnirbmgIFcclxuICAgIGlmIChtZXRyaWNzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkZBSUxFRCB8fCBcclxuICAgICAgICBtZXRyaWNzLmNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkRJU0NPTk5FQ1RFRCkge1xyXG4gICAgICB0aGlzLmNyZWF0ZUFsZXJ0KFxyXG4gICAgICAgIEFsZXJ0TGV2ZWwuQ1JJVElDQUwsXHJcbiAgICAgICAgYOaVsOaNruW6k+i/nuaOpeeKtuaAgeW8guW4uDogJHttZXRyaWNzLmNvbm5lY3Rpb25TdGF0ZX1gLFxyXG4gICAgICAgIG1ldHJpY3NcclxuICAgICAgKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5Yib5bu65ZGK6K2mXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBjcmVhdGVBbGVydChcclxuICAgIGxldmVsOiBBbGVydExldmVsLCBcclxuICAgIG1lc3NhZ2U6IHN0cmluZywgXHJcbiAgICBtZXRyaWNzPzogRGF0YWJhc2VNZXRyaWNzLFxyXG4gICAgdGhyZXNob2xkPzogYW55XHJcbiAgKTogdm9pZCB7XHJcbiAgICBjb25zdCBhbGVydDogQWxlcnQgPSB7XHJcbiAgICAgIGxldmVsLFxyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgIG1ldHJpY3M6IG1ldHJpY3MgfHwgdGhpcy5nZXRDdXJyZW50TWV0cmljcygpLFxyXG4gICAgICB0aHJlc2hvbGRcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFsZXJ0cy5wdXNoKGFsZXJ0KVxyXG5cclxuICAgIC8vIOmZkOWItuWRiuitpuWOhuWPsuWkp+Wwj1xyXG4gICAgaWYgKHRoaXMuYWxlcnRzLmxlbmd0aCA+IDEwMDApIHtcclxuICAgICAgdGhpcy5hbGVydHMgPSB0aGlzLmFsZXJ0cy5zbGljZSgtMTAwMClcclxuICAgIH1cclxuXHJcbiAgICAvLyDop6blj5HlkYrorabkuovku7ZcclxuICAgIHRoaXMuZW1pdCgnYWxlcnQnLCBhbGVydClcclxuXHJcbiAgICAvLyDmoLnmja7nuqfliKvovpPlh7rml6Xlv5dcclxuICAgIHN3aXRjaCAobGV2ZWwpIHtcclxuICAgICAgY2FzZSBBbGVydExldmVsLklORk86XHJcbiAgICAgICAgY29uc29sZS5pbmZvKGBbREIgTW9uaXRvcl0gJHttZXNzYWdlfWApXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBBbGVydExldmVsLldBUk5JTkc6XHJcbiAgICAgICAgY29uc29sZS53YXJuKGBbREIgTW9uaXRvcl0gJHttZXNzYWdlfWApXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSBBbGVydExldmVsLkVSUk9SOlxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtEQiBNb25pdG9yXSAke21lc3NhZ2V9YClcclxuICAgICAgICBicmVha1xyXG4gICAgICBjYXNlIEFsZXJ0TGV2ZWwuQ1JJVElDQUw6XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0RCIE1vbml0b3JdIENSSVRJQ0FMOiAke21lc3NhZ2V9YClcclxuICAgICAgICBicmVha1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog6I635Y+W5b2T5YmN5oyH5qCHXHJcbiAgICovXHJcbiAgcHJpdmF0ZSBnZXRDdXJyZW50TWV0cmljcygpOiBEYXRhYmFzZU1ldHJpY3Mge1xyXG4gICAgY29uc3Qgc3RhdHMgPSBlbmhhbmNlZERhdGFiYXNlTWFuYWdlci5nZXRQcmlzbWFDbGllbnQoKS5nZXRTdGF0cygpXHJcbiAgICBjb25zdCBtZW1Vc2FnZSA9IHByb2Nlc3MubWVtb3J5VXNhZ2UoKVxyXG4gICAgY29uc3QgY3B1VXNhZ2UgPSBwcm9jZXNzLmNwdVVzYWdlKClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCksXHJcbiAgICAgIGNvbm5lY3Rpb25TdGF0ZTogc3RhdHMuc3RhdGUsXHJcbiAgICAgIHVwdGltZTogc3RhdHMudXB0aW1lLFxyXG4gICAgICB0b3RhbFF1ZXJpZXM6IHN0YXRzLnRvdGFsUXVlcmllcyxcclxuICAgICAgZmFpbGVkUXVlcmllczogc3RhdHMuZmFpbGVkUXVlcmllcyxcclxuICAgICAgc3VjY2Vzc1JhdGU6IHN0YXRzLnRvdGFsUXVlcmllcyA+IDAgXHJcbiAgICAgICAgPyAoKHN0YXRzLnRvdGFsUXVlcmllcyAtIHN0YXRzLmZhaWxlZFF1ZXJpZXMpIC8gc3RhdHMudG90YWxRdWVyaWVzKSAqIDEwMFxyXG4gICAgICAgIDogMTAwLFxyXG4gICAgICBhdmdMYXRlbmN5OiBzdGF0cy5hdmdMYXRlbmN5LFxyXG4gICAgICByZWNvbm5lY3RBdHRlbXB0czogc3RhdHMucmVjb25uZWN0QXR0ZW1wdHMsXHJcbiAgICAgIG1lbW9yeVVzYWdlOiB7XHJcbiAgICAgICAgcnNzOiBtZW1Vc2FnZS5yc3MsXHJcbiAgICAgICAgaGVhcFVzZWQ6IG1lbVVzYWdlLmhlYXBVc2VkLFxyXG4gICAgICAgIGhlYXBUb3RhbDogbWVtVXNhZ2UuaGVhcFRvdGFsLFxyXG4gICAgICAgIGV4dGVybmFsOiBtZW1Vc2FnZS5leHRlcm5hbFxyXG4gICAgICB9LFxyXG4gICAgICBjcHVVc2FnZToge1xyXG4gICAgICAgIHVzZXI6IGNwdVVzYWdlLnVzZXIgLyAxMDAwLFxyXG4gICAgICAgIHN5c3RlbTogY3B1VXNhZ2Uuc3lzdGVtIC8gMTAwMFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bmjIfmoIfljoblj7JcclxuICAgKi9cclxuICBnZXRNZXRyaWNzSGlzdG9yeShsaW1pdD86IG51bWJlcik6IERhdGFiYXNlTWV0cmljc1tdIHtcclxuICAgIGlmIChsaW1pdCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5tZXRyaWNzSGlzdG9yeS5zbGljZSgtbGltaXQpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gWy4uLnRoaXMubWV0cmljc0hpc3RvcnldXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5blkYrorabljoblj7JcclxuICAgKi9cclxuICBnZXRBbGVydHMobGV2ZWw/OiBBbGVydExldmVsLCBsaW1pdD86IG51bWJlcik6IEFsZXJ0W10ge1xyXG4gICAgbGV0IGFsZXJ0cyA9IGxldmVsIFxyXG4gICAgICA/IHRoaXMuYWxlcnRzLmZpbHRlcihhbGVydCA9PiBhbGVydC5sZXZlbCA9PT0gbGV2ZWwpXHJcbiAgICAgIDogWy4uLnRoaXMuYWxlcnRzXVxyXG5cclxuICAgIGlmIChsaW1pdCkge1xyXG4gICAgICBhbGVydHMgPSBhbGVydHMuc2xpY2UoLWxpbWl0KVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhbGVydHNcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIOiOt+WPluaAp+iDvee7n+iuoVxyXG4gICAqL1xyXG4gIGdldFBlcmZvcm1hbmNlU3RhdHModGltZVJhbmdlTXM/OiBudW1iZXIpOiB7XHJcbiAgICBhdmdMYXRlbmN5OiBudW1iZXJcclxuICAgIG1heExhdGVuY3k6IG51bWJlclxyXG4gICAgbWluTGF0ZW5jeTogbnVtYmVyXHJcbiAgICBzdWNjZXNzUmF0ZTogbnVtYmVyXHJcbiAgICB0b3RhbFF1ZXJpZXM6IG51bWJlclxyXG4gICAgZmFpbGVkUXVlcmllczogbnVtYmVyXHJcbiAgICB1cHRpbWVQZXJjZW50YWdlOiBudW1iZXJcclxuICB9IHtcclxuICAgIGxldCBtZXRyaWNzID0gdGhpcy5tZXRyaWNzSGlzdG9yeVxyXG5cclxuICAgIC8vIOWmguaenOaMh+WumuS6huaXtumXtOiMg+WbtO+8jOi/h+a7pOaMh+agh1xyXG4gICAgaWYgKHRpbWVSYW5nZU1zKSB7XHJcbiAgICAgIGNvbnN0IGN1dG9mZlRpbWUgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gdGltZVJhbmdlTXMpXHJcbiAgICAgIG1ldHJpY3MgPSBtZXRyaWNzLmZpbHRlcihtID0+IG0udGltZXN0YW1wID49IGN1dG9mZlRpbWUpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKG1ldHJpY3MubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgYXZnTGF0ZW5jeTogMCxcclxuICAgICAgICBtYXhMYXRlbmN5OiAwLFxyXG4gICAgICAgIG1pbkxhdGVuY3k6IDAsXHJcbiAgICAgICAgc3VjY2Vzc1JhdGU6IDEwMCxcclxuICAgICAgICB0b3RhbFF1ZXJpZXM6IDAsXHJcbiAgICAgICAgZmFpbGVkUXVlcmllczogMCxcclxuICAgICAgICB1cHRpbWVQZXJjZW50YWdlOiAwXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBsYXRlbmNpZXMgPSBtZXRyaWNzLm1hcChtID0+IG0uYXZnTGF0ZW5jeSkuZmlsdGVyKGwgPT4gbCA+IDApXHJcbiAgICBjb25zdCB0b3RhbFF1ZXJpZXMgPSBtZXRyaWNzW21ldHJpY3MubGVuZ3RoIC0gMV0udG90YWxRdWVyaWVzIC0gKG1ldHJpY3NbMF0udG90YWxRdWVyaWVzIHx8IDApXHJcbiAgICBjb25zdCBmYWlsZWRRdWVyaWVzID0gbWV0cmljc1ttZXRyaWNzLmxlbmd0aCAtIDFdLmZhaWxlZFF1ZXJpZXMgLSAobWV0cmljc1swXS5mYWlsZWRRdWVyaWVzIHx8IDApXHJcbiAgICBjb25zdCBjb25uZWN0ZWRNZXRyaWNzID0gbWV0cmljcy5maWx0ZXIobSA9PiBtLmNvbm5lY3Rpb25TdGF0ZSA9PT0gQ29ubmVjdGlvblN0YXRlLkNPTk5FQ1RFRClcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBhdmdMYXRlbmN5OiBsYXRlbmNpZXMubGVuZ3RoID4gMCA/IGxhdGVuY2llcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIGxhdGVuY2llcy5sZW5ndGggOiAwLFxyXG4gICAgICBtYXhMYXRlbmN5OiBsYXRlbmNpZXMubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLmxhdGVuY2llcykgOiAwLFxyXG4gICAgICBtaW5MYXRlbmN5OiBsYXRlbmNpZXMubGVuZ3RoID4gMCA/IE1hdGgubWluKC4uLmxhdGVuY2llcykgOiAwLFxyXG4gICAgICBzdWNjZXNzUmF0ZTogdG90YWxRdWVyaWVzID4gMCA/ICgodG90YWxRdWVyaWVzIC0gZmFpbGVkUXVlcmllcykgLyB0b3RhbFF1ZXJpZXMpICogMTAwIDogMTAwLFxyXG4gICAgICB0b3RhbFF1ZXJpZXMsXHJcbiAgICAgIGZhaWxlZFF1ZXJpZXMsXHJcbiAgICAgIHVwdGltZVBlcmNlbnRhZ2U6IChjb25uZWN0ZWRNZXRyaWNzLmxlbmd0aCAvIG1ldHJpY3MubGVuZ3RoKSAqIDEwMFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5pu05paw5oCn6IO96ZiI5YC8XHJcbiAgICovXHJcbiAgdXBkYXRlVGhyZXNob2xkcyh0aHJlc2hvbGRzOiBQYXJ0aWFsPFBlcmZvcm1hbmNlVGhyZXNob2xkcz4pOiB2b2lkIHtcclxuICAgIHRoaXMudGhyZXNob2xkcyA9IHsgLi4udGhpcy50aHJlc2hvbGRzLCAuLi50aHJlc2hvbGRzIH1cclxuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBtb25pdG9yaW5nIHRocmVzaG9sZHMgdXBkYXRlZDonLCB0aGlzLnRocmVzaG9sZHMpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDmuIXpmaTljoblj7LmlbDmja5cclxuICAgKi9cclxuICBjbGVhckhpc3RvcnkoKTogdm9pZCB7XHJcbiAgICB0aGlzLm1ldHJpY3NIaXN0b3J5ID0gW11cclxuICAgIHRoaXMuYWxlcnRzID0gW11cclxuICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBtb25pdG9yaW5nIGhpc3RvcnkgY2xlYXJlZCcpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiDojrflj5bnm5HmjqfnirbmgIFcclxuICAgKi9cclxuICBnZXRNb25pdG9yaW5nU3RhdHVzKCk6IHtcclxuICAgIGlzTW9uaXRvcmluZzogYm9vbGVhblxyXG4gICAgaW50ZXJ2YWxNczogbnVtYmVyXHJcbiAgICBtZXRyaWNzQ291bnQ6IG51bWJlclxyXG4gICAgYWxlcnRzQ291bnQ6IG51bWJlclxyXG4gICAgdGhyZXNob2xkczogUGVyZm9ybWFuY2VUaHJlc2hvbGRzXHJcbiAgfSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpc01vbml0b3Jpbmc6IHRoaXMuaXNNb25pdG9yaW5nLFxyXG4gICAgICBpbnRlcnZhbE1zOiB0aGlzLmludGVydmFsTXMsXHJcbiAgICAgIG1ldHJpY3NDb3VudDogdGhpcy5tZXRyaWNzSGlzdG9yeS5sZW5ndGgsXHJcbiAgICAgIGFsZXJ0c0NvdW50OiB0aGlzLmFsZXJ0cy5sZW5ndGgsXHJcbiAgICAgIHRocmVzaG9sZHM6IHRoaXMudGhyZXNob2xkc1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICog5a+85Ye655uR5o6n5pWw5o2uXHJcbiAgICovXHJcbiAgZXhwb3J0RGF0YSgpOiB7XHJcbiAgICBtZXRyaWNzOiBEYXRhYmFzZU1ldHJpY3NbXVxyXG4gICAgYWxlcnRzOiBBbGVydFtdXHJcbiAgICB0aHJlc2hvbGRzOiBQZXJmb3JtYW5jZVRocmVzaG9sZHNcclxuICAgIGV4cG9ydGVkQXQ6IERhdGVcclxuICB9IHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG1ldHJpY3M6IHRoaXMuZ2V0TWV0cmljc0hpc3RvcnkoKSxcclxuICAgICAgYWxlcnRzOiB0aGlzLmdldEFsZXJ0cygpLFxyXG4gICAgICB0aHJlc2hvbGRzOiB0aGlzLnRocmVzaG9sZHMsXHJcbiAgICAgIGV4cG9ydGVkQXQ6IG5ldyBEYXRlKClcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIOWIm+W7uuWFqOWxgOebkeaOp+WunuS+i1xyXG5leHBvcnQgY29uc3QgZGF0YWJhc2VNb25pdG9yID0gbmV3IERhdGFiYXNlTW9uaXRvcigpXHJcblxyXG4vLyDlr7zlh7rmgKfog73kvJjljJbnu4Tku7bnsbvlnotcclxuZXhwb3J0IHtcclxuICBQZXJmb3JtYW5jZU9wdGltaXphdGlvbkNvb3JkaW5hdG9yLFxyXG4gIENvbm5lY3Rpb25Qb29sQW5hbHl6ZXIsXHJcbiAgRHluYW1pY1Bvb2xBZGp1c3RlcixcclxuICBRdWVyeVBlcmZvcm1hbmNlT3B0aW1pemVyLFxyXG4gIEludGVsbGlnZW50Q2FjaGVNYW5hZ2VyLFxyXG4gIENhY2hlU3RyYXRlZ3lPcHRpbWl6ZXIsXHJcbiAgUGVyZm9ybWFuY2VNb25pdG9yRW5oYW5jZXJcclxufVxyXG5cclxuLy8g5aaC5p6c5ZCv55So5LqG55uR5o6n77yM6Ieq5Yqo5byA5aeL55uR5o6nXHJcbmlmIChwcm9jZXNzLmVudi5EQl9NT05JVE9SSU5HX0VOQUJMRUQgPT09ICd0cnVlJykge1xyXG4gIGRhdGFiYXNlTW9uaXRvci5zdGFydE1vbml0b3JpbmcoKVxyXG4gIFxyXG4gIC8vIOebkeWQrOWRiuitpuS6i+S7tlxyXG4gIGRhdGFiYXNlTW9uaXRvci5vbignYWxlcnQnLCAoYWxlcnQ6IEFsZXJ0KSA9PiB7XHJcbiAgICAvLyDov5nph4zlj6/ku6Xpm4bmiJDlpJbpg6jlkYrorabns7vnu5/vvIzlpoLpgq7ku7bjgIFTbGFja+OAgemSiemSieetiVxyXG4gICAgaWYgKGFsZXJ0LmxldmVsID09PSBBbGVydExldmVsLkNSSVRJQ0FMKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NSSVRJQ0FMIERBVEFCQVNFIEFMRVJUOicsIGFsZXJ0Lm1lc3NhZ2UpXHJcbiAgICAgIC8vIOWPr+S7peWcqOi/memHjOWPkemAgee0p+aApemAmuefpVxyXG4gICAgfVxyXG4gIH0pXHJcbiAgXHJcbiAgLy8g55uR5ZCs5oyH5qCH5LqL5Lu2XHJcbiAgZGF0YWJhc2VNb25pdG9yLm9uKCdtZXRyaWNzJywgKG1ldHJpY3M6IERhdGFiYXNlTWV0cmljcykgPT4ge1xyXG4gICAgLy8g6L+Z6YeM5Y+v5Lul5bCG5oyH5qCH5Y+R6YCB5Yiw5aSW6YOo55uR5o6n57O757uf77yM5aaCUHJvbWV0aGV1c+OAgUluZmx1eERC562JXHJcbiAgICBpZiAocHJvY2Vzcy5lbnYuREJfTUVUUklDU19DT0xMRUNUSU9OID09PSAndHJ1ZScpIHtcclxuICAgICAgLy8g5Y+R6YCB5oyH5qCH5Yiw5aSW6YOo57O757ufXHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG5cclxuLy8g5a+85Ye65L6/5o235Ye95pWwXHJcbmV4cG9ydCBjb25zdCBzdGFydERhdGFiYXNlTW9uaXRvcmluZyA9ICgpID0+IGRhdGFiYXNlTW9uaXRvci5zdGFydE1vbml0b3JpbmcoKVxyXG5leHBvcnQgY29uc3Qgc3RvcERhdGFiYXNlTW9uaXRvcmluZyA9ICgpID0+IGRhdGFiYXNlTW9uaXRvci5zdG9wTW9uaXRvcmluZygpXHJcbmV4cG9ydCBjb25zdCBnZXREYXRhYmFzZU1ldHJpY3MgPSAoKSA9PiBkYXRhYmFzZU1vbml0b3IuZ2V0TWV0cmljc0hpc3RvcnkoMSlbMF1cclxuZXhwb3J0IGNvbnN0IGdldERhdGFiYXNlQWxlcnRzID0gKGxldmVsPzogQWxlcnRMZXZlbCkgPT4gZGF0YWJhc2VNb25pdG9yLmdldEFsZXJ0cyhsZXZlbClcclxuZXhwb3J0IGNvbnN0IGdldERhdGFiYXNlUGVyZm9ybWFuY2VTdGF0cyA9ICh0aW1lUmFuZ2VNcz86IG51bWJlcikgPT4gXHJcbiAgZGF0YWJhc2VNb25pdG9yLmdldFBlcmZvcm1hbmNlU3RhdHModGltZVJhbmdlTXMpXHJcblxyXG4vLyDpu5jorqTlr7zlh7rnm5HmjqflmahcclxuZXhwb3J0IGRlZmF1bHQgZGF0YWJhc2VNb25pdG9yIl0sInZlcnNpb24iOjN9