{"version":3,"names":["cov_1jtq09rebw","actualCoverage","s","complete_types_1","require","AgentComplianceChecker","checkAgentDefinition","agent","f","errors","warnings","id","b","push","name","description","instructions","model","metadata","protocolVersion","AG_UI_PROTOCOL_VERSION","tools","i","length","tool","toolErrors","checkToolDefinition","variables","key","variable","Object","entries","config","timeout","retries","isCompliant","score","calculateComplianceScore","context","function","parameters","type","properties","checkMessageFormat","message","role","content","undefined","timestamp","validRoles","includes","Array","isArray","item","checkEventFormat","event","validEventTypes","threadId","runId","messageId","toolCallId","checkRuntimeCompliance","agentId","events","messages","eventTypes","Set","map","e","requiredType","requiredEventTypes","has","runEvents","filter","startsWith","firstEvent","lastEvent","messageCheck","eventCheck","errorPenalty","warningPenalty","Math","max","generateComplianceReport","agentDefinition","definitionCheck","runtimeCheck","overallScore","round","Date","now","definitionCompliance","runtimeCompliance","recommendations","generateRecommendations","exports"],"sources":["E:\\zk-agent\\lib\\ag-ui\\protocol\\agent-compliance-checker.ts"],"sourcesContent":["// @ts-nocheck\nimport type { AgentDefinition, Tool, Message, AgUIEvent } from \"./complete-types\"\nimport { AG_UI_PROTOCOL_VERSION } from \"./complete-types\"\n\n/**\n * AG-UI协议合规性检查器\n * 确保所有智能体都遵循AG-UI协议\n */\nexport class AgentComplianceChecker {\n  private static requiredEventTypes = [\n    \"run-started\",\n    \"run-finished\",\n    \"run-error\",\n    \"text-message-start\",\n    \"text-message-content\",\n    \"text-message-end\",\n    \"state-snapshot\",\n  ]\n\n  /**\n   * 检查智能体定义合规性\n   */\n  static checkAgentDefinition(agent: AgentDefinition): ComplianceResult {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    // 检查必需字段\n    if (!agent.id) {errors.push(\"智能体ID不能为空\")}\n    if (!agent.name) {errors.push(\"智能体名称不能为空\")}\n    if (!agent.description) {errors.push(\"智能体描述不能为空\")}\n    if (!agent.instructions) {errors.push(\"智能体指令不能为空\")}\n    if (!agent.model) {errors.push(\"智能体模型不能为空\")}\n\n    // 检查协议版本\n    if (!agent.metadata?.protocolVersion) {\n      warnings.push(\"建议指定协议版本\")\n    } else if (agent.metadata.protocolVersion !== AG_UI_PROTOCOL_VERSION) {\n      warnings.push(`协议版本不匹配，当前: ${agent.metadata.protocolVersion}, 期望: ${AG_UI_PROTOCOL_VERSION}`)\n    }\n\n    // 检查工具定义\n    if (agent.tools) {\n      for (let i = 0; i < agent.tools.length; i++) {\n        const tool = agent.tools[i]\n        const toolErrors = this.checkToolDefinition(tool, `工具[${i}]`)\n        errors.push(...toolErrors)\n      }\n    }\n\n    // 检查变量定义\n    if (agent.variables) {\n      for (const [key, variable] of Object.entries(agent.variables)) {\n        if (typeof variable !== \"object\") {\n          errors.push(`变量 ${key} 定义格式错误`)\n        }\n      }\n    }\n\n    // 检查配置\n    if (agent.config) {\n      if (agent.config.timeout && agent.config.timeout <= 0) {\n        errors.push(\"超时时间必须大于0\")\n      }\n      if (agent.config.retries && agent.config.retries < 0) {\n        errors.push(\"重试次数不能为负数\")\n      }\n    }\n\n    return {\n      isCompliant: errors.length === 0,\n      errors,\n      warnings,\n      score: this.calculateComplianceScore(errors, warnings),\n    }\n  }\n\n  /**\n   * 检查工具定义合规性\n   */\n  private static checkToolDefinition(tool: Tool, context: string): string[] {\n    const errors: string[] = []\n\n    if (!tool.function?.name) {\n      errors.push(`${context}: 工具名称不能为空`)\n    }\n\n    if (!tool.function?.description) {\n      errors.push(`${context}: 工具描述不能为空`)\n    }\n\n    if (!tool.function?.parameters) {\n      errors.push(`${context}: 工具参数定义不能为空`)\n    } else {\n      if (tool.function.parameters.type !== \"object\") {\n        errors.push(`${context}: 工具参数类型必须为object`)\n      }\n\n      if (!tool.function.parameters.properties) {\n        errors.push(`${context}: 工具参数属性不能为空`)\n      }\n    }\n\n    return errors\n  }\n\n  /**\n   * 检查消息格式合规性\n   */\n  static checkMessageFormat(message: Message): ComplianceResult {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    // 检查必需字段\n    if (!message.id) {errors.push(\"消息ID不能为空\")}\n    if (!message.role) {errors.push(\"消息角色不能为空\")}\n    if (message.content === undefined || message.content === null) {\n      errors.push(\"消息内容不能为空\")\n    }\n    if (!message.timestamp) {errors.push(\"消息时间戳不能为空\")}\n\n    // 检查角色有效性\n    const validRoles = [\"user\", \"assistant\", \"system\", \"tool\"]\n    if (message.role && !validRoles.includes(message.role)) {\n      errors.push(`无效的消息角色: ${message.role}`)\n    }\n\n    // 检查内容格式\n    if (typeof message.content === \"string\") {\n      if (message.content.length > 100000) {\n        warnings.push(\"消息内容过长，可能影响性能\")\n      }\n    } else if (Array.isArray(message.content)) {\n      // 检查工具调用格式\n      for (let i = 0; i < message.content.length; i++) {\n        const item = message.content[i]\n        if (!item.id || !item.type || !item.function) {\n          errors.push(`工具调用[${i}]格式错误`)\n        }\n      }\n    }\n\n    return {\n      isCompliant: errors.length === 0,\n      errors,\n      warnings,\n      score: this.calculateComplianceScore(errors, warnings),\n    }\n  }\n\n  /**\n   * 检查事件格式合规性\n   */\n  static checkEventFormat(event: AgUIEvent): ComplianceResult {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    // 检查必需字段\n    if (!event.type) {errors.push(\"事件类型不能为空\")}\n    if (!event.timestamp) {errors.push(\"事件时间戳不能为空\")}\n\n    // 检查事件类型有效性\n    const validEventTypes = [\n      \"run-started\",\n      \"run-finished\",\n      \"run-error\",\n      \"run-cancelled\",\n      \"run-paused\",\n      \"run-resumed\",\n      \"text-message-start\",\n      \"text-message-content\",\n      \"text-message-end\",\n      \"image-message\",\n      \"audio-message\",\n      \"video-message\",\n      \"file-message\",\n      \"tool-call-start\",\n      \"tool-call-args\",\n      \"tool-call-progress\",\n      \"tool-call-result\",\n      \"tool-call-end\",\n      \"state-snapshot\",\n      \"state-delta\",\n      \"state-reset\",\n      \"state-validation\",\n      \"user-input-start\",\n      \"user-input-end\",\n      \"user-feedback\",\n      \"system-status\",\n      \"system-metrics\",\n      \"system-log\",\n      \"collaboration-join\",\n      \"collaboration-leave\",\n      \"collaboration-cursor\",\n      \"collaboration-edit\",\n      \"custom\",\n    ]\n\n    if (!validEventTypes.includes(event.type)) {\n      warnings.push(`未知的事件类型: ${event.type}`)\n    }\n\n    // 检查特定事件的必需字段\n    switch (event.type) {\n      case \"run-started\":\n      case \"run-finished\":\n      case \"run-error\":\n        if (!(event as any).threadId) {errors.push(\"运行事件必须包含threadId\")}\n        if (!(event as any).runId) {errors.push(\"运行事件必须包含runId\")}\n        break\n\n      case \"text-message-start\":\n      case \"text-message-content\":\n      case \"text-message-end\":\n        if (!(event as any).messageId) {errors.push(\"消息事件必须包含messageId\")}\n        break\n\n      case \"tool-call-start\":\n      case \"tool-call-args\":\n      case \"tool-call-result\":\n      case \"tool-call-end\":\n        if (!(event as any).toolCallId) {errors.push(\"工具调用事件必须包含toolCallId\")}\n        break\n    }\n\n    return {\n      isCompliant: errors.length === 0,\n      errors,\n      warnings,\n      score: this.calculateComplianceScore(errors, warnings),\n    }\n  }\n\n  /**\n   * 检查智能体运行时合规性\n   */\n  static checkRuntimeCompliance(agentId: string, events: AgUIEvent[], messages: Message[]): ComplianceResult {\n    const errors: string[] = []\n    const warnings: string[] = []\n\n    // 检查必需事件是否存在\n    const eventTypes = new Set(events.map((e) => e.type))\n    for (const requiredType of this.requiredEventTypes) {\n      if (!eventTypes.has(requiredType)) {\n        warnings.push(`缺少必需事件类型: ${requiredType}`)\n      }\n    }\n\n    // 检查事件顺序\n    const runEvents = events.filter((e) => e.type.startsWith(\"run-\"))\n    if (runEvents.length > 0) {\n      const firstEvent = runEvents[0]\n      const lastEvent = runEvents[runEvents.length - 1]\n\n      if (firstEvent.type !== \"run-started\") {\n        errors.push(\"运行事件序列必须以run-started开始\")\n      }\n\n      if (![\"run-finished\", \"run-error\", \"run-cancelled\"].includes(lastEvent.type)) {\n        warnings.push(\"运行事件序列应该以run-finished、run-error或run-cancelled结束\")\n      }\n    }\n\n    // 检查消息完整性\n    for (const message of messages) {\n      const messageCheck = this.checkMessageFormat(message)\n      errors.push(...messageCheck.errors)\n      warnings.push(...messageCheck.warnings)\n    }\n\n    // 检查事件完整性\n    for (const event of events) {\n      const eventCheck = this.checkEventFormat(event)\n      errors.push(...eventCheck.errors)\n      warnings.push(...eventCheck.warnings)\n    }\n\n    return {\n      isCompliant: errors.length === 0,\n      errors,\n      warnings,\n      score: this.calculateComplianceScore(errors, warnings),\n    }\n  }\n\n  /**\n   * 计算合规性评分\n   */\n  private static calculateComplianceScore(errors: string[], warnings: string[]): number {\n    const errorPenalty = errors.length * 20\n    const warningPenalty = warnings.length * 5\n    return Math.max(0, 100 - errorPenalty - warningPenalty)\n  }\n\n  /**\n   * 生成合规性报告\n   */\n  static generateComplianceReport(\n    agentId: string,\n    agentDefinition: AgentDefinition,\n    events: AgUIEvent[],\n    messages: Message[],\n  ): ComplianceReport {\n    const definitionCheck = this.checkAgentDefinition(agentDefinition)\n    const runtimeCheck = this.checkRuntimeCompliance(agentId, events, messages)\n\n    const overallScore = Math.round((definitionCheck.score + runtimeCheck.score) / 2)\n    const isCompliant = definitionCheck.isCompliant && runtimeCheck.isCompliant\n\n    return {\n      agentId,\n      timestamp: Date.now(),\n      isCompliant,\n      overallScore,\n      definitionCompliance: definitionCheck,\n      runtimeCompliance: runtimeCheck,\n      recommendations: this.generateRecommendations(definitionCheck, runtimeCheck),\n    }\n  }\n\n  /**\n   * 生成改进建议\n   */\n  private static generateRecommendations(definitionCheck: ComplianceResult, runtimeCheck: ComplianceResult): string[] {\n    const recommendations: string[] = []\n\n    if (definitionCheck.errors.length > 0) {\n      recommendations.push(\"修复智能体定义中的错误\")\n    }\n\n    if (runtimeCheck.errors.length > 0) {\n      recommendations.push(\"修复运行时错误\")\n    }\n\n    if (definitionCheck.warnings.length > 0) {\n      recommendations.push(\"改进智能体定义以提高合规性\")\n    }\n\n    if (runtimeCheck.warnings.length > 0) {\n      recommendations.push(\"优化运行时事件处理\")\n    }\n\n    if (definitionCheck.score < 80) {\n      recommendations.push(\"智能体定义需要重大改进\")\n    }\n\n    if (runtimeCheck.score < 80) {\n      recommendations.push(\"运行时实现需要重大改进\")\n    }\n\n    return recommendations\n  }\n}\n\n// 类型定义\nexport interface ComplianceResult {\n  isCompliant: boolean\n  errors: string[]\n  warnings: string[]\n  score: number\n}\n\nexport interface ComplianceReport {\n  agentId: string\n  timestamp: number\n  isCompliant: boolean\n  overallScore: number\n  definitionCompliance: ComplianceResult\n  runtimeCompliance: ComplianceResult\n  recommendations: string[]\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IA0BI;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;;;;AAxBJ,MAAAC,gBAAA;AAAA;AAAA,CAAAH,cAAA,GAAAE,CAAA,OAAAE,OAAA;AAEA;;;;AAIA,MAAaC,sBAAsB;EAWjC;;;EAGA,OAAOC,oBAAoBA,CAACC,KAAsB;IAAA;IAAAP,cAAA,GAAAQ,CAAA;IAChD,MAAMC,MAAM;IAAA;IAAA,CAAAT,cAAA,GAAAE,CAAA,OAAa,EAAE;IAC3B,MAAMQ,QAAQ;IAAA;IAAA,CAAAV,cAAA,GAAAE,CAAA,OAAa,EAAE;IAE7B;IAAA;IAAAF,cAAA,GAAAE,CAAA;IACA,IAAI,CAACK,KAAK,CAACI,EAAE,EAAE;MAAA;MAAAX,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IACzC,IAAI,CAACK,KAAK,CAACO,IAAI,EAAE;MAAA;MAAAd,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAC3C,IAAI,CAACK,KAAK,CAACQ,WAAW,EAAE;MAAA;MAAAf,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAClD,IAAI,CAACK,KAAK,CAACS,YAAY,EAAE;MAAA;MAAAhB,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IACnD,IAAI,CAACK,KAAK,CAACU,KAAK,EAAE;MAAA;MAAAjB,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAE5C;IAAAZ,cAAA,GAAAE,CAAA;IACA,IAAI,CAACK,KAAK,CAACW,QAAQ,EAAEC,eAAe,EAAE;MAAA;MAAAnB,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACpCQ,QAAQ,CAACG,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC,MAAM;MAAA;MAAAb,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAAA,IAAIK,KAAK,CAACW,QAAQ,CAACC,eAAe,KAAKhB,gBAAA,CAAAiB,sBAAsB,EAAE;QAAA;QAAApB,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACpEQ,QAAQ,CAACG,IAAI,CAAC,eAAeN,KAAK,CAACW,QAAQ,CAACC,eAAe,SAAShB,gBAAA,CAAAiB,sBAAsB,EAAE,CAAC;MAC/F,CAAC;MAAA;MAAA;QAAApB,cAAA,GAAAY,CAAA;MAAA;IAAD;IAEA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IACA,IAAIK,KAAK,CAACc,KAAK,EAAE;MAAA;MAAArB,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACf,KAAK,IAAIoB,CAAC;MAAA;MAAA,CAAAtB,cAAA,GAAAE,CAAA,QAAG,CAAC,GAAEoB,CAAC,GAAGf,KAAK,CAACc,KAAK,CAACE,MAAM,EAAED,CAAC,EAAE,EAAE;QAC3C,MAAME,IAAI;QAAA;QAAA,CAAAxB,cAAA,GAAAE,CAAA,QAAGK,KAAK,CAACc,KAAK,CAACC,CAAC,CAAC;QAC3B,MAAMG,UAAU;QAAA;QAAA,CAAAzB,cAAA,GAAAE,CAAA,QAAG,IAAI,CAACwB,mBAAmB,CAACF,IAAI,EAAE,MAAMF,CAAC,GAAG,CAAC;QAAA;QAAAtB,cAAA,GAAAE,CAAA;QAC7DO,MAAM,CAACI,IAAI,CAAC,GAAGY,UAAU,CAAC;MAC5B;IACF,CAAC;IAAA;IAAA;MAAAzB,cAAA,GAAAY,CAAA;IAAA;IAED;IAAAZ,cAAA,GAAAE,CAAA;IACA,IAAIK,KAAK,CAACoB,SAAS,EAAE;MAAA;MAAA3B,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACnB,KAAK,MAAM,CAAC0B,GAAG,EAAEC,QAAQ,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACxB,KAAK,CAACoB,SAAS,CAAC,EAAE;QAAA;QAAA3B,cAAA,GAAAE,CAAA;QAC7D,IAAI,OAAO2B,QAAQ,KAAK,QAAQ,EAAE;UAAA;UAAA7B,cAAA,GAAAY,CAAA;UAAAZ,cAAA,GAAAE,CAAA;UAChCO,MAAM,CAACI,IAAI,CAAC,MAAMe,GAAG,SAAS,CAAC;QACjC,CAAC;QAAA;QAAA;UAAA5B,cAAA,GAAAY,CAAA;QAAA;MACH;IACF,CAAC;IAAA;IAAA;MAAAZ,cAAA,GAAAY,CAAA;IAAA;IAED;IAAAZ,cAAA,GAAAE,CAAA;IACA,IAAIK,KAAK,CAACyB,MAAM,EAAE;MAAA;MAAAhC,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAChB;MAAI;MAAA,CAAAF,cAAA,GAAAY,CAAA,WAAAL,KAAK,CAACyB,MAAM,CAACC,OAAO;MAAA;MAAA,CAAAjC,cAAA,GAAAY,CAAA,WAAIL,KAAK,CAACyB,MAAM,CAACC,OAAO,IAAI,CAAC,GAAE;QAAA;QAAAjC,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACrDO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;MAC1B,CAAC;MAAA;MAAA;QAAAb,cAAA,GAAAY,CAAA;MAAA;MAAAZ,cAAA,GAAAE,CAAA;MACD;MAAI;MAAA,CAAAF,cAAA,GAAAY,CAAA,WAAAL,KAAK,CAACyB,MAAM,CAACE,OAAO;MAAA;MAAA,CAAAlC,cAAA,GAAAY,CAAA,WAAIL,KAAK,CAACyB,MAAM,CAACE,OAAO,GAAG,CAAC,GAAE;QAAA;QAAAlC,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACpDO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;MAC1B,CAAC;MAAA;MAAA;QAAAb,cAAA,GAAAY,CAAA;MAAA;IACH,CAAC;IAAA;IAAA;MAAAZ,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,OAAO;MACLiC,WAAW,EAAE1B,MAAM,CAACc,MAAM,KAAK,CAAC;MAChCd,MAAM;MACNC,QAAQ;MACR0B,KAAK,EAAE,IAAI,CAACC,wBAAwB,CAAC5B,MAAM,EAAEC,QAAQ;KACtD;EACH;EAEA;;;EAGQ,OAAOgB,mBAAmBA,CAACF,IAAU,EAAEc,OAAe;IAAA;IAAAtC,cAAA,GAAAQ,CAAA;IAC5D,MAAMC,MAAM;IAAA;IAAA,CAAAT,cAAA,GAAAE,CAAA,QAAa,EAAE;IAAA;IAAAF,cAAA,GAAAE,CAAA;IAE3B,IAAI,CAACsB,IAAI,CAACe,QAAQ,EAAEzB,IAAI,EAAE;MAAA;MAAAd,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACxBO,MAAM,CAACI,IAAI,CAAC,GAAGyB,OAAO,YAAY,CAAC;IACrC,CAAC;IAAA;IAAA;MAAAtC,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,IAAI,CAACsB,IAAI,CAACe,QAAQ,EAAExB,WAAW,EAAE;MAAA;MAAAf,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAC/BO,MAAM,CAACI,IAAI,CAAC,GAAGyB,OAAO,YAAY,CAAC;IACrC,CAAC;IAAA;IAAA;MAAAtC,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,IAAI,CAACsB,IAAI,CAACe,QAAQ,EAAEC,UAAU,EAAE;MAAA;MAAAxC,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAC9BO,MAAM,CAACI,IAAI,CAAC,GAAGyB,OAAO,cAAc,CAAC;IACvC,CAAC,MAAM;MAAA;MAAAtC,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACL,IAAIsB,IAAI,CAACe,QAAQ,CAACC,UAAU,CAACC,IAAI,KAAK,QAAQ,EAAE;QAAA;QAAAzC,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QAC9CO,MAAM,CAACI,IAAI,CAAC,GAAGyB,OAAO,mBAAmB,CAAC;MAC5C,CAAC;MAAA;MAAA;QAAAtC,cAAA,GAAAY,CAAA;MAAA;MAAAZ,cAAA,GAAAE,CAAA;MAED,IAAI,CAACsB,IAAI,CAACe,QAAQ,CAACC,UAAU,CAACE,UAAU,EAAE;QAAA;QAAA1C,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACxCO,MAAM,CAACI,IAAI,CAAC,GAAGyB,OAAO,cAAc,CAAC;MACvC,CAAC;MAAA;MAAA;QAAAtC,cAAA,GAAAY,CAAA;MAAA;IACH;IAAC;IAAAZ,cAAA,GAAAE,CAAA;IAED,OAAOO,MAAM;EACf;EAEA;;;EAGA,OAAOkC,kBAAkBA,CAACC,OAAgB;IAAA;IAAA5C,cAAA,GAAAQ,CAAA;IACxC,MAAMC,MAAM;IAAA;IAAA,CAAAT,cAAA,GAAAE,CAAA,QAAa,EAAE;IAC3B,MAAMQ,QAAQ;IAAA;IAAA,CAAAV,cAAA,GAAAE,CAAA,QAAa,EAAE;IAE7B;IAAA;IAAAF,cAAA,GAAAE,CAAA;IACA,IAAI,CAAC0C,OAAO,CAACjC,EAAE,EAAE;MAAA;MAAAX,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,UAAU,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAC1C,IAAI,CAAC0C,OAAO,CAACC,IAAI,EAAE;MAAA;MAAA7C,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,UAAU,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAC5C;IAAI;IAAA,CAAAF,cAAA,GAAAY,CAAA,WAAAgC,OAAO,CAACE,OAAO,KAAKC,SAAS;IAAA;IAAA,CAAA/C,cAAA,GAAAY,CAAA,WAAIgC,OAAO,CAACE,OAAO,KAAK,IAAI,GAAE;MAAA;MAAA9C,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAC7DO,MAAM,CAACI,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IACD,IAAI,CAAC0C,OAAO,CAACI,SAAS,EAAE;MAAA;MAAAhD,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAElD;IACA,MAAMqC,UAAU;IAAA;IAAA,CAAAjD,cAAA,GAAAE,CAAA,QAAG,CAAC,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,CAAC;IAAA;IAAAF,cAAA,GAAAE,CAAA;IAC1D;IAAI;IAAA,CAAAF,cAAA,GAAAY,CAAA,WAAAgC,OAAO,CAACC,IAAI;IAAA;IAAA,CAAA7C,cAAA,GAAAY,CAAA,WAAI,CAACqC,UAAU,CAACC,QAAQ,CAACN,OAAO,CAACC,IAAI,CAAC,GAAE;MAAA;MAAA7C,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACtDO,MAAM,CAACI,IAAI,CAAC,YAAY+B,OAAO,CAACC,IAAI,EAAE,CAAC;IACzC,CAAC;IAAA;IAAA;MAAA7C,cAAA,GAAAY,CAAA;IAAA;IAED;IAAAZ,cAAA,GAAAE,CAAA;IACA,IAAI,OAAO0C,OAAO,CAACE,OAAO,KAAK,QAAQ,EAAE;MAAA;MAAA9C,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACvC,IAAI0C,OAAO,CAACE,OAAO,CAACvB,MAAM,GAAG,MAAM,EAAE;QAAA;QAAAvB,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACnCQ,QAAQ,CAACG,IAAI,CAAC,eAAe,CAAC;MAChC,CAAC;MAAA;MAAA;QAAAb,cAAA,GAAAY,CAAA;MAAA;IACH,CAAC,MAAM;MAAA;MAAAZ,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAAA,IAAIiD,KAAK,CAACC,OAAO,CAACR,OAAO,CAACE,OAAO,CAAC,EAAE;QAAA;QAAA9C,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACzC;QACA,KAAK,IAAIoB,CAAC;QAAA;QAAA,CAAAtB,cAAA,GAAAE,CAAA,QAAG,CAAC,GAAEoB,CAAC,GAAGsB,OAAO,CAACE,OAAO,CAACvB,MAAM,EAAED,CAAC,EAAE,EAAE;UAC/C,MAAM+B,IAAI;UAAA;UAAA,CAAArD,cAAA,GAAAE,CAAA,QAAG0C,OAAO,CAACE,OAAO,CAACxB,CAAC,CAAC;UAAA;UAAAtB,cAAA,GAAAE,CAAA;UAC/B;UAAI;UAAA,CAAAF,cAAA,GAAAY,CAAA,YAACyC,IAAI,CAAC1C,EAAE;UAAA;UAAA,CAAAX,cAAA,GAAAY,CAAA,WAAI,CAACyC,IAAI,CAACZ,IAAI;UAAA;UAAA,CAAAzC,cAAA,GAAAY,CAAA,WAAI,CAACyC,IAAI,CAACd,QAAQ,GAAE;YAAA;YAAAvC,cAAA,GAAAY,CAAA;YAAAZ,cAAA,GAAAE,CAAA;YAC5CO,MAAM,CAACI,IAAI,CAAC,QAAQS,CAAC,OAAO,CAAC;UAC/B,CAAC;UAAA;UAAA;YAAAtB,cAAA,GAAAY,CAAA;UAAA;QACH;MACF,CAAC;MAAA;MAAA;QAAAZ,cAAA,GAAAY,CAAA;MAAA;IAAD;IAAC;IAAAZ,cAAA,GAAAE,CAAA;IAED,OAAO;MACLiC,WAAW,EAAE1B,MAAM,CAACc,MAAM,KAAK,CAAC;MAChCd,MAAM;MACNC,QAAQ;MACR0B,KAAK,EAAE,IAAI,CAACC,wBAAwB,CAAC5B,MAAM,EAAEC,QAAQ;KACtD;EACH;EAEA;;;EAGA,OAAO4C,gBAAgBA,CAACC,KAAgB;IAAA;IAAAvD,cAAA,GAAAQ,CAAA;IACtC,MAAMC,MAAM;IAAA;IAAA,CAAAT,cAAA,GAAAE,CAAA,QAAa,EAAE;IAC3B,MAAMQ,QAAQ;IAAA;IAAA,CAAAV,cAAA,GAAAE,CAAA,QAAa,EAAE;IAE7B;IAAA;IAAAF,cAAA,GAAAE,CAAA;IACA,IAAI,CAACqD,KAAK,CAACd,IAAI,EAAE;MAAA;MAAAzC,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,UAAU,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAC1C,IAAI,CAACqD,KAAK,CAACP,SAAS,EAAE;MAAA;MAAAhD,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAACO,MAAM,CAACI,IAAI,CAAC,WAAW,CAAC;IAAA,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAEhD;IACA,MAAM4C,eAAe;IAAA;IAAA,CAAAxD,cAAA,GAAAE,CAAA,QAAG,CACtB,aAAa,EACb,cAAc,EACd,WAAW,EACX,eAAe,EACf,YAAY,EACZ,aAAa,EACb,oBAAoB,EACpB,sBAAsB,EACtB,kBAAkB,EAClB,eAAe,EACf,eAAe,EACf,eAAe,EACf,cAAc,EACd,iBAAiB,EACjB,gBAAgB,EAChB,oBAAoB,EACpB,kBAAkB,EAClB,eAAe,EACf,gBAAgB,EAChB,aAAa,EACb,aAAa,EACb,kBAAkB,EAClB,kBAAkB,EAClB,gBAAgB,EAChB,eAAe,EACf,eAAe,EACf,gBAAgB,EAChB,YAAY,EACZ,oBAAoB,EACpB,qBAAqB,EACrB,sBAAsB,EACtB,oBAAoB,EACpB,QAAQ,CACT;IAAA;IAAAF,cAAA,GAAAE,CAAA;IAED,IAAI,CAACsD,eAAe,CAACN,QAAQ,CAACK,KAAK,CAACd,IAAI,CAAC,EAAE;MAAA;MAAAzC,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACzCQ,QAAQ,CAACG,IAAI,CAAC,YAAY0C,KAAK,CAACd,IAAI,EAAE,CAAC;IACzC,CAAC;IAAA;IAAA;MAAAzC,cAAA,GAAAY,CAAA;IAAA;IAED;IAAAZ,cAAA,GAAAE,CAAA;IACA,QAAQqD,KAAK,CAACd,IAAI;MAChB,KAAK,aAAa;QAAA;QAAAzC,cAAA,GAAAY,CAAA;MAClB,KAAK,cAAc;QAAA;QAAAZ,cAAA,GAAAY,CAAA;MACnB,KAAK,WAAW;QAAA;QAAAZ,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACd,IAAI,CAAEqD,KAAa,CAACE,QAAQ,EAAE;UAAA;UAAAzD,cAAA,GAAAY,CAAA;UAAAZ,cAAA,GAAAE,CAAA;UAACO,MAAM,CAACI,IAAI,CAAC,kBAAkB,CAAC;QAAA,CAAC;QAAA;QAAA;UAAAb,cAAA,GAAAY,CAAA;QAAA;QAAAZ,cAAA,GAAAE,CAAA;QAC/D,IAAI,CAAEqD,KAAa,CAACG,KAAK,EAAE;UAAA;UAAA1D,cAAA,GAAAY,CAAA;UAAAZ,cAAA,GAAAE,CAAA;UAACO,MAAM,CAACI,IAAI,CAAC,eAAe,CAAC;QAAA,CAAC;QAAA;QAAA;UAAAb,cAAA,GAAAY,CAAA;QAAA;QAAAZ,cAAA,GAAAE,CAAA;QACzD;MAEF,KAAK,oBAAoB;QAAA;QAAAF,cAAA,GAAAY,CAAA;MACzB,KAAK,sBAAsB;QAAA;QAAAZ,cAAA,GAAAY,CAAA;MAC3B,KAAK,kBAAkB;QAAA;QAAAZ,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACrB,IAAI,CAAEqD,KAAa,CAACI,SAAS,EAAE;UAAA;UAAA3D,cAAA,GAAAY,CAAA;UAAAZ,cAAA,GAAAE,CAAA;UAACO,MAAM,CAACI,IAAI,CAAC,mBAAmB,CAAC;QAAA,CAAC;QAAA;QAAA;UAAAb,cAAA,GAAAY,CAAA;QAAA;QAAAZ,cAAA,GAAAE,CAAA;QACjE;MAEF,KAAK,iBAAiB;QAAA;QAAAF,cAAA,GAAAY,CAAA;MACtB,KAAK,gBAAgB;QAAA;QAAAZ,cAAA,GAAAY,CAAA;MACrB,KAAK,kBAAkB;QAAA;QAAAZ,cAAA,GAAAY,CAAA;MACvB,KAAK,eAAe;QAAA;QAAAZ,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QAClB,IAAI,CAAEqD,KAAa,CAACK,UAAU,EAAE;UAAA;UAAA5D,cAAA,GAAAY,CAAA;UAAAZ,cAAA,GAAAE,CAAA;UAACO,MAAM,CAACI,IAAI,CAAC,sBAAsB,CAAC;QAAA,CAAC;QAAA;QAAA;UAAAb,cAAA,GAAAY,CAAA;QAAA;QAAAZ,cAAA,GAAAE,CAAA;QACrE;IACJ;IAAC;IAAAF,cAAA,GAAAE,CAAA;IAED,OAAO;MACLiC,WAAW,EAAE1B,MAAM,CAACc,MAAM,KAAK,CAAC;MAChCd,MAAM;MACNC,QAAQ;MACR0B,KAAK,EAAE,IAAI,CAACC,wBAAwB,CAAC5B,MAAM,EAAEC,QAAQ;KACtD;EACH;EAEA;;;EAGA,OAAOmD,sBAAsBA,CAACC,OAAe,EAAEC,MAAmB,EAAEC,QAAmB;IAAA;IAAAhE,cAAA,GAAAQ,CAAA;IACrF,MAAMC,MAAM;IAAA;IAAA,CAAAT,cAAA,GAAAE,CAAA,QAAa,EAAE;IAC3B,MAAMQ,QAAQ;IAAA;IAAA,CAAAV,cAAA,GAAAE,CAAA,QAAa,EAAE;IAE7B;IACA,MAAM+D,UAAU;IAAA;IAAA,CAAAjE,cAAA,GAAAE,CAAA,QAAG,IAAIgE,GAAG,CAACH,MAAM,CAACI,GAAG,CAAEC,CAAC,IAAK;MAAA;MAAApE,cAAA,GAAAQ,CAAA;MAAAR,cAAA,GAAAE,CAAA;MAAA,OAAAkE,CAAC,CAAC3B,IAAI;IAAJ,CAAI,CAAC,CAAC;IAAA;IAAAzC,cAAA,GAAAE,CAAA;IACrD,KAAK,MAAMmE,YAAY,IAAI,IAAI,CAACC,kBAAkB,EAAE;MAAA;MAAAtE,cAAA,GAAAE,CAAA;MAClD,IAAI,CAAC+D,UAAU,CAACM,GAAG,CAACF,YAAY,CAAC,EAAE;QAAA;QAAArE,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACjCQ,QAAQ,CAACG,IAAI,CAAC,aAAawD,YAAY,EAAE,CAAC;MAC5C,CAAC;MAAA;MAAA;QAAArE,cAAA,GAAAY,CAAA;MAAA;IACH;IAEA;IACA,MAAM4D,SAAS;IAAA;IAAA,CAAAxE,cAAA,GAAAE,CAAA,QAAG6D,MAAM,CAACU,MAAM,CAAEL,CAAC,IAAK;MAAA;MAAApE,cAAA,GAAAQ,CAAA;MAAAR,cAAA,GAAAE,CAAA;MAAA,OAAAkE,CAAC,CAAC3B,IAAI,CAACiC,UAAU,CAAC,MAAM,CAAC;IAAD,CAAC,CAAC;IAAA;IAAA1E,cAAA,GAAAE,CAAA;IACjE,IAAIsE,SAAS,CAACjD,MAAM,GAAG,CAAC,EAAE;MAAA;MAAAvB,cAAA,GAAAY,CAAA;MACxB,MAAM+D,UAAU;MAAA;MAAA,CAAA3E,cAAA,GAAAE,CAAA,SAAGsE,SAAS,CAAC,CAAC,CAAC;MAC/B,MAAMI,SAAS;MAAA;MAAA,CAAA5E,cAAA,GAAAE,CAAA,SAAGsE,SAAS,CAACA,SAAS,CAACjD,MAAM,GAAG,CAAC,CAAC;MAAA;MAAAvB,cAAA,GAAAE,CAAA;MAEjD,IAAIyE,UAAU,CAAClC,IAAI,KAAK,aAAa,EAAE;QAAA;QAAAzC,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QACrCO,MAAM,CAACI,IAAI,CAAC,wBAAwB,CAAC;MACvC,CAAC;MAAA;MAAA;QAAAb,cAAA,GAAAY,CAAA;MAAA;MAAAZ,cAAA,GAAAE,CAAA;MAED,IAAI,CAAC,CAAC,cAAc,EAAE,WAAW,EAAE,eAAe,CAAC,CAACgD,QAAQ,CAAC0B,SAAS,CAACnC,IAAI,CAAC,EAAE;QAAA;QAAAzC,cAAA,GAAAY,CAAA;QAAAZ,cAAA,GAAAE,CAAA;QAC5EQ,QAAQ,CAACG,IAAI,CAAC,iDAAiD,CAAC;MAClE,CAAC;MAAA;MAAA;QAAAb,cAAA,GAAAY,CAAA;MAAA;IACH,CAAC;IAAA;IAAA;MAAAZ,cAAA,GAAAY,CAAA;IAAA;IAED;IAAAZ,cAAA,GAAAE,CAAA;IACA,KAAK,MAAM0C,OAAO,IAAIoB,QAAQ,EAAE;MAC9B,MAAMa,YAAY;MAAA;MAAA,CAAA7E,cAAA,GAAAE,CAAA,SAAG,IAAI,CAACyC,kBAAkB,CAACC,OAAO,CAAC;MAAA;MAAA5C,cAAA,GAAAE,CAAA;MACrDO,MAAM,CAACI,IAAI,CAAC,GAAGgE,YAAY,CAACpE,MAAM,CAAC;MAAA;MAAAT,cAAA,GAAAE,CAAA;MACnCQ,QAAQ,CAACG,IAAI,CAAC,GAAGgE,YAAY,CAACnE,QAAQ,CAAC;IACzC;IAEA;IAAA;IAAAV,cAAA,GAAAE,CAAA;IACA,KAAK,MAAMqD,KAAK,IAAIQ,MAAM,EAAE;MAC1B,MAAMe,UAAU;MAAA;MAAA,CAAA9E,cAAA,GAAAE,CAAA,SAAG,IAAI,CAACoD,gBAAgB,CAACC,KAAK,CAAC;MAAA;MAAAvD,cAAA,GAAAE,CAAA;MAC/CO,MAAM,CAACI,IAAI,CAAC,GAAGiE,UAAU,CAACrE,MAAM,CAAC;MAAA;MAAAT,cAAA,GAAAE,CAAA;MACjCQ,QAAQ,CAACG,IAAI,CAAC,GAAGiE,UAAU,CAACpE,QAAQ,CAAC;IACvC;IAAC;IAAAV,cAAA,GAAAE,CAAA;IAED,OAAO;MACLiC,WAAW,EAAE1B,MAAM,CAACc,MAAM,KAAK,CAAC;MAChCd,MAAM;MACNC,QAAQ;MACR0B,KAAK,EAAE,IAAI,CAACC,wBAAwB,CAAC5B,MAAM,EAAEC,QAAQ;KACtD;EACH;EAEA;;;EAGQ,OAAO2B,wBAAwBA,CAAC5B,MAAgB,EAAEC,QAAkB;IAAA;IAAAV,cAAA,GAAAQ,CAAA;IAC1E,MAAMuE,YAAY;IAAA;IAAA,CAAA/E,cAAA,GAAAE,CAAA,SAAGO,MAAM,CAACc,MAAM,GAAG,EAAE;IACvC,MAAMyD,cAAc;IAAA;IAAA,CAAAhF,cAAA,GAAAE,CAAA,SAAGQ,QAAQ,CAACa,MAAM,GAAG,CAAC;IAAA;IAAAvB,cAAA,GAAAE,CAAA;IAC1C,OAAO+E,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,GAAG,GAAGH,YAAY,GAAGC,cAAc,CAAC;EACzD;EAEA;;;EAGA,OAAOG,wBAAwBA,CAC7BrB,OAAe,EACfsB,eAAgC,EAChCrB,MAAmB,EACnBC,QAAmB;IAAA;IAAAhE,cAAA,GAAAQ,CAAA;IAEnB,MAAM6E,eAAe;IAAA;IAAA,CAAArF,cAAA,GAAAE,CAAA,SAAG,IAAI,CAACI,oBAAoB,CAAC8E,eAAe,CAAC;IAClE,MAAME,YAAY;IAAA;IAAA,CAAAtF,cAAA,GAAAE,CAAA,SAAG,IAAI,CAAC2D,sBAAsB,CAACC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,CAAC;IAE3E,MAAMuB,YAAY;IAAA;IAAA,CAAAvF,cAAA,GAAAE,CAAA,SAAG+E,IAAI,CAACO,KAAK,CAAC,CAACH,eAAe,CAACjD,KAAK,GAAGkD,YAAY,CAAClD,KAAK,IAAI,CAAC,CAAC;IACjF,MAAMD,WAAW;IAAA;IAAA,CAAAnC,cAAA,GAAAE,CAAA;IAAG;IAAA,CAAAF,cAAA,GAAAY,CAAA,WAAAyE,eAAe,CAAClD,WAAW;IAAA;IAAA,CAAAnC,cAAA,GAAAY,CAAA,WAAI0E,YAAY,CAACnD,WAAW;IAAA;IAAAnC,cAAA,GAAAE,CAAA;IAE3E,OAAO;MACL4D,OAAO;MACPd,SAAS,EAAEyC,IAAI,CAACC,GAAG,EAAE;MACrBvD,WAAW;MACXoD,YAAY;MACZI,oBAAoB,EAAEN,eAAe;MACrCO,iBAAiB,EAAEN,YAAY;MAC/BO,eAAe,EAAE,IAAI,CAACC,uBAAuB,CAACT,eAAe,EAAEC,YAAY;KAC5E;EACH;EAEA;;;EAGQ,OAAOQ,uBAAuBA,CAACT,eAAiC,EAAEC,YAA8B;IAAA;IAAAtF,cAAA,GAAAQ,CAAA;IACtG,MAAMqF,eAAe;IAAA;IAAA,CAAA7F,cAAA,GAAAE,CAAA,SAAa,EAAE;IAAA;IAAAF,cAAA,GAAAE,CAAA;IAEpC,IAAImF,eAAe,CAAC5E,MAAM,CAACc,MAAM,GAAG,CAAC,EAAE;MAAA;MAAAvB,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACrC2F,eAAe,CAAChF,IAAI,CAAC,aAAa,CAAC;IACrC,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,IAAIoF,YAAY,CAAC7E,MAAM,CAACc,MAAM,GAAG,CAAC,EAAE;MAAA;MAAAvB,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAClC2F,eAAe,CAAChF,IAAI,CAAC,SAAS,CAAC;IACjC,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,IAAImF,eAAe,CAAC3E,QAAQ,CAACa,MAAM,GAAG,CAAC,EAAE;MAAA;MAAAvB,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACvC2F,eAAe,CAAChF,IAAI,CAAC,eAAe,CAAC;IACvC,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,IAAIoF,YAAY,CAAC5E,QAAQ,CAACa,MAAM,GAAG,CAAC,EAAE;MAAA;MAAAvB,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MACpC2F,eAAe,CAAChF,IAAI,CAAC,WAAW,CAAC;IACnC,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,IAAImF,eAAe,CAACjD,KAAK,GAAG,EAAE,EAAE;MAAA;MAAApC,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAC9B2F,eAAe,CAAChF,IAAI,CAAC,aAAa,CAAC;IACrC,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,IAAIoF,YAAY,CAAClD,KAAK,GAAG,EAAE,EAAE;MAAA;MAAApC,cAAA,GAAAY,CAAA;MAAAZ,cAAA,GAAAE,CAAA;MAC3B2F,eAAe,CAAChF,IAAI,CAAC,aAAa,CAAC;IACrC,CAAC;IAAA;IAAA;MAAAb,cAAA,GAAAY,CAAA;IAAA;IAAAZ,cAAA,GAAAE,CAAA;IAED,OAAO2F,eAAe;EACxB;;;;AAtVFE,OAAA,CAAA1F,sBAAA,GAAAA,sBAAA;AAuVC;AAAAL,cAAA,GAAAE,CAAA;AAtVgBG,sBAAA,CAAAiE,kBAAkB,GAAG,CAClC,aAAa,EACb,cAAc,EACd,WAAW,EACX,oBAAoB,EACpB,sBAAsB,EACtB,kBAAkB,EAClB,gBAAgB,CACjB","ignoreList":[]}