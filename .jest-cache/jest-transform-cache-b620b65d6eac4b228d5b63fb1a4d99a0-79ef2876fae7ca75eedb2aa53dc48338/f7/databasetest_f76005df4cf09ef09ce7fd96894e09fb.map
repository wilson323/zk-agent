{"version":3,"names":["getDatabaseConfig","validateDatabaseConfig","require","describe","test","process","env","NODE_ENV","config","expect","toBeDefined","database","toBe","port","password","connectionString","toMatch"],"sources":["database.test.js"],"sourcesContent":["/**\r\n * @file database.test.js\r\n * @description 数据库配置测试\r\n * @author ZK-Agent Team\r\n * @date 2025-05-25\r\n */\r\n\r\nconst { getDatabaseConfig, validateDatabaseConfig } = require('../../config/database.config');\r\n\r\ndescribe('数据库配置测试', () => {\r\n  test('应该能够获取测试数据库配置', () => {\r\n    process.env.NODE_ENV = 'test';\r\n    const config = getDatabaseConfig();\r\n    \r\n    expect(config).toBeDefined();\r\n    expect(config.database).toBe('zkagent2');\r\n    expect(config.port).toBe(5432);\r\n    expect(config.password).toBe('123456');\r\n  });\r\n\r\n  test('应该能够获取生产数据库配置', () => {\r\n    process.env.NODE_ENV = 'production';\r\n    const config = getDatabaseConfig();\r\n    \r\n    expect(config).toBeDefined();\r\n    expect(config.database).toBe('zkagent1');\r\n    expect(config.port).toBe(5432);\r\n    expect(config.password).toBe('123456');\r\n  });\r\n\r\n  test('应该能够验证数据库配置', () => {\r\n    expect(validateDatabaseConfig('test')).toBe(true);\r\n    expect(validateDatabaseConfig('production')).toBe(true);\r\n    expect(validateDatabaseConfig('invalid')).toBe(false);\r\n  });\r\n\r\n  test('数据库连接字符串格式正确', () => {\r\n    process.env.NODE_ENV = 'test';\r\n    const config = getDatabaseConfig();\r\n    \r\n    expect(config.connectionString).toMatch(/^postgresql:\\/\\/postgres:123456@localhost:5432\\/zkagent2$/);\r\n  });\r\n}); "],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA,iBAAiB;EAAEC;AAAuB,CAAC,GAAGC,OAAO,CAAC,8BAA8B,CAAC;AAE7FC,QAAQ,CAAC,SAAS,EAAE,MAAM;EACxBC,IAAI,CAAC,eAAe,EAAE,MAAM;IAC1BC,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAG,MAAM;IAC7B,MAAMC,MAAM,GAAGR,iBAAiB,CAAC,CAAC;IAElCS,MAAM,CAACD,MAAM,CAAC,CAACE,WAAW,CAAC,CAAC;IAC5BD,MAAM,CAACD,MAAM,CAACG,QAAQ,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC;IACxCH,MAAM,CAACD,MAAM,CAACK,IAAI,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC;IAC9BH,MAAM,CAACD,MAAM,CAACM,QAAQ,CAAC,CAACF,IAAI,CAAC,QAAQ,CAAC;EACxC,CAAC,CAAC;EAEFR,IAAI,CAAC,eAAe,EAAE,MAAM;IAC1BC,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAG,YAAY;IACnC,MAAMC,MAAM,GAAGR,iBAAiB,CAAC,CAAC;IAElCS,MAAM,CAACD,MAAM,CAAC,CAACE,WAAW,CAAC,CAAC;IAC5BD,MAAM,CAACD,MAAM,CAACG,QAAQ,CAAC,CAACC,IAAI,CAAC,UAAU,CAAC;IACxCH,MAAM,CAACD,MAAM,CAACK,IAAI,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC;IAC9BH,MAAM,CAACD,MAAM,CAACM,QAAQ,CAAC,CAACF,IAAI,CAAC,QAAQ,CAAC;EACxC,CAAC,CAAC;EAEFR,IAAI,CAAC,aAAa,EAAE,MAAM;IACxBK,MAAM,CAACR,sBAAsB,CAAC,MAAM,CAAC,CAAC,CAACW,IAAI,CAAC,IAAI,CAAC;IACjDH,MAAM,CAACR,sBAAsB,CAAC,YAAY,CAAC,CAAC,CAACW,IAAI,CAAC,IAAI,CAAC;IACvDH,MAAM,CAACR,sBAAsB,CAAC,SAAS,CAAC,CAAC,CAACW,IAAI,CAAC,KAAK,CAAC;EACvD,CAAC,CAAC;EAEFR,IAAI,CAAC,cAAc,EAAE,MAAM;IACzBC,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAG,MAAM;IAC7B,MAAMC,MAAM,GAAGR,iBAAiB,CAAC,CAAC;IAElCS,MAAM,CAACD,MAAM,CAACO,gBAAgB,CAAC,CAACC,OAAO,CAAC,2DAA2D,CAAC;EACtG,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}