{"version":3,"names":["cov_1q7nkmot50","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","api_route_wrapper_1","require","model_manager_1","api_helper_1","core_1","exports","GET","createApiRoute","method","requireAuth","_req","params","model","aiModelManager","getModel","id","success","data","PUT","timeout","req","validatedBody","validatedQuery","user","requestId","routeParams","json","updateModel","ApiResponseWrapper","message","error","ErrorCode","VALIDATION_ERROR","DELETE","deleteModel"],"sources":["E:\\zk-agent\\app\\api\\ai-models\\[id]\\route.ts"],"sourcesContent":["/**\n * @file ai-models\\[id]\\route.ts\n * @description Migrated API route with global error handling\n * @author ZK-Agent Team\n * @date 2025-06-25\n */\n\nimport { NextRequest } from 'next/server';\nimport { createApiRoute } from '@/lib/middleware/api-route-wrapper';\nimport { aiModelManager } from '@/lib/ai-models/model-manager';\nimport { ApiResponseWrapper } from '@/lib/utils/api-helper';\nimport { ErrorCode } from '@/types/core';\nimport { ErrorCode } from '@/types/core';\nimport { ErrorCode } from '@/types/core';\n\nexport const GET = createApiRoute(\n  { method: 'GET', requireAuth: true },\n  async (_req, { params }) => {\n    const model = aiModelManager.getModel(params.id);\n    return { success: true, data: model };\n  }\n);\n\nexport const PUT = createApiRoute(\n  { method: 'PUT', requireAuth: true, timeout: 60000 },\n  async (req: NextRequest, { validatedBody, validatedQuery, user, requestId, params }) => {\n    try {\n      const routeParams = await params;\n      const data = await req.json();\n    \n      const model = await aiModelManager.updateModel(routeParams.id, data);\n    \n      return ApiResponseWrapper.success({\n        success: true,\n        data: model,\n        message: \"Model updated successfully\",\n      });\n    } catch (error) {\n      return ApiResponseWrapper.error(ErrorCode.VALIDATION_ERROR, 'Failed to update AI model', null, 400);\n    }\n  }\n);\n\nexport const DELETE = createApiRoute(\n  { method: 'DELETE', requireAuth: true, timeout: 60000 },\n  async (req: NextRequest, { validatedBody, validatedQuery, user, requestId, params }) => {\n    try {\n      const routeParams = await params;\n      \n      await aiModelManager.deleteModel(routeParams.id);\n    \n      return ApiResponseWrapper.success({\n        success: true,\n        message: \"Model deleted successfully\",\n      });\n    } catch (error) {\n      return ApiResponseWrapper.error(ErrorCode.VALIDATION_ERROR, 'Failed to delete AI model', null, 400);\n    }\n  }\n);\n\n"],"mappings":"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","ignoreList":[]}