{"version":3,"names":["cov_vc1hlum60","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","events_1","require","logger_1","monitoring_1","PerformanceMonitorEnhancer","EventEmitter","constructor","monitor","logger","Logger","setupEventListeners","on","metrics","handleMetrics","alert","handleAlert","emit","getStatus","info","generateOptimizationReport","getOptimizationStatus","generateOptimizationRecommendations","getOptimizationRecommendations","exports","databaseMonitoringEnhancer","databaseMonitor"],"sources":["E:\\zk-agent\\lib\\database\\performance-monitor-enhancer.ts"],"sourcesContent":["/**\n * @file Database Monitoring Enhancer\n * @description 数据库监控系统增强器 - 统一代理\n * @author ZK-Agent Team\n * @date 2024-12-27\n */\n\nimport { EventEmitter } from 'events';\nimport { Logger } from '../utils/logger';\nimport { DatabaseMonitor, databaseMonitor, Alert, DatabaseMetrics } from './monitoring';\n\nexport class PerformanceMonitorEnhancer extends EventEmitter {\n  private logger: Logger;\n\n  constructor(private monitor: DatabaseMonitor) {\n    super();\n    this.logger = new Logger('PerformanceMonitorEnhancer');\n    this.setupEventListeners();\n  }\n\n  private setupEventListeners() {\n    this.monitor.on('metrics', (metrics: DatabaseMetrics) => this.handleMetrics(metrics));\n    this.monitor.on('alert', (alert: Alert) => this.handleAlert(alert));\n  }\n\n  private handleMetrics(metrics: DatabaseMetrics) {\n    // 在这里可以添加更高级的指标处理逻辑\n    this.emit('enhanced-metrics', metrics);\n  }\n\n  private handleAlert(alert: Alert) {\n    // 在这里可以添加更高级的告警处理逻辑\n    this.emit('enhanced-alert', alert);\n  }\n\n  public getStatus() {\n    this.logger.info('Fetching status from underlying DatabaseMonitor');\n    return this.monitor.getStatus();\n  }\n  \n  public generateOptimizationReport() {\n      return this.monitor.getOptimizationStatus();\n  }\n  \n  public generateOptimizationRecommendations() {\n      return this.monitor.getOptimizationRecommendations();\n  }\n}\n\nexport const databaseMonitoringEnhancer = new PerformanceMonitorEnhancer(databaseMonitor);\n\n// Re-exporting types for compatibility\nexport type {\n    AdvancedMonitoringConfig,\n    PerformanceTrend,\n    AnomalyDetectionResult,\n    BenchmarkResult,\n    PredictionResult,\n    MonitoringReport,\n} from './monitoring-enhancer.types';"],"mappings":"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","ignoreList":[]}