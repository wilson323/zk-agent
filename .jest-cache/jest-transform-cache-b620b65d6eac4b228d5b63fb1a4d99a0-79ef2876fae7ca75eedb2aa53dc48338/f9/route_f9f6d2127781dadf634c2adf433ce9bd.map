{"version":3,"names":["cov_1xpaomosep","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","exports","POST","GET","server_1","require","connection_1","index_1","initialization_1","request","isDatabaseInitialized","NextResponse","json","success","error","code","status","databaseMonitor","getMonitoringStatus","isMonitoring","optimizationOptions","body","options","console","log","startTime","Date","now","optimizationResult","triggerDatabaseOptimization","duration","optimizationStatus","getOptimizationStatus","message","data","optimizationId","toISOString","results","recommendations","details","Error","optimizationHistory","getOptimizationHistory","availableOptimizations","getAvailableOptimizations","currentStatus","history","canOptimize","id","timestamp","improvements","queryPerformance","connectionEfficiency","cacheHitRate","componentsOptimized","queryOptimization","description","estimatedDuration","impact","connectionPoolOptimization","cacheOptimization","indexAnalysis","statisticsUpdate"],"sources":["E:\\zk-agent\\app\\api\\admin\\database\\optimize\\route.ts"],"sourcesContent":["/**\n * @file 数据库优化触发API路由\n * @description 提供手动触发数据库优化的API接口\n * @author ZK-Agent Team\n * @date 2024-12-19\n */\n\nimport { NextRequest, NextResponse } from 'next/server'\nimport { triggerDatabaseOptimization } from '@/lib/database/connection'\nimport { databaseMonitor } from '@/lib/database/index'\nimport { isDatabaseInitialized } from '@/lib/database/initialization'\n\n/**\n * POST /api/admin/database/optimize\n * 手动触发数据库性能优化\n */\nexport async function POST(request: NextRequest) {\n  try {\n    // 检查数据库是否已初始化\n    if (!isDatabaseInitialized()) {\n      return NextResponse.json(\n        { \n          success: false,\n          error: '数据库系统尚未初始化',\n          code: 'DATABASE_NOT_INITIALIZED'\n        },\n        { status: 503 }\n      )\n    }\n\n    // 检查监控系统是否运行\n    if (!databaseMonitor.getMonitoringStatus().isMonitoring) {\n      return NextResponse.json(\n        {\n          success: false,\n          error: '数据库监控系统未运行，无法执行优化',\n          code: 'MONITORING_NOT_ACTIVE'\n        },\n        { status: 400 }\n      )\n    }\n\n    // 解析请求体（可选的优化参数）\n    let optimizationOptions = {}\n    try {\n      const body = await request.json()\n      optimizationOptions = body.options || {}\n    } catch {\n      // 如果没有请求体或解析失败，使用默认选项\n    }\n\n    console.log('开始手动触发数据库优化...', optimizationOptions)\n\n    // 记录优化开始时间\n    const startTime = Date.now()\n\n    // 执行优化\n    const optimizationResult = await triggerDatabaseOptimization(optimizationOptions)\n\n    // 计算优化耗时\n    const duration = Date.now() - startTime\n\n    // 获取优化后的状态\n    const optimizationStatus = databaseMonitor.getOptimizationStatus()\n\n    console.log(`数据库优化完成，耗时: ${duration}ms`)\n\n    return NextResponse.json({\n      success: true,\n      message: '数据库优化已成功触发',\n      data: {\n        optimizationId: `opt_${Date.now()}`,\n        startTime: new Date(startTime).toISOString(),\n        duration,\n        status: optimizationStatus,\n        results: optimizationResult,\n        recommendations: optimizationResult.recommendations || []\n      }\n    })\n  } catch (error) {\n    console.error('数据库优化失败:', error)\n    \n    return NextResponse.json(\n      {\n        success: false,\n        error: '数据库优化执行失败',\n        details: error instanceof Error ? error.message : '未知错误',\n        code: 'OPTIMIZATION_FAILED'\n      },\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * GET /api/admin/database/optimize\n * 获取优化历史和状态\n */\nexport async function GET(request: NextRequest) {\n  try {\n    // 检查数据库是否已初始化\n    if (!isDatabaseInitialized()) {\n      return NextResponse.json(\n        { error: '数据库系统尚未初始化' },\n        { status: 503 }\n      )\n    }\n\n    // 获取当前优化状态\n    const optimizationStatus = databaseMonitor.getOptimizationStatus()\n    \n    // 获取优化历史（模拟数据，实际应用中应从数据库获取）\n    const optimizationHistory = await getOptimizationHistory()\n    \n    // 获取可用的优化选项\n    const availableOptimizations = getAvailableOptimizations()\n\n    return NextResponse.json({\n      currentStatus: optimizationStatus,\n      history: optimizationHistory,\n      availableOptimizations,\n      canOptimize: databaseMonitor.getMonitoringStatus().isMonitoring\n    })\n  } catch (error) {\n    console.error('获取优化信息失败:', error)\n    return NextResponse.json(\n      { error: '获取优化信息失败', details: error instanceof Error ? error.message : '未知错误' },\n      { status: 500 }\n    )\n  }\n}\n\n/**\n * 获取优化历史记录\n */\nasync function getOptimizationHistory() {\n  // 在实际应用中，这里应该从数据库查询优化历史\n  // 目前返回模拟数据\n  return [\n    {\n      id: 'opt_1703001234567',\n      timestamp: new Date(Date.now() - 3600000).toISOString(),\n      type: 'automatic',\n      duration: 2340,\n      status: 'completed',\n      improvements: {\n        queryPerformance: '+12%',\n        connectionEfficiency: '+8%',\n        cacheHitRate: '+5%'\n      },\n      componentsOptimized: ['query-cache', 'connection-pool', 'index-analyzer']\n    },\n    {\n      id: 'opt_1702987654321',\n      timestamp: new Date(Date.now() - 86400000).toISOString(),\n      type: 'manual',\n      duration: 1890,\n      status: 'completed',\n      improvements: {\n        queryPerformance: '+7%',\n        connectionEfficiency: '+15%'\n      },\n      componentsOptimized: ['connection-pool', 'query-optimizer']\n    },\n    {\n      id: 'opt_1702901234567',\n      timestamp: new Date(Date.now() - 172800000).toISOString(),\n      type: 'scheduled',\n      duration: 3120,\n      status: 'completed',\n      improvements: {\n        queryPerformance: '+18%',\n        cacheHitRate: '+22%'\n      },\n      componentsOptimized: ['query-cache', 'index-analyzer', 'statistics-collector']\n    }\n  ]\n}\n\n/**\n * 获取可用的优化选项\n */\nfunction getAvailableOptimizations() {\n  return {\n    queryOptimization: {\n      name: '查询优化',\n      description: '分析和优化慢查询，建议索引改进',\n      estimatedDuration: '30-60秒',\n      impact: 'medium'\n    },\n    connectionPoolOptimization: {\n      name: '连接池优化',\n      description: '调整连接池配置，优化连接管理',\n      estimatedDuration: '10-30秒',\n      impact: 'high'\n    },\n    cacheOptimization: {\n      name: '缓存优化',\n      description: '优化查询缓存策略和配置',\n      estimatedDuration: '20-45秒',\n      impact: 'medium'\n    },\n    indexAnalysis: {\n      name: '索引分析',\n      description: '分析索引使用情况，建议索引优化',\n      estimatedDuration: '45-90秒',\n      impact: 'high'\n    },\n    statisticsUpdate: {\n      name: '统计信息更新',\n      description: '更新数据库统计信息，改善查询计划',\n      estimatedDuration: '15-30秒',\n      impact: 'low'\n    }\n  }\n}\n"],"mappings":";;AAAA;;;;;;AAAA;AAAA,SAAAA,eAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UA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","ignoreList":[]}