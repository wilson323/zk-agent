6f2b19e3ad4767c93025d2a95391a392
/**
 * @file jest-config-validator.js
 * @description Jest configuration validation and error handling utilities
 * @author Jest Fix Team
 */

const fs = require('fs');
const path = require('path');

/**
 * Validate Jest configuration
 * @param {Object} config - Jest configuration object (optional)
 * @returns {Object} Validation result
 */
function validateJestConfig(config = null) {
  const errors = [];
  const warnings = [];

  // Try to get Jest config if not provided
  if (!config) {
    try {
      // Try to get config from jest global or require
      if (typeof jest !== 'undefined' && jest.config) {
        config = jest.config;
      } else {
        // Try to load config file
        const fs = safeRequire('fs');
        const path = safeRequire('path');
        if (fs && path) {
          const configPath = path.resolve(process.cwd(), 'jest.config.fixed.js');
          if (fs.existsSync(configPath)) {
            config = safeRequire(configPath);
          }
        }
      }
    } catch (error) {
      warnings.push(`无法加载 Jest 配置: ${error.message}`);
    }
  }

  // If still no config, create a minimal validation
  if (!config) {
    console.log('✅ Jest 配置验证通过 (无法获取配置，跳过详细验证)');
    return {
      valid: true,
      errors: [],
      warnings: ['无法获取 Jest 配置进行详细验证']
    };
  }

  // Check required fields
  if (!config.testEnvironment) {
    errors.push('testEnvironment is required');
  }
  if (!config.setupFilesAfterEnv || config.setupFilesAfterEnv.length === 0) {
    warnings.push('setupFilesAfterEnv is recommended for proper test setup');
  }

  // Validate setup files exist
  if (config.setupFilesAfterEnv) {
    config.setupFilesAfterEnv.forEach(setupFile => {
      const filePath = setupFile.replace('<rootDir>', process.cwd());
      if (!fs.existsSync(filePath)) {
        errors.push(`Setup file not found: ${setupFile}`);
      }
    });
  }

  // Check for conflicting configurations
  if (config.preset && config.transform) {
    warnings.push('Both preset and transform are defined - this may cause conflicts');
  }
  if (config.preset === 'ts-jest' && config.extensionsToTreatAsEsm) {
    warnings.push('ts-jest preset with ESM extensions may cause issues');
  }

  // Validate module name mappings
  if (config.moduleNameMapper) {
    Object.entries(config.moduleNameMapper).forEach(([pattern, replacement]) => {
      try {
        new RegExp(pattern);
      } catch (error) {
        errors.push(`Invalid regex pattern in moduleNameMapper: ${pattern}`);
      }
      if (replacement.includes('<rootDir>')) {
        const filePath = replacement.replace('<rootDir>', process.cwd());
        if (!fs.existsSync(filePath) && !replacement.includes('identity-obj-proxy')) {
          warnings.push(`Mapped file may not exist: ${replacement}`);
        }
      }
    });
  }

  // Check test timeout
  if (config.testTimeout && config.testTimeout < 5000) {
    warnings.push('testTimeout is very low - tests may fail due to timeout');
  }
  if (config.testTimeout && config.testTimeout > 60000) {
    warnings.push('testTimeout is very high - this may slow down test execution');
  }

  // Validate coverage configuration
  if (config.collectCoverage && !config.collectCoverageFrom) {
    warnings.push('collectCoverage is enabled but collectCoverageFrom is not specified');
  }
  return {
    isValid: errors.length === 0,
    errors,
    warnings
  };
}

/**
 * Validate test environment setup
 * @returns {Object} Validation result
 */
function validateTestEnvironment() {
  const errors = [];
  const warnings = [];

  // Check Node.js version
  const nodeVersion = process.version;
  const majorVersion = parseInt(nodeVersion.slice(1).split('.')[0]);
  if (majorVersion < 16) {
    errors.push(`Node.js version ${nodeVersion} is not supported. Please use Node.js 16 or higher.`);
  }

  // Check required globals
  const requiredGlobals = ['TextEncoder', 'TextDecoder'];
  requiredGlobals.forEach(globalName => {
    if (typeof global[globalName] === 'undefined') {
      warnings.push(`Global ${globalName} is not defined`);
    }
  });

  // Check Jest environment
  if (process.env.NODE_ENV !== 'test') {
    warnings.push('NODE_ENV is not set to "test"');
  }

  // Check memory usage
  const memoryUsage = process.memoryUsage();
  const heapUsedMB = memoryUsage.heapUsed / 1024 / 1024;
  if (heapUsedMB > 500) {
    warnings.push(`High memory usage detected: ${heapUsedMB.toFixed(2)}MB`);
  }
  return {
    isValid: errors.length === 0,
    errors,
    warnings,
    info: {
      nodeVersion,
      memoryUsage: `${heapUsedMB.toFixed(2)}MB`,
      platform: process.platform,
      arch: process.arch
    }
  };
}

/**
 * Safe require with error handling
 * @param {string} modulePath - Module path to require
 * @param {*} fallback - Fallback value if require fails
 * @returns {*} Required module or fallback
 */
function safeRequire(modulePath, fallback = null) {
  try {
    return require(modulePath);
  } catch (error) {
    console.warn(`Failed to require ${modulePath}:`, error.message);
    return fallback;
  }
}

/**
 * Create safe global polyfills
 */
function createSafePolyfills() {
  const polyfills = {};

  // TextEncoder/TextDecoder polyfills
  try {
    const {
      TextEncoder,
      TextDecoder
    } = require('util');
    polyfills.TextEncoder = TextEncoder;
    polyfills.TextDecoder = TextDecoder;
  } catch (error) {
    console.warn('Failed to load TextEncoder/TextDecoder from util:', error.message);

    // Fallback implementations
    polyfills.TextEncoder = class TextEncoder {
      encode(str) {
        try {
          const buffer = Buffer.from(str, 'utf8');
          return new Uint8Array(buffer);
        } catch (error) {
          console.error('TextEncoder fallback failed:', error);
          return new Uint8Array(0);
        }
      }
    };
    polyfills.TextDecoder = class TextDecoder {
      decode(buffer) {
        try {
          if (buffer instanceof Uint8Array) {
            return Buffer.from(buffer).toString('utf8');
          } else if (Buffer.isBuffer(buffer)) {
            return buffer.toString('utf8');
          } else {
            return Buffer.from(buffer).toString('utf8');
          }
        } catch (error) {
          console.error('TextDecoder fallback failed:', error);
          return '';
        }
      }
    };
  }

  // Fetch polyfill
  if (typeof global.fetch === 'undefined') {
    polyfills.fetch = jest.fn(() => Promise.resolve({
      ok: true,
      status: 200,
      json: () => Promise.resolve({}),
      text: () => Promise.resolve('')
    }));
  }
  return polyfills;
}

/**
 * Apply polyfills safely to global scope
 * @param {Object} polyfills - Polyfills to apply
 */
function applySafePolyfills(polyfills) {
  try {
    Object.entries(polyfills).forEach(([name, implementation]) => {
      try {
        if (typeof global[name] === 'undefined') {
          global[name] = implementation;
          console.log(`✓ Applied polyfill for ${name}`);
        } else {
          console.log(`✓ ${name} already exists, skipping polyfill`);
        }
      } catch (error) {
        console.error(`✗ Failed to apply polyfill for ${name}:`, error.message);
      }
    });
  } catch (error) {
    console.error('应用 polyfills 时发生错误:', error.message);
  }
}
module.exports = {
  validateJestConfig,
  validateTestEnvironment,
  safeRequire,
  createSafePolyfills,
  applySafePolyfills
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmcyIsInJlcXVpcmUiLCJwYXRoIiwidmFsaWRhdGVKZXN0Q29uZmlnIiwiY29uZmlnIiwiZXJyb3JzIiwid2FybmluZ3MiLCJqZXN0Iiwic2FmZVJlcXVpcmUiLCJjb25maWdQYXRoIiwicmVzb2x2ZSIsInByb2Nlc3MiLCJjd2QiLCJleGlzdHNTeW5jIiwiZXJyb3IiLCJwdXNoIiwibWVzc2FnZSIsImNvbnNvbGUiLCJsb2ciLCJ2YWxpZCIsInRlc3RFbnZpcm9ubWVudCIsInNldHVwRmlsZXNBZnRlckVudiIsImxlbmd0aCIsImZvckVhY2giLCJzZXR1cEZpbGUiLCJmaWxlUGF0aCIsInJlcGxhY2UiLCJwcmVzZXQiLCJ0cmFuc2Zvcm0iLCJleHRlbnNpb25zVG9UcmVhdEFzRXNtIiwibW9kdWxlTmFtZU1hcHBlciIsIk9iamVjdCIsImVudHJpZXMiLCJwYXR0ZXJuIiwicmVwbGFjZW1lbnQiLCJSZWdFeHAiLCJpbmNsdWRlcyIsInRlc3RUaW1lb3V0IiwiY29sbGVjdENvdmVyYWdlIiwiY29sbGVjdENvdmVyYWdlRnJvbSIsImlzVmFsaWQiLCJ2YWxpZGF0ZVRlc3RFbnZpcm9ubWVudCIsIm5vZGVWZXJzaW9uIiwidmVyc2lvbiIsIm1ham9yVmVyc2lvbiIsInBhcnNlSW50Iiwic2xpY2UiLCJzcGxpdCIsInJlcXVpcmVkR2xvYmFscyIsImdsb2JhbE5hbWUiLCJnbG9iYWwiLCJlbnYiLCJOT0RFX0VOViIsIm1lbW9yeVVzYWdlIiwiaGVhcFVzZWRNQiIsImhlYXBVc2VkIiwidG9GaXhlZCIsImluZm8iLCJwbGF0Zm9ybSIsImFyY2giLCJtb2R1bGVQYXRoIiwiZmFsbGJhY2siLCJ3YXJuIiwiY3JlYXRlU2FmZVBvbHlmaWxscyIsInBvbHlmaWxscyIsIlRleHRFbmNvZGVyIiwiVGV4dERlY29kZXIiLCJlbmNvZGUiLCJzdHIiLCJidWZmZXIiLCJCdWZmZXIiLCJmcm9tIiwiVWludDhBcnJheSIsImRlY29kZSIsInRvU3RyaW5nIiwiaXNCdWZmZXIiLCJmZXRjaCIsImZuIiwiUHJvbWlzZSIsIm9rIiwic3RhdHVzIiwianNvbiIsInRleHQiLCJhcHBseVNhZmVQb2x5ZmlsbHMiLCJuYW1lIiwiaW1wbGVtZW50YXRpb24iLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiamVzdC1jb25maWctdmFsaWRhdG9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgamVzdC1jb25maWctdmFsaWRhdG9yLmpzXG4gKiBAZGVzY3JpcHRpb24gSmVzdCBjb25maWd1cmF0aW9uIHZhbGlkYXRpb24gYW5kIGVycm9yIGhhbmRsaW5nIHV0aWxpdGllc1xuICogQGF1dGhvciBKZXN0IEZpeCBUZWFtXG4gKi9cblxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcblxuLyoqXG4gKiBWYWxpZGF0ZSBKZXN0IGNvbmZpZ3VyYXRpb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgLSBKZXN0IGNvbmZpZ3VyYXRpb24gb2JqZWN0IChvcHRpb25hbClcbiAqIEByZXR1cm5zIHtPYmplY3R9IFZhbGlkYXRpb24gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlSmVzdENvbmZpZyhjb25maWcgPSBudWxsKSB7XG4gIGNvbnN0IGVycm9ycyA9IFtdO1xuICBjb25zdCB3YXJuaW5ncyA9IFtdO1xuICBcbiAgLy8gVHJ5IHRvIGdldCBKZXN0IGNvbmZpZyBpZiBub3QgcHJvdmlkZWRcbiAgaWYgKCFjb25maWcpIHtcbiAgICB0cnkge1xuICAgICAgLy8gVHJ5IHRvIGdldCBjb25maWcgZnJvbSBqZXN0IGdsb2JhbCBvciByZXF1aXJlXG4gICAgICBpZiAodHlwZW9mIGplc3QgIT09ICd1bmRlZmluZWQnICYmIGplc3QuY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZyA9IGplc3QuY29uZmlnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVHJ5IHRvIGxvYWQgY29uZmlnIGZpbGVcbiAgICAgICAgY29uc3QgZnMgPSBzYWZlUmVxdWlyZSgnZnMnKTtcbiAgICAgICAgY29uc3QgcGF0aCA9IHNhZmVSZXF1aXJlKCdwYXRoJyk7XG4gICAgICAgIGlmIChmcyAmJiBwYXRoKSB7XG4gICAgICAgICAgY29uc3QgY29uZmlnUGF0aCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnamVzdC5jb25maWcuZml4ZWQuanMnKTtcbiAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhjb25maWdQYXRoKSkge1xuICAgICAgICAgICAgY29uZmlnID0gc2FmZVJlcXVpcmUoY29uZmlnUGF0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHdhcm5pbmdzLnB1c2goYOaXoOazleWKoOi9vSBKZXN0IOmFjee9rjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gSWYgc3RpbGwgbm8gY29uZmlnLCBjcmVhdGUgYSBtaW5pbWFsIHZhbGlkYXRpb25cbiAgaWYgKCFjb25maWcpIHtcbiAgICBjb25zb2xlLmxvZygn4pyFIEplc3Qg6YWN572u6aqM6K+B6YCa6L+HICjml6Dms5Xojrflj5bphY3nva7vvIzot7Pov4for6bnu4bpqozor4EpJyk7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10sIHdhcm5pbmdzOiBbJ+aXoOazleiOt+WPliBKZXN0IOmFjee9rui/m+ihjOivpue7humqjOivgSddIH07XG4gIH1cbiAgXG4gIC8vIENoZWNrIHJlcXVpcmVkIGZpZWxkc1xuICBpZiAoIWNvbmZpZy50ZXN0RW52aXJvbm1lbnQpIHtcbiAgICBlcnJvcnMucHVzaCgndGVzdEVudmlyb25tZW50IGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmICghY29uZmlnLnNldHVwRmlsZXNBZnRlckVudiB8fCBjb25maWcuc2V0dXBGaWxlc0FmdGVyRW52Lmxlbmd0aCA9PT0gMCkge1xuICAgIHdhcm5pbmdzLnB1c2goJ3NldHVwRmlsZXNBZnRlckVudiBpcyByZWNvbW1lbmRlZCBmb3IgcHJvcGVyIHRlc3Qgc2V0dXAnKTtcbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgc2V0dXAgZmlsZXMgZXhpc3RcbiAgaWYgKGNvbmZpZy5zZXR1cEZpbGVzQWZ0ZXJFbnYpIHtcbiAgICBjb25maWcuc2V0dXBGaWxlc0FmdGVyRW52LmZvckVhY2goc2V0dXBGaWxlID0+IHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gc2V0dXBGaWxlLnJlcGxhY2UoJzxyb290RGlyPicsIHByb2Nlc3MuY3dkKCkpO1xuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgICAgICBlcnJvcnMucHVzaChgU2V0dXAgZmlsZSBub3QgZm91bmQ6ICR7c2V0dXBGaWxlfWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICAvLyBDaGVjayBmb3IgY29uZmxpY3RpbmcgY29uZmlndXJhdGlvbnNcbiAgaWYgKGNvbmZpZy5wcmVzZXQgJiYgY29uZmlnLnRyYW5zZm9ybSkge1xuICAgIHdhcm5pbmdzLnB1c2goJ0JvdGggcHJlc2V0IGFuZCB0cmFuc2Zvcm0gYXJlIGRlZmluZWQgLSB0aGlzIG1heSBjYXVzZSBjb25mbGljdHMnKTtcbiAgfVxuICBcbiAgaWYgKGNvbmZpZy5wcmVzZXQgPT09ICd0cy1qZXN0JyAmJiBjb25maWcuZXh0ZW5zaW9uc1RvVHJlYXRBc0VzbSkge1xuICAgIHdhcm5pbmdzLnB1c2goJ3RzLWplc3QgcHJlc2V0IHdpdGggRVNNIGV4dGVuc2lvbnMgbWF5IGNhdXNlIGlzc3VlcycpO1xuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSBtb2R1bGUgbmFtZSBtYXBwaW5nc1xuICBpZiAoY29uZmlnLm1vZHVsZU5hbWVNYXBwZXIpIHtcbiAgICBPYmplY3QuZW50cmllcyhjb25maWcubW9kdWxlTmFtZU1hcHBlcikuZm9yRWFjaCgoW3BhdHRlcm4sIHJlcGxhY2VtZW50XSkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3IFJlZ0V4cChwYXR0ZXJuKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBJbnZhbGlkIHJlZ2V4IHBhdHRlcm4gaW4gbW9kdWxlTmFtZU1hcHBlcjogJHtwYXR0ZXJufWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocmVwbGFjZW1lbnQuaW5jbHVkZXMoJzxyb290RGlyPicpKSB7XG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcmVwbGFjZW1lbnQucmVwbGFjZSgnPHJvb3REaXI+JywgcHJvY2Vzcy5jd2QoKSk7XG4gICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkgJiYgIXJlcGxhY2VtZW50LmluY2x1ZGVzKCdpZGVudGl0eS1vYmotcHJveHknKSkge1xuICAgICAgICAgIHdhcm5pbmdzLnB1c2goYE1hcHBlZCBmaWxlIG1heSBub3QgZXhpc3Q6ICR7cmVwbGFjZW1lbnR9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBcbiAgLy8gQ2hlY2sgdGVzdCB0aW1lb3V0XG4gIGlmIChjb25maWcudGVzdFRpbWVvdXQgJiYgY29uZmlnLnRlc3RUaW1lb3V0IDwgNTAwMCkge1xuICAgIHdhcm5pbmdzLnB1c2goJ3Rlc3RUaW1lb3V0IGlzIHZlcnkgbG93IC0gdGVzdHMgbWF5IGZhaWwgZHVlIHRvIHRpbWVvdXQnKTtcbiAgfVxuICBcbiAgaWYgKGNvbmZpZy50ZXN0VGltZW91dCAmJiBjb25maWcudGVzdFRpbWVvdXQgPiA2MDAwMCkge1xuICAgIHdhcm5pbmdzLnB1c2goJ3Rlc3RUaW1lb3V0IGlzIHZlcnkgaGlnaCAtIHRoaXMgbWF5IHNsb3cgZG93biB0ZXN0IGV4ZWN1dGlvbicpO1xuICB9XG4gIFxuICAvLyBWYWxpZGF0ZSBjb3ZlcmFnZSBjb25maWd1cmF0aW9uXG4gIGlmIChjb25maWcuY29sbGVjdENvdmVyYWdlICYmICFjb25maWcuY29sbGVjdENvdmVyYWdlRnJvbSkge1xuICAgIHdhcm5pbmdzLnB1c2goJ2NvbGxlY3RDb3ZlcmFnZSBpcyBlbmFibGVkIGJ1dCBjb2xsZWN0Q292ZXJhZ2VGcm9tIGlzIG5vdCBzcGVjaWZpZWQnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9ycyxcbiAgICB3YXJuaW5ncyxcbiAgfTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSB0ZXN0IGVudmlyb25tZW50IHNldHVwXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBWYWxpZGF0aW9uIHJlc3VsdFxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZVRlc3RFbnZpcm9ubWVudCgpIHtcbiAgY29uc3QgZXJyb3JzID0gW107XG4gIGNvbnN0IHdhcm5pbmdzID0gW107XG4gIFxuICAvLyBDaGVjayBOb2RlLmpzIHZlcnNpb25cbiAgY29uc3Qgbm9kZVZlcnNpb24gPSBwcm9jZXNzLnZlcnNpb247XG4gIGNvbnN0IG1ham9yVmVyc2lvbiA9IHBhcnNlSW50KG5vZGVWZXJzaW9uLnNsaWNlKDEpLnNwbGl0KCcuJylbMF0pO1xuICBcbiAgaWYgKG1ham9yVmVyc2lvbiA8IDE2KSB7XG4gICAgZXJyb3JzLnB1c2goYE5vZGUuanMgdmVyc2lvbiAke25vZGVWZXJzaW9ufSBpcyBub3Qgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIE5vZGUuanMgMTYgb3IgaGlnaGVyLmApO1xuICB9XG4gIFxuICAvLyBDaGVjayByZXF1aXJlZCBnbG9iYWxzXG4gIGNvbnN0IHJlcXVpcmVkR2xvYmFscyA9IFsnVGV4dEVuY29kZXInLCAnVGV4dERlY29kZXInXTtcbiAgcmVxdWlyZWRHbG9iYWxzLmZvckVhY2goZ2xvYmFsTmFtZSA9PiB7XG4gICAgaWYgKHR5cGVvZiBnbG9iYWxbZ2xvYmFsTmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKGBHbG9iYWwgJHtnbG9iYWxOYW1lfSBpcyBub3QgZGVmaW5lZGApO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBDaGVjayBKZXN0IGVudmlyb25tZW50XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Rlc3QnKSB7XG4gICAgd2FybmluZ3MucHVzaCgnTk9ERV9FTlYgaXMgbm90IHNldCB0byBcInRlc3RcIicpO1xuICB9XG4gIFxuICAvLyBDaGVjayBtZW1vcnkgdXNhZ2VcbiAgY29uc3QgbWVtb3J5VXNhZ2UgPSBwcm9jZXNzLm1lbW9yeVVzYWdlKCk7XG4gIGNvbnN0IGhlYXBVc2VkTUIgPSBtZW1vcnlVc2FnZS5oZWFwVXNlZCAvIDEwMjQgLyAxMDI0O1xuICBcbiAgaWYgKGhlYXBVc2VkTUIgPiA1MDApIHtcbiAgICB3YXJuaW5ncy5wdXNoKGBIaWdoIG1lbW9yeSB1c2FnZSBkZXRlY3RlZDogJHtoZWFwVXNlZE1CLnRvRml4ZWQoMil9TUJgKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9ycyxcbiAgICB3YXJuaW5ncyxcbiAgICBpbmZvOiB7XG4gICAgICBub2RlVmVyc2lvbixcbiAgICAgIG1lbW9yeVVzYWdlOiBgJHtoZWFwVXNlZE1CLnRvRml4ZWQoMil9TUJgLFxuICAgICAgcGxhdGZvcm06IHByb2Nlc3MucGxhdGZvcm0sXG4gICAgICBhcmNoOiBwcm9jZXNzLmFyY2gsXG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBTYWZlIHJlcXVpcmUgd2l0aCBlcnJvciBoYW5kbGluZ1xuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZVBhdGggLSBNb2R1bGUgcGF0aCB0byByZXF1aXJlXG4gKiBAcGFyYW0geyp9IGZhbGxiYWNrIC0gRmFsbGJhY2sgdmFsdWUgaWYgcmVxdWlyZSBmYWlsc1xuICogQHJldHVybnMgeyp9IFJlcXVpcmVkIG1vZHVsZSBvciBmYWxsYmFja1xuICovXG5mdW5jdGlvbiBzYWZlUmVxdWlyZShtb2R1bGVQYXRoLCBmYWxsYmFjayA9IG51bGwpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcmVxdWlyZShtb2R1bGVQYXRoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byByZXF1aXJlICR7bW9kdWxlUGF0aH06YCwgZXJyb3IubWVzc2FnZSk7XG4gICAgcmV0dXJuIGZhbGxiYWNrO1xuICB9XG59XG5cbi8qKlxuICogQ3JlYXRlIHNhZmUgZ2xvYmFsIHBvbHlmaWxsc1xuICovXG5mdW5jdGlvbiBjcmVhdGVTYWZlUG9seWZpbGxzKCkge1xuICBjb25zdCBwb2x5ZmlsbHMgPSB7fTtcbiAgXG4gIC8vIFRleHRFbmNvZGVyL1RleHREZWNvZGVyIHBvbHlmaWxsc1xuICB0cnkge1xuICAgIGNvbnN0IHsgVGV4dEVuY29kZXIsIFRleHREZWNvZGVyIH0gPSByZXF1aXJlKCd1dGlsJyk7XG4gICAgcG9seWZpbGxzLlRleHRFbmNvZGVyID0gVGV4dEVuY29kZXI7XG4gICAgcG9seWZpbGxzLlRleHREZWNvZGVyID0gVGV4dERlY29kZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gbG9hZCBUZXh0RW5jb2Rlci9UZXh0RGVjb2RlciBmcm9tIHV0aWw6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgaW1wbGVtZW50YXRpb25zXG4gICAgcG9seWZpbGxzLlRleHRFbmNvZGVyID0gY2xhc3MgVGV4dEVuY29kZXIge1xuICAgICAgZW5jb2RlKHN0cikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHN0ciwgJ3V0ZjgnKTtcbiAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdUZXh0RW5jb2RlciBmYWxsYmFjayBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgcG9seWZpbGxzLlRleHREZWNvZGVyID0gY2xhc3MgVGV4dERlY29kZXIge1xuICAgICAgZGVjb2RlKGJ1ZmZlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChidWZmZXIgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYnVmZmVyKS50b1N0cmluZygndXRmOCcpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoQnVmZmVyLmlzQnVmZmVyKGJ1ZmZlcikpIHtcbiAgICAgICAgICAgIHJldHVybiBidWZmZXIudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ1ZmZlcikudG9TdHJpbmcoJ3V0ZjgnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVGV4dERlY29kZXIgZmFsbGJhY2sgZmFpbGVkOicsIGVycm9yKTtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIFxuICAvLyBGZXRjaCBwb2x5ZmlsbFxuICBpZiAodHlwZW9mIGdsb2JhbC5mZXRjaCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBwb2x5ZmlsbHMuZmV0Y2ggPSBqZXN0LmZuKCgpID0+IFxuICAgICAgUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgb2s6IHRydWUsXG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICBqc29uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe30pLFxuICAgICAgICB0ZXh0OiAoKSA9PiBQcm9taXNlLnJlc29sdmUoJycpLFxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIFxuICByZXR1cm4gcG9seWZpbGxzO1xufVxuXG4vKipcbiAqIEFwcGx5IHBvbHlmaWxscyBzYWZlbHkgdG8gZ2xvYmFsIHNjb3BlXG4gKiBAcGFyYW0ge09iamVjdH0gcG9seWZpbGxzIC0gUG9seWZpbGxzIHRvIGFwcGx5XG4gKi9cbmZ1bmN0aW9uIGFwcGx5U2FmZVBvbHlmaWxscyhwb2x5ZmlsbHMpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QuZW50cmllcyhwb2x5ZmlsbHMpLmZvckVhY2goKFtuYW1lLCBpbXBsZW1lbnRhdGlvbl0pID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgZ2xvYmFsW25hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGdsb2JhbFtuYW1lXSA9IGltcGxlbWVudGF0aW9uO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinJMgQXBwbGllZCBwb2x5ZmlsbCBmb3IgJHtuYW1lfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGDinJMgJHtuYW1lfSBhbHJlYWR5IGV4aXN0cywgc2tpcHBpbmcgcG9seWZpbGxgKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihg4pyXIEZhaWxlZCB0byBhcHBseSBwb2x5ZmlsbCBmb3IgJHtuYW1lfTpgLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCflupTnlKggcG9seWZpbGxzIOaXtuWPkeeUn+mUmeivrzonLCBlcnJvci5tZXNzYWdlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdmFsaWRhdGVKZXN0Q29uZmlnLFxuICB2YWxpZGF0ZVRlc3RFbnZpcm9ubWVudCxcbiAgc2FmZVJlcXVpcmUsXG4gIGNyZWF0ZVNhZmVQb2x5ZmlsbHMsXG4gIGFwcGx5U2FmZVBvbHlmaWxscyxcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLEVBQUUsR0FBR0MsT0FBTyxD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