{"version":3,"names":["cov_mgnb7ykly","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","branchMap","s","f","b","inputSourceMap","file","mappings","names","sources","sourcesContent","version","_coverageSchema","coverage","actualCoverage","exports","AG_UI_PROTOCOL_VERSION"],"sources":["E:\\zk-agent\\lib\\ag-ui\\protocol\\complete-types.ts"],"sourcesContent":["// @ts-nocheck\n/**\n * AG-UI协议完整类型定义\n * 包含所有可能的协议特性，为未来扩展做准备\n */\n\n// 基础协议版本\nexport const AG_UI_PROTOCOL_VERSION = \"1.0.0\"\n\n// 扩展事件类型\nexport interface BaseEvent {\n  type: string\n  timestamp: number\n  id?: string\n  source?: string\n  metadata?: Record<string, any>\n}\n\n// 运行生命周期事件\nexport interface RunStartedEvent extends BaseEvent {\n  type: \"run-started\"\n  threadId: string\n  runId: string\n  agentId?: string\n  config?: RunConfig\n}\n\nexport interface RunFinishedEvent extends BaseEvent {\n  type: \"run-finished\"\n  threadId: string\n  runId: string\n  duration?: number\n  tokensUsed?: number\n  cost?: number\n}\n\nexport interface RunErrorEvent extends BaseEvent {\n  type: \"run-error\"\n  threadId: string\n  runId: string\n  error: {\n    code: string\n    message: string\n    details?: any\n    stack?: string\n  }\n}\n\nexport interface RunCancelledEvent extends BaseEvent {\n  type: \"run-cancelled\"\n  threadId: string\n  runId: string\n  reason?: string\n}\n\nexport interface RunPausedEvent extends BaseEvent {\n  type: \"run-paused\"\n  threadId: string\n  runId: string\n}\n\nexport interface RunResumedEvent extends BaseEvent {\n  type: \"run-resumed\"\n  threadId: string\n  runId: string\n}\n\n// 消息事件\nexport interface TextMessageStartEvent extends BaseEvent {\n  type: \"text-message-start\"\n  messageId: string\n  role: \"user\" | \"assistant\" | \"system\" | \"tool\"\n  parentMessageId?: string\n}\n\nexport interface TextMessageContentEvent extends BaseEvent {\n  type: \"text-message-content\"\n  messageId: string\n  delta: string\n  contentType?: \"text\" | \"markdown\" | \"html\" | \"json\"\n}\n\nexport interface TextMessageEndEvent extends BaseEvent {\n  type: \"text-message-end\"\n  messageId: string\n  finalContent?: string\n  tokensUsed?: number\n}\n\n// 多媒体消息事件\nexport interface ImageMessageEvent extends BaseEvent {\n  type: \"image-message\"\n  messageId: string\n  imageUrl: string\n  imageType: \"png\" | \"jpg\" | \"gif\" | \"webp\" | \"svg\"\n  width?: number\n  height?: number\n  alt?: string\n}\n\nexport interface AudioMessageEvent extends BaseEvent {\n  type: \"audio-message\"\n  messageId: string\n  audioUrl: string\n  audioType: \"mp3\" | \"wav\" | \"ogg\" | \"m4a\"\n  duration?: number\n  transcript?: string\n}\n\nexport interface VideoMessageEvent extends BaseEvent {\n  type: \"video-message\"\n  messageId: string\n  videoUrl: string\n  videoType: \"mp4\" | \"webm\" | \"avi\" | \"mov\"\n  duration?: number\n  width?: number\n  height?: number\n  thumbnail?: string\n}\n\nexport interface FileMessageEvent extends BaseEvent {\n  type: \"file-message\"\n  messageId: string\n  fileUrl: string\n  fileName: string\n  fileType: string\n  fileSize: number\n  checksum?: string\n}\n\n// 工具调用事件\nexport interface ToolCallStartEvent extends BaseEvent {\n  type: \"tool-call-start\"\n  toolCallId: string\n  toolName: string\n  parentMessageId: string\n  expectedDuration?: number\n}\n\nexport interface ToolCallArgsEvent extends BaseEvent {\n  type: \"tool-call-args\"\n  toolCallId: string\n  argsJson: string\n  argsSchema?: any\n}\n\nexport interface ToolCallProgressEvent extends BaseEvent {\n  type: \"tool-call-progress\"\n  toolCallId: string\n  progress: number\n  status: string\n  estimatedTimeRemaining?: number\n}\n\nexport interface ToolCallResultEvent extends BaseEvent {\n  type: \"tool-call-result\"\n  toolCallId: string\n  result: any\n  resultType?: \"success\" | \"error\" | \"partial\"\n  executionTime?: number\n}\n\nexport interface ToolCallEndEvent extends BaseEvent {\n  type: \"tool-call-end\"\n  toolCallId: string\n  success: boolean\n  error?: string\n}\n\n// 状态管理事件\nexport interface StateSnapshotEvent extends BaseEvent {\n  type: \"state-snapshot\"\n  state: Record<string, any>\n  version?: number\n  checksum?: string\n}\n\nexport interface StateDeltaEvent extends BaseEvent {\n  type: \"state-delta\"\n  delta: any[]\n  version: number\n  previousVersion: number\n}\n\nexport interface StateResetEvent extends BaseEvent {\n  type: \"state-reset\"\n  reason?: string\n}\n\nexport interface StateValidationEvent extends BaseEvent {\n  type: \"state-validation\"\n  isValid: boolean\n  errors?: string[]\n}\n\n// 用户交互事件\nexport interface UserInputStartEvent extends BaseEvent {\n  type: \"user-input-start\"\n  inputType: \"text\" | \"voice\" | \"file\" | \"image\" | \"video\"\n  expectedFormat?: string\n}\n\nexport interface UserInputEndEvent extends BaseEvent {\n  type: \"user-input-end\"\n  inputType: \"text\" | \"voice\" | \"file\" | \"image\" | \"video\"\n  inputData: any\n}\n\nexport interface UserFeedbackEvent extends BaseEvent {\n  type: \"user-feedback\"\n  messageId: string\n  feedbackType: \"like\" | \"dislike\" | \"flag\" | \"share\" | \"bookmark\"\n  comment?: string\n  rating?: number\n}\n\n// 系统事件\nexport interface SystemStatusEvent extends BaseEvent {\n  type: \"system-status\"\n  status: \"healthy\" | \"degraded\" | \"unhealthy\"\n  details?: Record<string, any>\n}\n\nexport interface SystemMetricsEvent extends BaseEvent {\n  type: \"system-metrics\"\n  metrics: {\n    cpu?: number\n    memory?: number\n    network?: number\n    latency?: number\n    throughput?: number\n  }\n}\n\nexport interface SystemLogEvent extends BaseEvent {\n  type: \"system-log\"\n  level: \"debug\" | \"info\" | \"warn\" | \"error\" | \"fatal\"\n  message: string\n  context?: Record<string, any>\n}\n\n// 协作事件\nexport interface CollaborationJoinEvent extends BaseEvent {\n  type: \"collaboration-join\"\n  userId: string\n  userName: string\n  role?: string\n}\n\nexport interface CollaborationLeaveEvent extends BaseEvent {\n  type: \"collaboration-leave\"\n  userId: string\n  reason?: string\n}\n\nexport interface CollaborationCursorEvent extends BaseEvent {\n  type: \"collaboration-cursor\"\n  userId: string\n  position: { x: number; y: number }\n  selection?: any\n}\n\nexport interface CollaborationEditEvent extends BaseEvent {\n  type: \"collaboration-edit\"\n  userId: string\n  operation: any\n  timestamp: number\n}\n\n// 自定义事件\nexport interface CustomEvent extends BaseEvent {\n  type: \"custom\"\n  name: string\n  data: any\n  schema?: any\n}\n\n// 联合类型\nexport type AgUIEvent =\n  | RunStartedEvent\n  | RunFinishedEvent\n  | RunErrorEvent\n  | RunCancelledEvent\n  | RunPausedEvent\n  | RunResumedEvent\n  | TextMessageStartEvent\n  | TextMessageContentEvent\n  | TextMessageEndEvent\n  | ImageMessageEvent\n  | AudioMessageEvent\n  | VideoMessageEvent\n  | FileMessageEvent\n  | ToolCallStartEvent\n  | ToolCallArgsEvent\n  | ToolCallProgressEvent\n  | ToolCallResultEvent\n  | ToolCallEndEvent\n  | StateSnapshotEvent\n  | StateDeltaEvent\n  | StateResetEvent\n  | StateValidationEvent\n  | UserInputStartEvent\n  | UserInputEndEvent\n  | UserFeedbackEvent\n  | SystemStatusEvent\n  | SystemMetricsEvent\n  | SystemLogEvent\n  | CollaborationJoinEvent\n  | CollaborationLeaveEvent\n  | CollaborationCursorEvent\n  | CollaborationEditEvent\n  | CustomEvent\n\n// 扩展消息类型\nexport interface Message {\n  id: string\n  role: \"user\" | \"assistant\" | \"system\" | \"tool\"\n  content: string | ToolCall[] | MediaContent[]\n  name?: string\n  timestamp: number\n  parentId?: string\n  threadId?: string\n  metadata?: Record<string, any>\n  attachments?: Attachment[]\n  reactions?: Reaction[]\n  editHistory?: MessageEdit[]\n}\n\nexport interface MediaContent {\n  type: \"image\" | \"audio\" | \"video\" | \"file\"\n  url: string\n  mimeType: string\n  size?: number\n  metadata?: Record<string, any>\n}\n\nexport interface Attachment {\n  id: string\n  name: string\n  type: string\n  url: string\n  size: number\n  metadata?: Record<string, any>\n}\n\nexport interface Reaction {\n  type: string\n  userId: string\n  timestamp: number\n}\n\nexport interface MessageEdit {\n  timestamp: number\n  previousContent: string\n  reason?: string\n}\n\n// 扩展工具类型\nexport interface Tool {\n  type: \"function\" | \"plugin\" | \"service\" | \"workflow\"\n  function: {\n    name: string\n    description: string\n    parameters: {\n      type: \"object\"\n      properties: Record<string, any>\n      required?: string[]\n    }\n    returns?: {\n      type: string\n      description: string\n      schema?: any\n    }\n  }\n  metadata?: {\n    version?: string\n    author?: string\n    category?: string\n    tags?: string[]\n    documentation?: string\n    examples?: any[]\n  }\n  config?: {\n    timeout?: number\n    retries?: number\n    rateLimit?: number\n    permissions?: string[]\n  }\n}\n\nexport interface ToolCall {\n  id: string\n  type: \"function\" | \"plugin\" | \"service\" | \"workflow\"\n  function: {\n    name: string\n    arguments: string\n  }\n  metadata?: Record<string, any>\n}\n\n// 扩展智能体定义\nexport interface AgentDefinition {\n  id: string\n  name: string\n  description: string\n  instructions: string\n  model: string\n  tools: Tool[]\n  temperature?: number\n  maxTokens?: number\n  variables?: Record<string, any>\n  metadata?: {\n    version?: string\n    author?: string\n    category?: string\n    tags?: string[]\n    protocolVersion?: string\n    capabilities?: string[]\n    limitations?: string[]\n    documentation?: string\n    examples?: any[]\n  }\n  config?: {\n    timeout?: number\n    retries?: number\n    rateLimit?: number\n    memoryLimit?: number\n    permissions?: string[]\n    security?: {\n      allowedDomains?: string[]\n      blockedDomains?: string[]\n      maxFileSize?: number\n      allowedFileTypes?: string[]\n    }\n  }\n  ui?: {\n    avatar?: string\n    theme?: string\n    layout?: string\n    customComponents?: any[]\n  }\n}\n\n// 扩展运行配置\nexport interface RunConfig {\n  model?: string\n  temperature?: number\n  maxTokens?: number\n  stream?: boolean\n  tools?: Tool[]\n  timeout?: number\n  retries?: number\n  parallel?: boolean\n  priority?: \"low\" | \"normal\" | \"high\"\n  metadata?: Record<string, any>\n  callbacks?: {\n    onProgress?: (progress: number) => void\n    onError?: (error: Error) => void\n    onComplete?: (result: any) => void\n  }\n}\n\n// 扩展运行输入\nexport interface RunInput {\n  threadId: string\n  runId: string\n  messages: Message[]\n  tools: Tool[]\n  state: Record<string, any>\n  context?: any[]\n  forwardedProps?: Record<string, any>\n  config?: RunConfig\n  user?: {\n    id: string\n    name?: string\n    role?: string\n    permissions?: string[]\n  }\n  session?: {\n    id: string\n    startTime: number\n    metadata?: Record<string, any>\n  }\n}\n\n// 协议扩展接口\nexport interface ProtocolExtension {\n  name: string\n  version: string\n  eventTypes: string[]\n  messageTypes: string[]\n  toolTypes: string[]\n  initialize(): Promise<void>\n  dispose(): Promise<void>\n}\n\n// 插件接口\nexport interface AgUIPlugin {\n  name: string\n  version: string\n  description: string\n  dependencies?: string[]\n  install(): Promise<void>\n  uninstall(): Promise<void>\n  activate(): Promise<void>\n  deactivate(): Promise<void>\n}\n"],"mappings":";;AAAA;AACA;;;;AAAA;AAAA,SAAAA,cAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,IAAA;EAAA,IAAAC,MAAA,OAAAC,QAAA;EAAA,IAAAC,GAAA;EAAA,IAAAC,YAAA;IAAAL,IAAA;IAAAM,YAAA;MAAA;QAAAC,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;MAAA;QAAAF,KAAA;UAAAC,IAAA;UAAAC,MAAA;QAAA;QAAAC,GAAA;UAAAF,IAAA;UAAAC,MAAA;QAAA;MAAA;IAAA;IAAAE,KAAA;IAAAC,SAAA;IAAAC,CAAA;MAAA;MAAA;MAAA;IAAA;IAAAC,CAAA;IAAAC,CAAA;IAAAC,cAAA;MAAAC,IAAA;MAAAC,QAAA;MAAAC,KAAA;MAAAC,OAAA;MAAAC,cAAA;MAAAC,OAAA;IAAA;IAAAC,eAAA;IAAAtB,IAAA;EAAA;EAAA,IAAAuB,QAAA,GAAAtB,MAAA,CAAAE,GAAA,MAAAF,MAAA,CAAAE,GAAA;EAAA,KAAAoB,QAAA,CAAAxB,IAAA,KAAAwB,QAAA,CAAAxB,IAAA,EAAAC,IAAA,KAAAA,IAAA;IAAAuB,QAAA,CAAAxB,IAAA,IAAAK,YAAA;EAAA;EAAA,IAAAoB,cAAA,GAAAD,QAAA,CAAAxB,IAAA;EAAA;;;;;;;;;;;;;;;;AAKA;AAAA;AAAAD,aAAA,GAAAc,CAAA;AACaa,OAAA,CAAAC,sBAAsB,GAAG,OAAO","ignoreList":[]}