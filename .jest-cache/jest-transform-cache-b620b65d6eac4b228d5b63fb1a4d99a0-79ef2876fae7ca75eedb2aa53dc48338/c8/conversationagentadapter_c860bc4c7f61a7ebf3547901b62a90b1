c0d8c396ae0ae6efd2c8cef73b412787
"use strict";

/* istanbul ignore next */
function cov_1g5emrow0b() {
  var path = "E:\\zk-agent\\lib\\ag-ui\\agents\\conversation-agent-adapter.ts";
  var hash = "1a2dea684e506108670661310a2f45ea31c48559";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "E:\\zk-agent\\lib\\ag-ui\\agents\\conversation-agent-adapter.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 2,
          column: 62
        }
      },
      "1": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 3,
          column: 42
        }
      },
      "2": {
        start: {
          line: 5,
          column: 27
        },
        end: {
          line: 5,
          column: 66
        }
      },
      "3": {
        start: {
          line: 6,
          column: 24
        },
        end: {
          line: 6,
          column: 60
        }
      },
      "4": {
        start: {
          line: 13,
          column: 8
        },
        end: {
          line: 13,
          column: 33
        }
      },
      "5": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 20,
          column: 11
        }
      },
      "6": {
        start: {
          line: 21,
          column: 8
        },
        end: {
          line: 21,
          column: 67
        }
      },
      "7": {
        start: {
          line: 27,
          column: 8
        },
        end: {
          line: 75,
          column: 9
        }
      },
      "8": {
        start: {
          line: 29,
          column: 26
        },
        end: {
          line: 29,
          column: 95
        }
      },
      "9": {
        start: {
          line: 31,
          column: 12
        },
        end: {
          line: 37,
          column: 14
        }
      },
      "10": {
        start: {
          line: 39,
          column: 12
        },
        end: {
          line: 66,
          column: 15
        }
      },
      "11": {
        start: {
          line: 68,
          column: 12
        },
        end: {
          line: 68,
          column: 41
        }
      },
      "12": {
        start: {
          line: 69,
          column: 12
        },
        end: {
          line: 69,
          column: 38
        }
      },
      "13": {
        start: {
          line: 70,
          column: 12
        },
        end: {
          line: 70,
          column: 25
        }
      },
      "14": {
        start: {
          line: 73,
          column: 12
        },
        end: {
          line: 73,
          column: 75
        }
      },
      "15": {
        start: {
          line: 74,
          column: 12
        },
        end: {
          line: 74,
          column: 24
        }
      },
      "16": {
        start: {
          line: 81,
          column: 8
        },
        end: {
          line: 83,
          column: 9
        }
      },
      "17": {
        start: {
          line: 82,
          column: 12
        },
        end: {
          line: 82,
          column: 66
        }
      },
      "18": {
        start: {
          line: 85,
          column: 28
        },
        end: {
          line: 98,
          column: 9
        }
      },
      "19": {
        start: {
          line: 91,
          column: 53
        },
        end: {
          line: 97,
          column: 13
        }
      },
      "20": {
        start: {
          line: 100,
          column: 25
        },
        end: {
          line: 106,
          column: 9
        }
      },
      "21": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 108,
          column: 41
        }
      },
      "22": {
        start: {
          line: 114,
          column: 8
        },
        end: {
          line: 114,
          column: 45
        }
      },
      "23": {
        start: {
          line: 120,
          column: 8
        },
        end: {
          line: 120,
          column: 48
        }
      },
      "24": {
        start: {
          line: 126,
          column: 8
        },
        end: {
          line: 126,
          column: 45
        }
      },
      "25": {
        start: {
          line: 132,
          column: 8
        },
        end: {
          line: 132,
          column: 39
        }
      },
      "26": {
        start: {
          line: 138,
          column: 8
        },
        end: {
          line: 138,
          column: 42
        }
      },
      "27": {
        start: {
          line: 144,
          column: 8
        },
        end: {
          line: 144,
          column: 33
        }
      },
      "28": {
        start: {
          line: 150,
          column: 8
        },
        end: {
          line: 150,
          column: 31
        }
      },
      "29": {
        start: {
          line: 153,
          column: 0
        },
        end: {
          line: 153,
          column: 60
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 40
          },
          end: {
            line: 22,
            column: 5
          }
        },
        line: 12
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 26,
            column: 4
          },
          end: {
            line: 26,
            column: 5
          }
        },
        loc: {
          start: {
            line: 26,
            column: 44
          },
          end: {
            line: 76,
            column: 5
          }
        },
        line: 26
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 80,
            column: 4
          },
          end: {
            line: 80,
            column: 5
          }
        },
        loc: {
          start: {
            line: 80,
            column: 44
          },
          end: {
            line: 109,
            column: 5
          }
        },
        line: 80
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 91,
            column: 42
          },
          end: {
            line: 91,
            column: 43
          }
        },
        loc: {
          start: {
            line: 91,
            column: 53
          },
          end: {
            line: 97,
            column: 13
          }
        },
        line: 91
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 113,
            column: 4
          },
          end: {
            line: 113,
            column: 5
          }
        },
        loc: {
          start: {
            line: 113,
            column: 21
          },
          end: {
            line: 115,
            column: 5
          }
        },
        line: 113
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 119,
            column: 4
          },
          end: {
            line: 119,
            column: 5
          }
        },
        loc: {
          start: {
            line: 119,
            column: 24
          },
          end: {
            line: 121,
            column: 5
          }
        },
        line: 119
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 125,
            column: 4
          },
          end: {
            line: 125,
            column: 5
          }
        },
        loc: {
          start: {
            line: 125,
            column: 21
          },
          end: {
            line: 127,
            column: 5
          }
        },
        line: 125
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 131,
            column: 4
          },
          end: {
            line: 131,
            column: 5
          }
        },
        loc: {
          start: {
            line: 131,
            column: 15
          },
          end: {
            line: 133,
            column: 5
          }
        },
        line: 131
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 137,
            column: 4
          },
          end: {
            line: 137,
            column: 5
          }
        },
        loc: {
          start: {
            line: 137,
            column: 18
          },
          end: {
            line: 139,
            column: 5
          }
        },
        line: 137
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 143,
            column: 4
          },
          end: {
            line: 143,
            column: 5
          }
        },
        loc: {
          start: {
            line: 143,
            column: 22
          },
          end: {
            line: 145,
            column: 5
          }
        },
        line: 143
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 149,
            column: 4
          },
          end: {
            line: 149,
            column: 5
          }
        },
        loc: {
          start: {
            line: 149,
            column: 14
          },
          end: {
            line: 151,
            column: 5
          }
        },
        line: 149
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 12,
            column: 26
          },
          end: {
            line: 12,
            column: 38
          }
        },
        type: "default-arg",
        locations: [{
          start: {
            line: 12,
            column: 36
          },
          end: {
            line: 12,
            column: 38
          }
        }],
        line: 12
      },
      "1": {
        loc: {
          start: {
            line: 81,
            column: 8
          },
          end: {
            line: 83,
            column: 9
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 81,
            column: 8
          },
          end: {
            line: 83,
            column: 9
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 81
      },
      "2": {
        loc: {
          start: {
            line: 101,
            column: 22
          },
          end: {
            line: 101,
            column: 80
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 101,
            column: 22
          },
          end: {
            line: 101,
            column: 54
          }
        }, {
          start: {
            line: 101,
            column: 58
          },
          end: {
            line: 101,
            column: 80
          }
        }],
        line: 101
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0
    },
    b: {
      "0": [0],
      "1": [0, 0],
      "2": [0, 0]
    },
    inputSourceMap: {
      file: "E:\\zk-agent\\lib\\ag-ui\\agents\\conversation-agent-adapter.ts",
      mappings: "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",
      names: [],
      sources: ["E:\\zk-agent\\lib\\ag-ui\\agents\\conversation-agent-adapter.ts"],
      sourcesContent: ["// @ts-nocheck\nimport { EnhancedAgUIRuntime } from \"../protocol/enhanced-runtime\"\nimport { AgUIAgentManager } from \"../protocol/agent-manager\"\nimport type { AgentDefinition, Message, RunInput } from \"../protocol/complete-types\"\n\n/**\n * \u5BF9\u8BDD\u667A\u80FD\u4F53AG-UI\u9002\u914D\u5668\n * \u786E\u4FDD\u5BF9\u8BDD\u667A\u80FD\u4F53\u5B8C\u5168\u9075\u5FAAAG-UI\u534F\u8BAE\n */\nexport class ConversationAgentAdapter {\n  private runtime: EnhancedAgUIRuntime\n  private agentManager: AgUIAgentManager\n  private currentAgent: AgentDefinition | null = null\n\n  constructor(threadId: string, options: { debug?: boolean } = {}) {\n    this.runtime = new EnhancedAgUIRuntime({\n      threadId,\n      debug: options.debug,\n      apiEndpoint: \"/api/fastgpt/chat\",\n      enableMiddleware: true,\n      enableBuiltinTools: true,\n    })\n\n    this.agentManager = new AgUIAgentManager()\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u5BF9\u8BDD\u667A\u80FD\u4F53\n   */\n  async initialize(appId: string, apiKey: string, chatId?: string): Promise<AgentDefinition> {\n    try {\n      // \u4ECEFastGPT\u521B\u5EFA\u667A\u80FD\u4F53\u5B9A\u4E49\n      const agent = await this.agentManager.createAgentFromFastGPT(appId, apiKey, chatId)\n\n      // \u786E\u4FDD\u667A\u80FD\u4F53\u7B26\u5408AG-UI\u534F\u8BAE\n      agent.metadata = {\n        ...agent.metadata,\n        protocolVersion: \"1.0.0\",\n        capabilities: [\"text-chat\", \"file-upload\", \"context-memory\"],\n        category: \"conversation\",\n        type: \"conversation-agent\",\n      }\n\n      // \u6DFB\u52A0\u5BF9\u8BDD\u4E13\u7528\u5DE5\u5177\n      agent.tools.push(\n        {\n          type: \"function\",\n          function: {\n            name: \"get_conversation_history\",\n            description: \"\u83B7\u53D6\u5BF9\u8BDD\u5386\u53F2\",\n            parameters: {\n              type: \"object\",\n              properties: {\n                limit: { type: \"number\", description: \"\u8FD4\u56DE\u6D88\u606F\u6570\u91CF\", default: 10 },\n                before: { type: \"string\", description: \"\u5728\u6B64\u6D88\u606F\u4E4B\u524D\u7684\u5386\u53F2\" },\n              },\n              required: [],\n            },\n          },\n        },\n        {\n          type: \"function\",\n          function: {\n            name: \"summarize_conversation\",\n            description: \"\u603B\u7ED3\u5BF9\u8BDD\u5185\u5BB9\",\n            parameters: {\n              type: \"object\",\n              properties: {\n                messageCount: { type: \"number\", description: \"\u8981\u603B\u7ED3\u7684\u6D88\u606F\u6570\u91CF\", default: 20 },\n              },\n              required: [],\n            },\n          },\n        },\n      )\n\n      // \u8BBE\u7F6E\u667A\u80FD\u4F53\u5230\u8FD0\u884C\u65F6\n      this.runtime.setAgent(agent)\n      this.currentAgent = agent\n\n      return agent\n    } catch (error) {\n      console.error(\"Error initializing conversation agent:\", error)\n      throw error\n    }\n  }\n\n  /**\n   * \u53D1\u9001\u6D88\u606F\n   */\n  async sendMessage(content: string, attachments?: File[]): Promise<void> {\n    if (!this.currentAgent) {\n      throw new Error(\"Conversation agent not initialized\")\n    }\n\n    // \u521B\u5EFA\u7528\u6237\u6D88\u606F\n    const userMessage: Message = {\n      id: `user-${Date.now()}`,\n      role: \"user\",\n      content,\n      timestamp: Date.now(),\n      threadId: this.runtime.getState().threadId,\n      attachments: attachments?.map((file) => ({\n        id: `file-${Date.now()}-${Math.random()}`,\n        name: file.name,\n        type: file.type,\n        url: URL.createObjectURL(file),\n        size: file.size,\n      })),\n    }\n\n    // \u51C6\u5907\u8FD0\u884C\u8F93\u5165\n    const runInput: RunInput = {\n      threadId: this.runtime.getState().threadId || `thread-${Date.now()}`,\n      runId: `run-${Date.now()}`,\n      messages: [...this.runtime.getMessages(), userMessage],\n      tools: this.currentAgent.tools,\n      state: this.runtime.getState(),\n    }\n\n    // \u6267\u884C\u8FD0\u884C\n    await this.runtime.run(runInput)\n  }\n\n  /**\n   * \u83B7\u53D6\u4E8B\u4EF6\u6D41\n   */\n  getEventStream() {\n    return this.runtime.getEventStream()\n  }\n\n  /**\n   * \u83B7\u53D6\u6D88\u606F\u6D41\n   */\n  getMessagesStream() {\n    return this.runtime.getMessagesStream()\n  }\n\n  /**\n   * \u83B7\u53D6\u72B6\u6001\u6D41\n   */\n  getStateStream() {\n    return this.runtime.getStateStream()\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u72B6\u6001\n   */\n  getState() {\n    return this.runtime.getState()\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u6D88\u606F\n   */\n  getMessages() {\n    return this.runtime.getMessages()\n  }\n\n  /**\n   * \u83B7\u53D6\u5F53\u524D\u667A\u80FD\u4F53\n   */\n  getCurrentAgent() {\n    return this.currentAgent\n  }\n\n  /**\n   * \u6E05\u7406\u8D44\u6E90\n   */\n  dispose() {\n    this.runtime.dispose()\n  }\n}\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "1a2dea684e506108670661310a2f45ea31c48559"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1g5emrow0b = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1g5emrow0b();
cov_1g5emrow0b().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_1g5emrow0b().s[1]++;
exports.ConversationAgentAdapter = void 0;
// @ts-nocheck
const enhanced_runtime_1 =
/* istanbul ignore next */
(cov_1g5emrow0b().s[2]++, require("../protocol/enhanced-runtime"));
const agent_manager_1 =
/* istanbul ignore next */
(cov_1g5emrow0b().s[3]++, require("../protocol/agent-manager"));
/**
 * 对话智能体AG-UI适配器
 * 确保对话智能体完全遵循AG-UI协议
 */
class ConversationAgentAdapter {
  constructor(threadId, options =
  /* istanbul ignore next */
  (cov_1g5emrow0b().b[0][0]++, {})) {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[0]++;
    cov_1g5emrow0b().s[4]++;
    this.currentAgent = null;
    /* istanbul ignore next */
    cov_1g5emrow0b().s[5]++;
    this.runtime = new enhanced_runtime_1.EnhancedAgUIRuntime({
      threadId,
      debug: options.debug,
      apiEndpoint: "/api/fastgpt/chat",
      enableMiddleware: true,
      enableBuiltinTools: true
    });
    /* istanbul ignore next */
    cov_1g5emrow0b().s[6]++;
    this.agentManager = new agent_manager_1.AgUIAgentManager();
  }
  /**
   * 初始化对话智能体
   */
  async initialize(appId, apiKey, chatId) {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[1]++;
    cov_1g5emrow0b().s[7]++;
    try {
      // 从FastGPT创建智能体定义
      const agent =
      /* istanbul ignore next */
      (cov_1g5emrow0b().s[8]++, await this.agentManager.createAgentFromFastGPT(appId, apiKey, chatId));
      // 确保智能体符合AG-UI协议
      /* istanbul ignore next */
      cov_1g5emrow0b().s[9]++;
      agent.metadata = {
        ...agent.metadata,
        protocolVersion: "1.0.0",
        capabilities: ["text-chat", "file-upload", "context-memory"],
        category: "conversation",
        type: "conversation-agent"
      };
      // 添加对话专用工具
      /* istanbul ignore next */
      cov_1g5emrow0b().s[10]++;
      agent.tools.push({
        type: "function",
        function: {
          name: "get_conversation_history",
          description: "获取对话历史",
          parameters: {
            type: "object",
            properties: {
              limit: {
                type: "number",
                description: "返回消息数量",
                default: 10
              },
              before: {
                type: "string",
                description: "在此消息之前的历史"
              }
            },
            required: []
          }
        }
      }, {
        type: "function",
        function: {
          name: "summarize_conversation",
          description: "总结对话内容",
          parameters: {
            type: "object",
            properties: {
              messageCount: {
                type: "number",
                description: "要总结的消息数量",
                default: 20
              }
            },
            required: []
          }
        }
      });
      // 设置智能体到运行时
      /* istanbul ignore next */
      cov_1g5emrow0b().s[11]++;
      this.runtime.setAgent(agent);
      /* istanbul ignore next */
      cov_1g5emrow0b().s[12]++;
      this.currentAgent = agent;
      /* istanbul ignore next */
      cov_1g5emrow0b().s[13]++;
      return agent;
    } catch (error) {
      /* istanbul ignore next */
      cov_1g5emrow0b().s[14]++;
      console.error("Error initializing conversation agent:", error);
      /* istanbul ignore next */
      cov_1g5emrow0b().s[15]++;
      throw error;
    }
  }
  /**
   * 发送消息
   */
  async sendMessage(content, attachments) {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[2]++;
    cov_1g5emrow0b().s[16]++;
    if (!this.currentAgent) {
      /* istanbul ignore next */
      cov_1g5emrow0b().b[1][0]++;
      cov_1g5emrow0b().s[17]++;
      throw new Error("Conversation agent not initialized");
    } else
    /* istanbul ignore next */
    {
      cov_1g5emrow0b().b[1][1]++;
    }
    // 创建用户消息
    const userMessage =
    /* istanbul ignore next */
    (cov_1g5emrow0b().s[18]++, {
      id: `user-${Date.now()}`,
      role: "user",
      content,
      timestamp: Date.now(),
      threadId: this.runtime.getState().threadId,
      attachments: attachments?.map(file => {
        /* istanbul ignore next */
        cov_1g5emrow0b().f[3]++;
        cov_1g5emrow0b().s[19]++;
        return {
          id: `file-${Date.now()}-${Math.random()}`,
          name: file.name,
          type: file.type,
          url: URL.createObjectURL(file),
          size: file.size
        };
      })
    });
    // 准备运行输入
    const runInput =
    /* istanbul ignore next */
    (cov_1g5emrow0b().s[20]++, {
      threadId:
      /* istanbul ignore next */
      (cov_1g5emrow0b().b[2][0]++, this.runtime.getState().threadId) ||
      /* istanbul ignore next */
      (cov_1g5emrow0b().b[2][1]++, `thread-${Date.now()}`),
      runId: `run-${Date.now()}`,
      messages: [...this.runtime.getMessages(), userMessage],
      tools: this.currentAgent.tools,
      state: this.runtime.getState()
    });
    // 执行运行
    /* istanbul ignore next */
    cov_1g5emrow0b().s[21]++;
    await this.runtime.run(runInput);
  }
  /**
   * 获取事件流
   */
  getEventStream() {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[4]++;
    cov_1g5emrow0b().s[22]++;
    return this.runtime.getEventStream();
  }
  /**
   * 获取消息流
   */
  getMessagesStream() {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[5]++;
    cov_1g5emrow0b().s[23]++;
    return this.runtime.getMessagesStream();
  }
  /**
   * 获取状态流
   */
  getStateStream() {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[6]++;
    cov_1g5emrow0b().s[24]++;
    return this.runtime.getStateStream();
  }
  /**
   * 获取当前状态
   */
  getState() {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[7]++;
    cov_1g5emrow0b().s[25]++;
    return this.runtime.getState();
  }
  /**
   * 获取当前消息
   */
  getMessages() {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[8]++;
    cov_1g5emrow0b().s[26]++;
    return this.runtime.getMessages();
  }
  /**
   * 获取当前智能体
   */
  getCurrentAgent() {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[9]++;
    cov_1g5emrow0b().s[27]++;
    return this.currentAgent;
  }
  /**
   * 清理资源
   */
  dispose() {
    /* istanbul ignore next */
    cov_1g5emrow0b().f[10]++;
    cov_1g5emrow0b().s[28]++;
    this.runtime.dispose();
  }
}
/* istanbul ignore next */
cov_1g5emrow0b().s[29]++;
exports.ConversationAgentAdapter = ConversationAgentAdapter;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWc1ZW1yb3cwYiIsImFjdHVhbENvdmVyYWdlIiwicyIsImVuaGFuY2VkX3J1bnRpbWVfMSIsInJlcXVpcmUiLCJhZ2VudF9tYW5hZ2VyXzEiLCJDb252ZXJzYXRpb25BZ2VudEFkYXB0ZXIiLCJjb25zdHJ1Y3RvciIsInRocmVhZElkIiwib3B0aW9ucyIsImIiLCJmIiwiY3VycmVudEFnZW50IiwicnVudGltZSIsIkVuaGFuY2VkQWdVSVJ1bnRpbWUiLCJkZWJ1ZyIsImFwaUVuZHBvaW50IiwiZW5hYmxlTWlkZGxld2FyZSIsImVuYWJsZUJ1aWx0aW5Ub29scyIsImFnZW50TWFuYWdlciIsIkFnVUlBZ2VudE1hbmFnZXIiLCJpbml0aWFsaXplIiwiYXBwSWQiLCJhcGlLZXkiLCJjaGF0SWQiLCJhZ2VudCIsImNyZWF0ZUFnZW50RnJvbUZhc3RHUFQiLCJtZXRhZGF0YSIsInByb3RvY29sVmVyc2lvbiIsImNhcGFiaWxpdGllcyIsImNhdGVnb3J5IiwidHlwZSIsInRvb2xzIiwicHVzaCIsImZ1bmN0aW9uIiwibmFtZSIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInByb3BlcnRpZXMiLCJsaW1pdCIsImRlZmF1bHQiLCJiZWZvcmUiLCJyZXF1aXJlZCIsIm1lc3NhZ2VDb3VudCIsInNldEFnZW50IiwiZXJyb3IiLCJjb25zb2xlIiwic2VuZE1lc3NhZ2UiLCJjb250ZW50IiwiYXR0YWNobWVudHMiLCJFcnJvciIsInVzZXJNZXNzYWdlIiwiaWQiLCJEYXRlIiwibm93Iiwicm9sZSIsInRpbWVzdGFtcCIsImdldFN0YXRlIiwibWFwIiwiZmlsZSIsIk1hdGgiLCJyYW5kb20iLCJ1cmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJzaXplIiwicnVuSW5wdXQiLCJydW5JZCIsIm1lc3NhZ2VzIiwiZ2V0TWVzc2FnZXMiLCJzdGF0ZSIsInJ1biIsImdldEV2ZW50U3RyZWFtIiwiZ2V0TWVzc2FnZXNTdHJlYW0iLCJnZXRTdGF0ZVN0cmVhbSIsImdldEN1cnJlbnRBZ2VudCIsImRpc3Bvc2UiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiRTpcXHprLWFnZW50XFxsaWJcXGFnLXVpXFxhZ2VudHNcXGNvbnZlcnNhdGlvbi1hZ2VudC1hZGFwdGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG5pbXBvcnQgeyBFbmhhbmNlZEFnVUlSdW50aW1lIH0gZnJvbSBcIi4uL3Byb3RvY29sL2VuaGFuY2VkLXJ1bnRpbWVcIlxuaW1wb3J0IHsgQWdVSUFnZW50TWFuYWdlciB9IGZyb20gXCIuLi9wcm90b2NvbC9hZ2VudC1tYW5hZ2VyXCJcbmltcG9ydCB0eXBlIHsgQWdlbnREZWZpbml0aW9uLCBNZXNzYWdlLCBSdW5JbnB1dCB9IGZyb20gXCIuLi9wcm90b2NvbC9jb21wbGV0ZS10eXBlc1wiXG5cbi8qKlxuICog5a+56K+d5pm66IO95L2TQUctVUnpgILphY3lmahcbiAqIOehruS/neWvueivneaZuuiDveS9k+WujOWFqOmBteW+qkFHLVVJ5Y2P6K6uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb252ZXJzYXRpb25BZ2VudEFkYXB0ZXIge1xuICBwcml2YXRlIHJ1bnRpbWU6IEVuaGFuY2VkQWdVSVJ1bnRpbWVcbiAgcHJpdmF0ZSBhZ2VudE1hbmFnZXI6IEFnVUlBZ2VudE1hbmFnZXJcbiAgcHJpdmF0ZSBjdXJyZW50QWdlbnQ6IEFnZW50RGVmaW5pdGlvbiB8IG51bGwgPSBudWxsXG5cbiAgY29uc3RydWN0b3IodGhyZWFkSWQ6IHN0cmluZywgb3B0aW9uczogeyBkZWJ1Zz86IGJvb2xlYW4gfSA9IHt9KSB7XG4gICAgdGhpcy5ydW50aW1lID0gbmV3IEVuaGFuY2VkQWdVSVJ1bnRpbWUoe1xuICAgICAgdGhyZWFkSWQsXG4gICAgICBkZWJ1Zzogb3B0aW9ucy5kZWJ1ZyxcbiAgICAgIGFwaUVuZHBvaW50OiBcIi9hcGkvZmFzdGdwdC9jaGF0XCIsXG4gICAgICBlbmFibGVNaWRkbGV3YXJlOiB0cnVlLFxuICAgICAgZW5hYmxlQnVpbHRpblRvb2xzOiB0cnVlLFxuICAgIH0pXG5cbiAgICB0aGlzLmFnZW50TWFuYWdlciA9IG5ldyBBZ1VJQWdlbnRNYW5hZ2VyKClcbiAgfVxuXG4gIC8qKlxuICAgKiDliJ3lp4vljJblr7nor53mmbrog73kvZNcbiAgICovXG4gIGFzeW5jIGluaXRpYWxpemUoYXBwSWQ6IHN0cmluZywgYXBpS2V5OiBzdHJpbmcsIGNoYXRJZD86IHN0cmluZyk6IFByb21pc2U8QWdlbnREZWZpbml0aW9uPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIOS7jkZhc3RHUFTliJvlu7rmmbrog73kvZPlrprkuYlcbiAgICAgIGNvbnN0IGFnZW50ID0gYXdhaXQgdGhpcy5hZ2VudE1hbmFnZXIuY3JlYXRlQWdlbnRGcm9tRmFzdEdQVChhcHBJZCwgYXBpS2V5LCBjaGF0SWQpXG5cbiAgICAgIC8vIOehruS/neaZuuiDveS9k+espuWQiEFHLVVJ5Y2P6K6uXG4gICAgICBhZ2VudC5tZXRhZGF0YSA9IHtcbiAgICAgICAgLi4uYWdlbnQubWV0YWRhdGEsXG4gICAgICAgIHByb3RvY29sVmVyc2lvbjogXCIxLjAuMFwiLFxuICAgICAgICBjYXBhYmlsaXRpZXM6IFtcInRleHQtY2hhdFwiLCBcImZpbGUtdXBsb2FkXCIsIFwiY29udGV4dC1tZW1vcnlcIl0sXG4gICAgICAgIGNhdGVnb3J5OiBcImNvbnZlcnNhdGlvblwiLFxuICAgICAgICB0eXBlOiBcImNvbnZlcnNhdGlvbi1hZ2VudFwiLFxuICAgICAgfVxuXG4gICAgICAvLyDmt7vliqDlr7nor53kuJPnlKjlt6XlhbdcbiAgICAgIGFnZW50LnRvb2xzLnB1c2goXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IFwiZ2V0X2NvbnZlcnNhdGlvbl9oaXN0b3J5XCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCLojrflj5blr7nor53ljoblj7JcIixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJvYmplY3RcIixcbiAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgIGxpbWl0OiB7IHR5cGU6IFwibnVtYmVyXCIsIGRlc2NyaXB0aW9uOiBcIui/lOWbnua2iOaBr+aVsOmHj1wiLCBkZWZhdWx0OiAxMCB9LFxuICAgICAgICAgICAgICAgIGJlZm9yZTogeyB0eXBlOiBcInN0cmluZ1wiLCBkZXNjcmlwdGlvbjogXCLlnKjmraTmtojmga/kuYvliY3nmoTljoblj7JcIiB9LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICByZXF1aXJlZDogW10sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgIG5hbWU6IFwic3VtbWFyaXplX2NvbnZlcnNhdGlvblwiLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwi5oC757uT5a+56K+d5YaF5a65XCIsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwib2JqZWN0XCIsXG4gICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ291bnQ6IHsgdHlwZTogXCJudW1iZXJcIiwgZGVzY3JpcHRpb246IFwi6KaB5oC757uT55qE5raI5oGv5pWw6YePXCIsIGRlZmF1bHQ6IDIwIH0sXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHJlcXVpcmVkOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIClcblxuICAgICAgLy8g6K6+572u5pm66IO95L2T5Yiw6L+Q6KGM5pe2XG4gICAgICB0aGlzLnJ1bnRpbWUuc2V0QWdlbnQoYWdlbnQpXG4gICAgICB0aGlzLmN1cnJlbnRBZ2VudCA9IGFnZW50XG5cbiAgICAgIHJldHVybiBhZ2VudFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW5pdGlhbGl6aW5nIGNvbnZlcnNhdGlvbiBhZ2VudDpcIiwgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiDlj5HpgIHmtojmga9cbiAgICovXG4gIGFzeW5jIHNlbmRNZXNzYWdlKGNvbnRlbnQ6IHN0cmluZywgYXR0YWNobWVudHM/OiBGaWxlW10pOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAoIXRoaXMuY3VycmVudEFnZW50KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb252ZXJzYXRpb24gYWdlbnQgbm90IGluaXRpYWxpemVkXCIpXG4gICAgfVxuXG4gICAgLy8g5Yib5bu655So5oi35raI5oGvXG4gICAgY29uc3QgdXNlck1lc3NhZ2U6IE1lc3NhZ2UgPSB7XG4gICAgICBpZDogYHVzZXItJHtEYXRlLm5vdygpfWAsXG4gICAgICByb2xlOiBcInVzZXJcIixcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB0aHJlYWRJZDogdGhpcy5ydW50aW1lLmdldFN0YXRlKCkudGhyZWFkSWQsXG4gICAgICBhdHRhY2htZW50czogYXR0YWNobWVudHM/Lm1hcCgoZmlsZSkgPT4gKHtcbiAgICAgICAgaWQ6IGBmaWxlLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgdHlwZTogZmlsZS50eXBlLFxuICAgICAgICB1cmw6IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSksXG4gICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgIH0pKSxcbiAgICB9XG5cbiAgICAvLyDlh4blpIfov5DooYzovpPlhaVcbiAgICBjb25zdCBydW5JbnB1dDogUnVuSW5wdXQgPSB7XG4gICAgICB0aHJlYWRJZDogdGhpcy5ydW50aW1lLmdldFN0YXRlKCkudGhyZWFkSWQgfHwgYHRocmVhZC0ke0RhdGUubm93KCl9YCxcbiAgICAgIHJ1bklkOiBgcnVuLSR7RGF0ZS5ub3coKX1gLFxuICAgICAgbWVzc2FnZXM6IFsuLi50aGlzLnJ1bnRpbWUuZ2V0TWVzc2FnZXMoKSwgdXNlck1lc3NhZ2VdLFxuICAgICAgdG9vbHM6IHRoaXMuY3VycmVudEFnZW50LnRvb2xzLFxuICAgICAgc3RhdGU6IHRoaXMucnVudGltZS5nZXRTdGF0ZSgpLFxuICAgIH1cblxuICAgIC8vIOaJp+ihjOi/kOihjFxuICAgIGF3YWl0IHRoaXMucnVudGltZS5ydW4ocnVuSW5wdXQpXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5LqL5Lu25rWBXG4gICAqL1xuICBnZXRFdmVudFN0cmVhbSgpIHtcbiAgICByZXR1cm4gdGhpcy5ydW50aW1lLmdldEV2ZW50U3RyZWFtKClcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5bmtojmga/mtYFcbiAgICovXG4gIGdldE1lc3NhZ2VzU3RyZWFtKCkge1xuICAgIHJldHVybiB0aGlzLnJ1bnRpbWUuZ2V0TWVzc2FnZXNTdHJlYW0oKVxuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPlueKtuaAgea1gVxuICAgKi9cbiAgZ2V0U3RhdGVTdHJlYW0oKSB7XG4gICAgcmV0dXJuIHRoaXMucnVudGltZS5nZXRTdGF0ZVN0cmVhbSgpXG4gIH1cblxuICAvKipcbiAgICog6I635Y+W5b2T5YmN54q25oCBXG4gICAqL1xuICBnZXRTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5ydW50aW1lLmdldFN0YXRlKClcbiAgfVxuXG4gIC8qKlxuICAgKiDojrflj5blvZPliY3mtojmga9cbiAgICovXG4gIGdldE1lc3NhZ2VzKCkge1xuICAgIHJldHVybiB0aGlzLnJ1bnRpbWUuZ2V0TWVzc2FnZXMoKVxuICB9XG5cbiAgLyoqXG4gICAqIOiOt+WPluW9k+WJjeaZuuiDveS9k1xuICAgKi9cbiAgZ2V0Q3VycmVudEFnZW50KCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRBZ2VudFxuICB9XG5cbiAgLyoqXG4gICAqIOa4heeQhui1hOa6kFxuICAgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLnJ1bnRpbWUuZGlzcG9zZSgpXG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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