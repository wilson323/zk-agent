{"version":3,"sources":["E:\\zk-agent\\__tests__\\config\\database.test.js"],"sourcesContent":["/**\r\n * @file database.test.js\r\n * @description 数据库配置测试\r\n * @author ZK-Agent Team\r\n * @date 2025-05-25\r\n */\r\n\r\nconst { getDatabaseConfig, validateDatabaseConfig } = require('../../config/database.config');\r\n\r\ndescribe('数据库配置测试', () => {\r\n  test('应该能够获取测试数据库配置', () => {\r\n    process.env.NODE_ENV = 'test';\r\n    const config = getDatabaseConfig();\r\n    \r\n    expect(config).toBeDefined();\r\n    expect(config.database).toBe('zkagent2');\r\n    expect(config.port).toBe(5432);\r\n    expect(config.password).toBe('123456');\r\n  });\r\n\r\n  test('应该能够获取生产数据库配置', () => {\r\n    process.env.NODE_ENV = 'production';\r\n    const config = getDatabaseConfig();\r\n    \r\n    expect(config).toBeDefined();\r\n    expect(config.database).toBe('zkagent1');\r\n    expect(config.port).toBe(5432);\r\n    expect(config.password).toBe('123456');\r\n  });\r\n\r\n  test('应该能够验证数据库配置', () => {\r\n    expect(validateDatabaseConfig('test')).toBe(true);\r\n    expect(validateDatabaseConfig('production')).toBe(true);\r\n    expect(validateDatabaseConfig('invalid')).toBe(false);\r\n  });\r\n\r\n  test('数据库连接字符串格式正确', () => {\r\n    process.env.NODE_ENV = 'test';\r\n    const config = getDatabaseConfig();\r\n    \r\n    expect(config.connectionString).toMatch(/^postgresql:\\/\\/postgres:123456@localhost:5432\\/zkagent2$/);\r\n  });\r\n}); "],"names":["getDatabaseConfig","validateDatabaseConfig","require","describe","test","process","env","NODE_ENV","config","expect","toBeDefined","database","toBe","port","password","connectionString","toMatch"],"mappings":"AAAA;;;;;CAKC;AAED,MAAM,EAAEA,iBAAiB,EAAEC,sBAAsB,EAAE,GAAGC,QAAQ;AAE9DC,SAAS,WAAW;IAClBC,KAAK,iBAAiB;QACpBC,QAAQC,GAAG,CAACC,QAAQ,GAAG;QACvB,MAAMC,SAASR;QAEfS,OAAOD,QAAQE,WAAW;QAC1BD,OAAOD,OAAOG,QAAQ,EAAEC,IAAI,CAAC;QAC7BH,OAAOD,OAAOK,IAAI,EAAED,IAAI,CAAC;QACzBH,OAAOD,OAAOM,QAAQ,EAAEF,IAAI,CAAC;IAC/B;IAEAR,KAAK,iBAAiB;QACpBC,QAAQC,GAAG,CAACC,QAAQ,GAAG;QACvB,MAAMC,SAASR;QAEfS,OAAOD,QAAQE,WAAW;QAC1BD,OAAOD,OAAOG,QAAQ,EAAEC,IAAI,CAAC;QAC7BH,OAAOD,OAAOK,IAAI,EAAED,IAAI,CAAC;QACzBH,OAAOD,OAAOM,QAAQ,EAAEF,IAAI,CAAC;IAC/B;IAEAR,KAAK,eAAe;QAClBK,OAAOR,uBAAuB,SAASW,IAAI,CAAC;QAC5CH,OAAOR,uBAAuB,eAAeW,IAAI,CAAC;QAClDH,OAAOR,uBAAuB,YAAYW,IAAI,CAAC;IACjD;IAEAR,KAAK,gBAAgB;QACnBC,QAAQC,GAAG,CAACC,QAAQ,GAAG;QACvB,MAAMC,SAASR;QAEfS,OAAOD,OAAOO,gBAAgB,EAAEC,OAAO,CAAC;IAC1C;AACF"}