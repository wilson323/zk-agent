b4ccbf7ccf403a1a45044e8da923085c
/**
 * @file Enhanced Database Connection Tests
 * @description 增强数据库连接管理器的测试文件
 * @author ZK-Agent Team
 * @date 2024-12-19
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _globals = require("@jest/globals");
const _enhancedconnection = require("../../lib/database/enhanced-connection");
const _client = require("@prisma/client");
// 模拟Prisma客户端
_globals.jest.mock('@prisma/client');
const MockedPrismaClient = _client.PrismaClient;
(0, _globals.describe)('增强数据库连接管理器测试', ()=>{
    let connection;
    let mockPrismaClient;
    (0, _globals.beforeEach)(()=>{
        // 重置所有模拟
        _globals.jest.clearAllMocks();
        // 创建模拟的Prisma客户端
        mockPrismaClient = {
            $connect: _globals.jest.fn(),
            $disconnect: _globals.jest.fn(),
            $queryRaw: _globals.jest.fn()
        };
        MockedPrismaClient.mockImplementation(()=>mockPrismaClient);
        // 创建新的连接实例
        connection = new _enhancedconnection.EnhancedDatabaseConnection({
            maxConnections: 10,
            minConnections: 2
        }, {
            enabled: true,
            maxRetries: 3
        }, {
            enabled: true,
            intervalMs: 5000
        });
    });
    (0, _globals.afterEach)(async ()=>{
        // 清理连接
        if (connection.isConnected()) {
            await connection.disconnect();
        }
    });
    (0, _globals.describe)('连接管理', ()=>{
        (0, _globals.it)('应该成功连接到数据库', async ()=>{
            // 模拟成功连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await connection.connect();
            (0, _globals.expect)(connection.isConnected()).toBe(true);
            (0, _globals.expect)(connection.getState()).toBe(_enhancedconnection.ConnectionState.CONNECTED);
            (0, _globals.expect)(mockPrismaClient.$connect).toHaveBeenCalled();
        });
        (0, _globals.it)('应该处理连接失败', async ()=>{
            // 模拟连接失败
            const connectionError = new Error('Connection failed');
            mockPrismaClient.$connect.mockRejectedValue(connectionError);
            await (0, _globals.expect)(connection.connect()).rejects.toThrow('Connection failed');
            (0, _globals.expect)(connection.getState()).toBe(_enhancedconnection.ConnectionState.FAILED);
        });
        (0, _globals.it)('应该成功断开连接', async ()=>{
            // 先连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await connection.connect();
            // 模拟断开连接
            mockPrismaClient.$disconnect.mockResolvedValue(undefined);
            await connection.disconnect();
            (0, _globals.expect)(connection.isConnected()).toBe(false);
            (0, _globals.expect)(connection.getState()).toBe(_enhancedconnection.ConnectionState.DISCONNECTED);
            (0, _globals.expect)(mockPrismaClient.$disconnect).toHaveBeenCalled();
        });
    });
    (0, _globals.describe)('重连机制', ()=>{
        (0, _globals.it)('应该在连接失败后自动重连', async ()=>{
            // 配置重连
            connection.updateConfig(undefined, {
                enabled: true,
                maxRetries: 2,
                retryDelayMs: 100
            });
            // 第一次连接失败
            mockPrismaClient.$connect.mockRejectedValueOnce(new Error('First attempt failed')).mockResolvedValueOnce(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            // 监听重连事件
            const reconnectingPromise = new Promise((resolve)=>{
                connection.once('reconnecting', resolve);
            });
            const reconnectedPromise = new Promise((resolve)=>{
                connection.once('reconnected', resolve);
            });
            // 尝试连接（会失败并触发重连）
            await (0, _globals.expect)(connection.connect()).rejects.toThrow('First attempt failed');
            // 等待重连事件
            await reconnectingPromise;
            await reconnectedPromise;
            (0, _globals.expect)(connection.isConnected()).toBe(true);
        }, 10000);
        (0, _globals.it)('应该在达到最大重试次数后停止重连', async ()=>{
            // 配置重连
            connection.updateConfig(undefined, {
                enabled: true,
                maxRetries: 1,
                retryDelayMs: 100
            });
            // 所有连接尝试都失败
            mockPrismaClient.$connect.mockRejectedValue(new Error('Connection always fails'));
            // 监听错误事件
            const errorPromise = new Promise((resolve)=>{
                connection.once('error', resolve);
            });
            // 尝试连接
            await (0, _globals.expect)(connection.connect()).rejects.toThrow('Connection always fails');
            // 等待错误事件
            await errorPromise;
            // 等待重连尝试完成
            await new Promise((resolve)=>setTimeout(resolve, 500));
            (0, _globals.expect)(connection.getState()).toBe(_enhancedconnection.ConnectionState.FAILED);
        }, 10000);
    });
    (0, _globals.describe)('健康检查', ()=>{
        (0, _globals.it)('应该定期执行健康检查', async ()=>{
            // 启用健康检查
            connection.updateConfig(undefined, undefined, {
                enabled: true,
                intervalMs: 200
            });
            // 模拟成功连接和健康检查
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    health_check: 1
                }
            ]);
            await connection.connect();
            // 监听健康检查事件
            const healthCheckPromise = new Promise((resolve)=>{
                connection.once('healthCheck', resolve);
            });
            // 等待健康检查执行
            const result = await healthCheckPromise;
            (0, _globals.expect)(result).toBe(true);
            (0, _globals.expect)(mockPrismaClient.$queryRaw).toHaveBeenCalledWith(_globals.expect.arrayContaining([
                _globals.expect.stringContaining('health_check')
            ]));
        }, 5000);
        (0, _globals.it)('应该处理健康检查失败', async ()=>{
            // 启用健康检查
            connection.updateConfig(undefined, undefined, {
                enabled: true,
                intervalMs: 200,
                timeoutMs: 100
            });
            // 模拟成功连接但健康检查失败
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValueOnce([
                {
                    test: 1
                }
            ]) // 初始连接验证
            .mockRejectedValue(new Error('Health check failed')) // 健康检查失败
            ;
            await connection.connect();
            // 监听健康检查失败事件
            const healthCheckPromise = new Promise((resolve)=>{
                connection.once('healthCheck', resolve);
            });
            // 等待健康检查失败
            const result = await healthCheckPromise;
            (0, _globals.expect)(result).toBe(false);
        }, 5000);
    });
    (0, _globals.describe)('查询执行', ()=>{
        (0, _globals.it)('应该成功执行查询并更新统计信息', async ()=>{
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await connection.connect();
            // 执行查询
            const queryResult = await connection.executeQuery(async (client)=>{
                return await client.$queryRaw`SELECT * FROM users LIMIT 1`;
            });
            (0, _globals.expect)(queryResult).toEqual([
                {
                    test: 1
                }
            ]);
            // 检查统计信息
            const stats = connection.getStats();
            (0, _globals.expect)(stats.totalQueries).toBeGreaterThan(0);
            (0, _globals.expect)(stats.avgLatency).toBeGreaterThan(0);
        });
        (0, _globals.it)('应该处理查询失败并更新失败统计', async ()=>{
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValueOnce([
                {
                    test: 1
                }
            ]) // 连接验证
            .mockRejectedValueOnce(new Error('Query failed')) // 查询失败
            ;
            await connection.connect();
            // 执行失败的查询
            await (0, _globals.expect)(connection.executeQuery(async (client)=>{
                return await client.$queryRaw`SELECT * FROM non_existent_table`;
            })).rejects.toThrow('Query failed');
            // 检查失败统计
            const stats = connection.getStats();
            (0, _globals.expect)(stats.failedQueries).toBeGreaterThan(0);
        });
        (0, _globals.it)('应该在未连接时拒绝查询', async ()=>{
            // 确保未连接
            (0, _globals.expect)(connection.isConnected()).toBe(false);
            // 尝试执行查询
            await (0, _globals.expect)(connection.executeQuery(async (client)=>{
                return await client.$queryRaw`SELECT 1`;
            })).rejects.toThrow('Database not connected');
        });
    });
    (0, _globals.describe)('统计信息', ()=>{
        (0, _globals.it)('应该正确跟踪连接统计信息', async ()=>{
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await connection.connect();
            // 获取统计信息
            const stats = connection.getStats();
            (0, _globals.expect)(stats.state).toBe(_enhancedconnection.ConnectionState.CONNECTED);
            (0, _globals.expect)(stats.connectedAt).toBeInstanceOf(Date);
            (0, _globals.expect)(stats.reconnectAttempts).toBe(0);
            (0, _globals.expect)(stats.uptime).toBeGreaterThanOrEqual(0);
        });
        (0, _globals.it)('应该正确计算运行时间', async ()=>{
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await connection.connect();
            // 等待一段时间
            await new Promise((resolve)=>setTimeout(resolve, 100));
            // 检查运行时间
            const stats = connection.getStats();
            (0, _globals.expect)(stats.uptime).toBeGreaterThan(90) // 至少90ms
            ;
        });
    });
    (0, _globals.describe)('配置更新', ()=>{
        (0, _globals.it)('应该允许动态更新连接池配置', ()=>{
            const newPoolConfig = {
                maxConnections: 20,
                minConnections: 5
            };
            connection.updateConfig(newPoolConfig);
            // 配置应该已更新（无法直接验证私有属性，但不应抛出错误）
            (0, _globals.expect)(()=>connection.updateConfig(newPoolConfig)).not.toThrow();
        });
        (0, _globals.it)('应该允许动态更新重连配置', ()=>{
            const newReconnectionConfig = {
                enabled: false,
                maxRetries: 5
            };
            connection.updateConfig(undefined, newReconnectionConfig);
            // 配置应该已更新
            (0, _globals.expect)(()=>connection.updateConfig(undefined, newReconnectionConfig)).not.toThrow();
        });
        (0, _globals.it)('应该允许动态更新健康检查配置', async ()=>{
            // 先连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await connection.connect();
            const newHealthCheckConfig = {
                enabled: true,
                intervalMs: 1000
            };
            connection.updateConfig(undefined, undefined, newHealthCheckConfig);
            // 配置应该已更新
            (0, _globals.expect)(()=>connection.updateConfig(undefined, undefined, newHealthCheckConfig)).not.toThrow();
        });
    });
    (0, _globals.describe)('全局实例测试', ()=>{
        (0, _globals.it)('应该提供全局数据库连接实例', ()=>{
            (0, _globals.expect)(_enhancedconnection.enhancedDb).toBeInstanceOf(_enhancedconnection.EnhancedDatabaseConnection);
        });
        (0, _globals.it)('应该提供便捷的连接函数', async ()=>{
            // 模拟成功连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await (0, _enhancedconnection.connectDatabase)();
            (0, _globals.expect)((0, _enhancedconnection.isDatabaseConnected)()).toBe(true);
            const stats = (0, _enhancedconnection.getDatabaseStats)();
            (0, _globals.expect)(stats.state).toBe(_enhancedconnection.ConnectionState.CONNECTED);
            await (0, _enhancedconnection.disconnectDatabase)();
            (0, _globals.expect)((0, _enhancedconnection.isDatabaseConnected)()).toBe(false);
        });
        (0, _globals.it)('应该提供便捷的查询执行函数', async ()=>{
            // 模拟成功连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    result: 'success'
                }
            ]);
            await (0, _enhancedconnection.connectDatabase)();
            const result = await (0, _enhancedconnection.executeQuery)(async (client)=>{
                return await client.$queryRaw`SELECT 'success' as result`;
            });
            (0, _globals.expect)(result).toEqual([
                {
                    result: 'success'
                }
            ]);
            await (0, _enhancedconnection.disconnectDatabase)();
        });
    });
    (0, _globals.describe)('错误处理', ()=>{
        (0, _globals.it)('应该正确识别连接相关错误', async ()=>{
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValueOnce([
                {
                    test: 1
                }
            ]) // 连接验证
            .mockRejectedValueOnce(new Error('ECONNREFUSED: Connection refused')) // 连接错误
            ;
            await connection.connect();
            // 监听错误事件
            const errorPromise = new Promise((resolve)=>{
                connection.once('error', resolve);
            });
            // 执行会导致连接错误的查询
            await (0, _globals.expect)(connection.executeQuery(async (client)=>{
                return await client.$queryRaw`SELECT 1`;
            })).rejects.toThrow('ECONNREFUSED');
            // 等待错误事件
            await errorPromise;
        });
        (0, _globals.it)('应该处理优雅关闭', async ()=>{
            // 连接数据库
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            mockPrismaClient.$disconnect.mockResolvedValue(undefined);
            await connection.connect();
            // 执行优雅关闭
            await (0, _globals.expect)(connection.gracefulShutdown()).resolves.not.toThrow();
        });
    });
    (0, _globals.describe)('事件系统', ()=>{
        (0, _globals.it)('应该正确触发连接事件', async ()=>{
            // 监听连接事件
            const connectedPromise = new Promise((resolve)=>{
                connection.once('connected', resolve);
            });
            // 模拟成功连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await connection.connect();
            // 等待连接事件
            await connectedPromise;
        });
        (0, _globals.it)('应该正确触发断开连接事件', async ()=>{
            // 先连接
            mockPrismaClient.$connect.mockResolvedValue(undefined);
            mockPrismaClient.$queryRaw.mockResolvedValue([
                {
                    test: 1
                }
            ]);
            await connection.connect();
            // 监听断开连接事件
            const disconnectedPromise = new Promise((resolve)=>{
                connection.once('disconnected', resolve);
            });
            // 模拟断开连接
            mockPrismaClient.$disconnect.mockResolvedValue(undefined);
            await connection.disconnect();
            // 等待断开连接事件
            await disconnectedPromise;
        });
        (0, _globals.it)('应该正确触发错误事件', async ()=>{
            // 监听错误事件
            const errorPromise = new Promise((resolve)=>{
                connection.once('error', resolve);
            });
            // 模拟连接失败
            const connectionError = new Error('Connection failed');
            mockPrismaClient.$connect.mockRejectedValue(connectionError);
            await (0, _globals.expect)(connection.connect()).rejects.toThrow('Connection failed');
            // 等待错误事件
            const error = await errorPromise;
            (0, _globals.expect)(error).toBe(connectionError);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6XFx6ay1hZ2VudFxcdGVzdHNcXGRhdGFiYXNlXFxlbmhhbmNlZC1jb25uZWN0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAZmlsZSBFbmhhbmNlZCBEYXRhYmFzZSBDb25uZWN0aW9uIFRlc3RzXG4gKiBAZGVzY3JpcHRpb24g5aKe5by65pWw5o2u5bqT6L+e5o6l566h55CG5Zmo55qE5rWL6K+V5paH5Lu2XG4gKiBAYXV0aG9yIFpLLUFnZW50IFRlYW1cbiAqIEBkYXRlIDIwMjQtMTItMTlcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgaXQsIGV4cGVjdCwgYmVmb3JlRWFjaCwgYWZ0ZXJFYWNoLCBqZXN0IH0gZnJvbSAnQGplc3QvZ2xvYmFscydcbmltcG9ydCB7IFxuICBFbmhhbmNlZERhdGFiYXNlQ29ubmVjdGlvbiwgXG4gIENvbm5lY3Rpb25TdGF0ZSxcbiAgZW5oYW5jZWREYixcbiAgY29ubmVjdERhdGFiYXNlLFxuICBkaXNjb25uZWN0RGF0YWJhc2UsXG4gIGdldERhdGFiYXNlU3RhdHMsXG4gIGlzRGF0YWJhc2VDb25uZWN0ZWQsXG4gIGV4ZWN1dGVRdWVyeVxufSBmcm9tICcuLi8uLi9saWIvZGF0YWJhc2UvZW5oYW5jZWQtY29ubmVjdGlvbidcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xuXG4vLyDmqKHmi59QcmlzbWHlrqLmiLfnq69cbmplc3QubW9jaygnQHByaXNtYS9jbGllbnQnKVxuY29uc3QgTW9ja2VkUHJpc21hQ2xpZW50ID0gUHJpc21hQ2xpZW50IGFzIGplc3QuTW9ja2VkQ2xhc3M8dHlwZW9mIFByaXNtYUNsaWVudD5cblxuZGVzY3JpYmUoJ+WinuW8uuaVsOaNruW6k+i/nuaOpeeuoeeQhuWZqOa1i+ivlScsICgpID0+IHtcbiAgbGV0IGNvbm5lY3Rpb246IEVuaGFuY2VkRGF0YWJhc2VDb25uZWN0aW9uXG4gIGxldCBtb2NrUHJpc21hQ2xpZW50OiBqZXN0Lk1vY2tlZDxQcmlzbWFDbGllbnQ+XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8g6YeN572u5omA5pyJ5qih5oufXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKClcbiAgICBcbiAgICAvLyDliJvlu7rmqKHmi5/nmoRQcmlzbWHlrqLmiLfnq69cbiAgICBtb2NrUHJpc21hQ2xpZW50ID0ge1xuICAgICAgJGNvbm5lY3Q6IGplc3QuZm4oKSxcbiAgICAgICRkaXNjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgICAkcXVlcnlSYXc6IGplc3QuZm4oKSxcbiAgICB9IGFzIGFueVxuICAgIFxuICAgIE1vY2tlZFByaXNtYUNsaWVudC5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja1ByaXNtYUNsaWVudClcbiAgICBcbiAgICAvLyDliJvlu7rmlrDnmoTov57mjqXlrp7kvotcbiAgICBjb25uZWN0aW9uID0gbmV3IEVuaGFuY2VkRGF0YWJhc2VDb25uZWN0aW9uKFxuICAgICAgeyBtYXhDb25uZWN0aW9uczogMTAsIG1pbkNvbm5lY3Rpb25zOiAyIH0sXG4gICAgICB7IGVuYWJsZWQ6IHRydWUsIG1heFJldHJpZXM6IDMgfSxcbiAgICAgIHsgZW5hYmxlZDogdHJ1ZSwgaW50ZXJ2YWxNczogNTAwMCB9XG4gICAgKVxuICB9KVxuXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgLy8g5riF55CG6L+e5o6lXG4gICAgaWYgKGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSkge1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5kaXNjb25uZWN0KClcbiAgICB9XG4gIH0pXG5cbiAgZGVzY3JpYmUoJ+i/nuaOpeeuoeeQhicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5oiQ5Yqf6L+e5o6l5Yiw5pWw5o2u5bqTJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5qih5ouf5oiQ5Yqf6L+e5o6lXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IHRlc3Q6IDEgfV0pXG4gICAgICBcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpXG4gICAgICBcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uLmlzQ29ubmVjdGVkKCkpLnRvQmUodHJ1ZSlcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uLmdldFN0YXRlKCkpLnRvQmUoQ29ubmVjdGlvblN0YXRlLkNPTk5FQ1RFRClcbiAgICAgIGV4cGVjdChtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0KS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeWkhOeQhui/nuaOpeWksei0pScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOaooeaLn+i/nuaOpeWksei0pVxuICAgICAgY29uc3QgY29ubmVjdGlvbkVycm9yID0gbmV3IEVycm9yKCdDb25uZWN0aW9uIGZhaWxlZCcpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZWplY3RlZFZhbHVlKGNvbm5lY3Rpb25FcnJvcilcbiAgICAgIFxuICAgICAgYXdhaXQgZXhwZWN0KGNvbm5lY3Rpb24uY29ubmVjdCgpKS5yZWplY3RzLnRvVGhyb3coJ0Nvbm5lY3Rpb24gZmFpbGVkJylcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uLmdldFN0YXRlKCkpLnRvQmUoQ29ubmVjdGlvblN0YXRlLkZBSUxFRClcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeaIkOWKn+aWreW8gOi/nuaOpScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWFiOi/nuaOpVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgLy8g5qih5ouf5pat5byA6L+e5o6lXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRkaXNjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5kaXNjb25uZWN0KClcbiAgICAgIFxuICAgICAgZXhwZWN0KGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSkudG9CZShmYWxzZSlcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uLmdldFN0YXRlKCkpLnRvQmUoQ29ubmVjdGlvblN0YXRlLkRJU0NPTk5FQ1RFRClcbiAgICAgIGV4cGVjdChtb2NrUHJpc21hQ2xpZW50LiRkaXNjb25uZWN0KS50b0hhdmVCZWVuQ2FsbGVkKClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfph43ov57mnLrliLYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWcqOi/nuaOpeWksei0peWQjuiHquWKqOmHjei/nicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOmFjee9rumHjei/nlxuICAgICAgY29ubmVjdGlvbi51cGRhdGVDb25maWcodW5kZWZpbmVkLCB7IFxuICAgICAgICBlbmFibGVkOiB0cnVlLCBcbiAgICAgICAgbWF4UmV0cmllczogMiwgXG4gICAgICAgIHJldHJ5RGVsYXlNczogMTAwIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g56ys5LiA5qyh6L+e5o6l5aSx6LSlXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0XG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZU9uY2UobmV3IEVycm9yKCdGaXJzdCBhdHRlbXB0IGZhaWxlZCcpKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHVuZGVmaW5lZClcbiAgICAgIFxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgdGVzdDogMSB9XSlcbiAgICAgIFxuICAgICAgLy8g55uR5ZCs6YeN6L+e5LqL5Lu2XG4gICAgICBjb25zdCByZWNvbm5lY3RpbmdQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ub25jZSgncmVjb25uZWN0aW5nJywgcmVzb2x2ZSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGNvbnN0IHJlY29ubmVjdGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLm9uY2UoJ3JlY29ubmVjdGVkJywgcmVzb2x2ZSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIOWwneivlei/nuaOpe+8iOS8muWksei0peW5tuinpuWPkemHjei/nu+8iVxuICAgICAgYXdhaXQgZXhwZWN0KGNvbm5lY3Rpb24uY29ubmVjdCgpKS5yZWplY3RzLnRvVGhyb3coJ0ZpcnN0IGF0dGVtcHQgZmFpbGVkJylcbiAgICAgIFxuICAgICAgLy8g562J5b6F6YeN6L+e5LqL5Lu2XG4gICAgICBhd2FpdCByZWNvbm5lY3RpbmdQcm9taXNlXG4gICAgICBhd2FpdCByZWNvbm5lY3RlZFByb21pc2VcbiAgICAgIFxuICAgICAgZXhwZWN0KGNvbm5lY3Rpb24uaXNDb25uZWN0ZWQoKSkudG9CZSh0cnVlKVxuICAgIH0sIDEwMDAwKVxuXG4gICAgaXQoJ+W6lOivpeWcqOi+vuWIsOacgOWkp+mHjeivleasoeaVsOWQjuWBnOatoumHjei/nicsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOmFjee9rumHjei/nlxuICAgICAgY29ubmVjdGlvbi51cGRhdGVDb25maWcodW5kZWZpbmVkLCB7IFxuICAgICAgICBlbmFibGVkOiB0cnVlLCBcbiAgICAgICAgbWF4UmV0cmllczogMSwgXG4gICAgICAgIHJldHJ5RGVsYXlNczogMTAwIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g5omA5pyJ6L+e5o6l5bCd6K+V6YO95aSx6LSlXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQ29ubmVjdGlvbiBhbHdheXMgZmFpbHMnKSlcbiAgICAgIFxuICAgICAgLy8g55uR5ZCs6ZSZ6K+v5LqL5Lu2XG4gICAgICBjb25zdCBlcnJvclByb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgY29ubmVjdGlvbi5vbmNlKCdlcnJvcicsIHJlc29sdmUpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyDlsJ3or5Xov57mjqVcbiAgICAgIGF3YWl0IGV4cGVjdChjb25uZWN0aW9uLmNvbm5lY3QoKSkucmVqZWN0cy50b1Rocm93KCdDb25uZWN0aW9uIGFsd2F5cyBmYWlscycpXG4gICAgICBcbiAgICAgIC8vIOetieW+hemUmeivr+S6i+S7tlxuICAgICAgYXdhaXQgZXJyb3JQcm9taXNlXG4gICAgICBcbiAgICAgIC8vIOetieW+hemHjei/nuWwneivleWujOaIkFxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCkpXG4gICAgICBcbiAgICAgIGV4cGVjdChjb25uZWN0aW9uLmdldFN0YXRlKCkpLnRvQmUoQ29ubmVjdGlvblN0YXRlLkZBSUxFRClcbiAgICB9LCAxMDAwMClcbiAgfSlcblxuICBkZXNjcmliZSgn5YGl5bq35qOA5p+lJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XlrprmnJ/miafooYzlgaXlurfmo4Dmn6UnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDlkK/nlKjlgaXlurfmo4Dmn6VcbiAgICAgIGNvbm5lY3Rpb24udXBkYXRlQ29uZmlnKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB7IFxuICAgICAgICBlbmFibGVkOiB0cnVlLCBcbiAgICAgICAgaW50ZXJ2YWxNczogMjAwIFxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g5qih5ouf5oiQ5Yqf6L+e5o6l5ZKM5YGl5bq35qOA5p+lXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IGhlYWx0aF9jaGVjazogMSB9XSlcbiAgICAgIFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgLy8g55uR5ZCs5YGl5bq35qOA5p+l5LqL5Lu2XG4gICAgICBjb25zdCBoZWFsdGhDaGVja1Byb21pc2UgPSBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgY29ubmVjdGlvbi5vbmNlKCdoZWFsdGhDaGVjaycsIHJlc29sdmUpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyDnrYnlvoXlgaXlurfmo4Dmn6XmiafooYxcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhlYWx0aENoZWNrUHJvbWlzZVxuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHRydWUpXG4gICAgICBleHBlY3QobW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKFtleHBlY3Quc3RyaW5nQ29udGFpbmluZygnaGVhbHRoX2NoZWNrJyldKVxuICAgICAgKVxuICAgIH0sIDUwMDApXG5cbiAgICBpdCgn5bqU6K+l5aSE55CG5YGl5bq35qOA5p+l5aSx6LSlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5ZCv55So5YGl5bq35qOA5p+lXG4gICAgICBjb25uZWN0aW9uLnVwZGF0ZUNvbmZpZyh1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBcbiAgICAgICAgZW5hYmxlZDogdHJ1ZSwgXG4gICAgICAgIGludGVydmFsTXM6IDIwMCxcbiAgICAgICAgdGltZW91dE1zOiAxMDBcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIOaooeaLn+aIkOWKn+i/nuaOpeS9huWBpeW6t+ajgOafpeWksei0pVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhd1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKFt7IHRlc3Q6IDEgfV0pIC8vIOWIneWni+i/nuaOpemqjOivgVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdIZWFsdGggY2hlY2sgZmFpbGVkJykpIC8vIOWBpeW6t+ajgOafpeWksei0pVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDnm5HlkKzlgaXlurfmo4Dmn6XlpLHotKXkuovku7ZcbiAgICAgIGNvbnN0IGhlYWx0aENoZWNrUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLm9uY2UoJ2hlYWx0aENoZWNrJywgcmVzb2x2ZSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIOetieW+heWBpeW6t+ajgOafpeWksei0pVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaGVhbHRoQ2hlY2tQcm9taXNlXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpXG4gICAgfSwgNTAwMClcbiAgfSlcblxuICBkZXNjcmliZSgn5p+l6K+i5omn6KGMJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmiJDlip/miafooYzmn6Xor6Llubbmm7TmlrDnu5/orqHkv6Hmga8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDov57mjqXmlbDmja7lupNcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgdGVzdDogMSB9XSlcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpXG4gICAgICBcbiAgICAgIC8vIOaJp+ihjOafpeivolxuICAgICAgY29uc3QgcXVlcnlSZXN1bHQgPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShhc3luYyAoY2xpZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjbGllbnQuJHF1ZXJ5UmF3YFNFTEVDVCAqIEZST00gdXNlcnMgTElNSVQgMWBcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChxdWVyeVJlc3VsdCkudG9FcXVhbChbeyB0ZXN0OiAxIH1dKVxuICAgICAgXG4gICAgICAvLyDmo4Dmn6Xnu5/orqHkv6Hmga9cbiAgICAgIGNvbnN0IHN0YXRzID0gY29ubmVjdGlvbi5nZXRTdGF0cygpXG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxRdWVyaWVzKS50b0JlR3JlYXRlclRoYW4oMClcbiAgICAgIGV4cGVjdChzdGF0cy5hdmdMYXRlbmN5KS50b0JlR3JlYXRlclRoYW4oMClcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuafpeivouWksei0peW5tuabtOaWsOWksei0pee7n+iuoScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOi/nuaOpeaVsOaNruW6k1xuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhd1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKFt7IHRlc3Q6IDEgfV0pIC8vIOi/nuaOpemqjOivgVxuICAgICAgICAubW9ja1JlamVjdGVkVmFsdWVPbmNlKG5ldyBFcnJvcignUXVlcnkgZmFpbGVkJykpIC8vIOafpeivouWksei0pVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDmiafooYzlpLHotKXnmoTmn6Xor6JcbiAgICAgIGF3YWl0IGV4cGVjdChjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShhc3luYyAoY2xpZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjbGllbnQuJHF1ZXJ5UmF3YFNFTEVDVCAqIEZST00gbm9uX2V4aXN0ZW50X3RhYmxlYFxuICAgICAgfSkpLnJlamVjdHMudG9UaHJvdygnUXVlcnkgZmFpbGVkJylcbiAgICAgIFxuICAgICAgLy8g5qOA5p+l5aSx6LSl57uf6K6hXG4gICAgICBjb25zdCBzdGF0cyA9IGNvbm5lY3Rpb24uZ2V0U3RhdHMoKVxuICAgICAgZXhwZWN0KHN0YXRzLmZhaWxlZFF1ZXJpZXMpLnRvQmVHcmVhdGVyVGhhbigwKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5Zyo5pyq6L+e5o6l5pe25ouS57ud5p+l6K+iJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g56Gu5L+d5pyq6L+e5o6lXG4gICAgICBleHBlY3QoY29ubmVjdGlvbi5pc0Nvbm5lY3RlZCgpKS50b0JlKGZhbHNlKVxuICAgICAgXG4gICAgICAvLyDlsJ3or5XmiafooYzmn6Xor6JcbiAgICAgIGF3YWl0IGV4cGVjdChjb25uZWN0aW9uLmV4ZWN1dGVRdWVyeShhc3luYyAoY2xpZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjbGllbnQuJHF1ZXJ5UmF3YFNFTEVDVCAxYFxuICAgICAgfSkpLnJlamVjdHMudG9UaHJvdygnRGF0YWJhc2Ugbm90IGNvbm5lY3RlZCcpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn57uf6K6h5L+h5oGvJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmraPnoa7ot5/ouKrov57mjqXnu5/orqHkv6Hmga8nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDov57mjqXmlbDmja7lupNcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgdGVzdDogMSB9XSlcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpXG4gICAgICBcbiAgICAgIC8vIOiOt+WPlue7n+iuoeS/oeaBr1xuICAgICAgY29uc3Qgc3RhdHMgPSBjb25uZWN0aW9uLmdldFN0YXRzKClcbiAgICAgIFxuICAgICAgZXhwZWN0KHN0YXRzLnN0YXRlKS50b0JlKENvbm5lY3Rpb25TdGF0ZS5DT05ORUNURUQpXG4gICAgICBleHBlY3Qoc3RhdHMuY29ubmVjdGVkQXQpLnRvQmVJbnN0YW5jZU9mKERhdGUpXG4gICAgICBleHBlY3Qoc3RhdHMucmVjb25uZWN0QXR0ZW1wdHMpLnRvQmUoMClcbiAgICAgIGV4cGVjdChzdGF0cy51cHRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMClcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeato+ehruiuoeeul+i/kOihjOaXtumXtCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOi/nuaOpeaVsOaNruW6k1xuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgLy8g562J5b6F5LiA5q615pe26Ze0XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSlcbiAgICAgIFxuICAgICAgLy8g5qOA5p+l6L+Q6KGM5pe26Ze0XG4gICAgICBjb25zdCBzdGF0cyA9IGNvbm5lY3Rpb24uZ2V0U3RhdHMoKVxuICAgICAgZXhwZWN0KHN0YXRzLnVwdGltZSkudG9CZUdyZWF0ZXJUaGFuKDkwKSAvLyDoh7PlsJE5MG1zXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6YWN572u5pu05pawJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XlhYHorrjliqjmgIHmm7TmlrDov57mjqXmsaDphY3nva4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdQb29sQ29uZmlnID0ge1xuICAgICAgICBtYXhDb25uZWN0aW9uczogMjAsXG4gICAgICAgIG1pbkNvbm5lY3Rpb25zOiA1XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbm5lY3Rpb24udXBkYXRlQ29uZmlnKG5ld1Bvb2xDb25maWcpXG4gICAgICBcbiAgICAgIC8vIOmFjee9ruW6lOivpeW3suabtOaWsO+8iOaXoOazleebtOaOpemqjOivgeengeacieWxnuaAp++8jOS9huS4jeW6lOaKm+WHuumUmeivr++8iVxuICAgICAgZXhwZWN0KCgpID0+IGNvbm5lY3Rpb24udXBkYXRlQ29uZmlnKG5ld1Bvb2xDb25maWcpKS5ub3QudG9UaHJvdygpXG4gICAgfSlcblxuICAgIGl0KCflupTor6XlhYHorrjliqjmgIHmm7TmlrDph43ov57phY3nva4nLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdSZWNvbm5lY3Rpb25Db25maWcgPSB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBtYXhSZXRyaWVzOiA1XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbm5lY3Rpb24udXBkYXRlQ29uZmlnKHVuZGVmaW5lZCwgbmV3UmVjb25uZWN0aW9uQ29uZmlnKVxuICAgICAgXG4gICAgICAvLyDphY3nva7lupTor6Xlt7Lmm7TmlrBcbiAgICAgIGV4cGVjdCgoKSA9PiBjb25uZWN0aW9uLnVwZGF0ZUNvbmZpZyh1bmRlZmluZWQsIG5ld1JlY29ubmVjdGlvbkNvbmZpZykpLm5vdC50b1Rocm93KClcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeWFgeiuuOWKqOaAgeabtOaWsOWBpeW6t+ajgOafpemFjee9ricsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOWFiOi/nuaOpVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRxdWVyeVJhdy5tb2NrUmVzb2x2ZWRWYWx1ZShbeyB0ZXN0OiAxIH1dKVxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgY29uc3QgbmV3SGVhbHRoQ2hlY2tDb25maWcgPSB7XG4gICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgIGludGVydmFsTXM6IDEwMDBcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29ubmVjdGlvbi51cGRhdGVDb25maWcodW5kZWZpbmVkLCB1bmRlZmluZWQsIG5ld0hlYWx0aENoZWNrQ29uZmlnKVxuICAgICAgXG4gICAgICAvLyDphY3nva7lupTor6Xlt7Lmm7TmlrBcbiAgICAgIGV4cGVjdCgoKSA9PiBjb25uZWN0aW9uLnVwZGF0ZUNvbmZpZyh1bmRlZmluZWQsIHVuZGVmaW5lZCwgbmV3SGVhbHRoQ2hlY2tDb25maWcpKS5ub3QudG9UaHJvdygpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn5YWo5bGA5a6e5L6L5rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xmj5DkvpvlhajlsYDmlbDmja7lupPov57mjqXlrp7kvosnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoZW5oYW5jZWREYikudG9CZUluc3RhbmNlT2YoRW5oYW5jZWREYXRhYmFzZUNvbm5lY3Rpb24pXG4gICAgfSlcblxuICAgIGl0KCflupTor6Xmj5Dkvpvkvr/mjbfnmoTov57mjqXlh73mlbAnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDmqKHmi5/miJDlip/ov57mjqVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgdGVzdDogMSB9XSlcbiAgICAgIFxuICAgICAgYXdhaXQgY29ubmVjdERhdGFiYXNlKClcbiAgICAgIFxuICAgICAgZXhwZWN0KGlzRGF0YWJhc2VDb25uZWN0ZWQoKSkudG9CZSh0cnVlKVxuICAgICAgXG4gICAgICBjb25zdCBzdGF0cyA9IGdldERhdGFiYXNlU3RhdHMoKVxuICAgICAgZXhwZWN0KHN0YXRzLnN0YXRlKS50b0JlKENvbm5lY3Rpb25TdGF0ZS5DT05ORUNURUQpXG4gICAgICBcbiAgICAgIGF3YWl0IGRpc2Nvbm5lY3REYXRhYmFzZSgpXG4gICAgICBleHBlY3QoaXNEYXRhYmFzZUNvbm5lY3RlZCgpKS50b0JlKGZhbHNlKVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5o+Q5L6b5L6/5o2355qE5p+l6K+i5omn6KGM5Ye95pWwJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5qih5ouf5oiQ5Yqf6L+e5o6lXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IHJlc3VsdDogJ3N1Y2Nlc3MnIH1dKVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0RGF0YWJhc2UoKVxuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRlUXVlcnkoYXN5bmMgKGNsaWVudCkgPT4ge1xuICAgICAgICByZXR1cm4gYXdhaXQgY2xpZW50LiRxdWVyeVJhd2BTRUxFQ1QgJ3N1Y2Nlc3MnIGFzIHJlc3VsdGBcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoW3sgcmVzdWx0OiAnc3VjY2VzcycgfV0pXG4gICAgICBcbiAgICAgIGF3YWl0IGRpc2Nvbm5lY3REYXRhYmFzZSgpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgn6ZSZ6K+v5aSE55CGJywgKCkgPT4ge1xuICAgIGl0KCflupTor6XmraPnoa7or4bliKvov57mjqXnm7jlhbPplJnor68nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDov57mjqXmlbDmja7lupNcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXdcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZShbeyB0ZXN0OiAxIH1dKSAvLyDov57mjqXpqozor4FcbiAgICAgICAgLm1vY2tSZWplY3RlZFZhbHVlT25jZShuZXcgRXJyb3IoJ0VDT05OUkVGVVNFRDogQ29ubmVjdGlvbiByZWZ1c2VkJykpIC8vIOi/nuaOpemUmeivr1xuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmNvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDnm5HlkKzplJnor6/kuovku7ZcbiAgICAgIGNvbnN0IGVycm9yUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLm9uY2UoJ2Vycm9yJywgcmVzb2x2ZSlcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIOaJp+ihjOS8muWvvOiHtOi/nuaOpemUmeivr+eahOafpeivolxuICAgICAgYXdhaXQgZXhwZWN0KGNvbm5lY3Rpb24uZXhlY3V0ZVF1ZXJ5KGFzeW5jIChjbGllbnQpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNsaWVudC4kcXVlcnlSYXdgU0VMRUNUIDFgXG4gICAgICB9KSkucmVqZWN0cy50b1Rocm93KCdFQ09OTlJFRlVTRUQnKVxuICAgICAgXG4gICAgICAvLyDnrYnlvoXplJnor6/kuovku7ZcbiAgICAgIGF3YWl0IGVycm9yUHJvbWlzZVxuICAgIH0pXG5cbiAgICBpdCgn5bqU6K+l5aSE55CG5LyY6ZuF5YWz6ZetJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g6L+e5o6l5pWw5o2u5bqTXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJHF1ZXJ5UmF3Lm1vY2tSZXNvbHZlZFZhbHVlKFt7IHRlc3Q6IDEgfV0pXG4gICAgICBtb2NrUHJpc21hQ2xpZW50LiRkaXNjb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgLy8g5omn6KGM5LyY6ZuF5YWz6ZetXG4gICAgICBhd2FpdCBleHBlY3QoY29ubmVjdGlvbi5ncmFjZWZ1bFNodXRkb3duKCkpLnJlc29sdmVzLm5vdC50b1Rocm93KClcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCfkuovku7bns7vnu58nLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeato+ehruinpuWPkei/nuaOpeS6i+S7ticsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOebkeWQrOi/nuaOpeS6i+S7tlxuICAgICAgY29uc3QgY29ubmVjdGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLm9uY2UoJ2Nvbm5lY3RlZCcsIHJlc29sdmUpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyDmqKHmi5/miJDlip/ov57mjqVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgdGVzdDogMSB9XSlcbiAgICAgIFxuICAgICAgYXdhaXQgY29ubmVjdGlvbi5jb25uZWN0KClcbiAgICAgIFxuICAgICAgLy8g562J5b6F6L+e5o6l5LqL5Lu2XG4gICAgICBhd2FpdCBjb25uZWN0ZWRQcm9taXNlXG4gICAgfSlcblxuICAgIGl0KCflupTor6XmraPnoa7op6blj5Hmlq3lvIDov57mjqXkuovku7YnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyDlhYjov57mjqVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgbW9ja1ByaXNtYUNsaWVudC4kcXVlcnlSYXcubW9ja1Jlc29sdmVkVmFsdWUoW3sgdGVzdDogMSB9XSlcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uY29ubmVjdCgpXG4gICAgICBcbiAgICAgIC8vIOebkeWQrOaWreW8gOi/nuaOpeS6i+S7tlxuICAgICAgY29uc3QgZGlzY29ubmVjdGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLm9uY2UoJ2Rpc2Nvbm5lY3RlZCcsIHJlc29sdmUpXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyDmqKHmi5/mlq3lvIDov57mjqVcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGRpc2Nvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKVxuICAgICAgXG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmRpc2Nvbm5lY3QoKVxuICAgICAgXG4gICAgICAvLyDnrYnlvoXmlq3lvIDov57mjqXkuovku7ZcbiAgICAgIGF3YWl0IGRpc2Nvbm5lY3RlZFByb21pc2VcbiAgICB9KVxuXG4gICAgaXQoJ+W6lOivpeato+ehruinpuWPkemUmeivr+S6i+S7ticsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIOebkeWQrOmUmeivr+S6i+S7tlxuICAgICAgY29uc3QgZXJyb3JQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbm5lY3Rpb24ub25jZSgnZXJyb3InLCByZXNvbHZlKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8g5qih5ouf6L+e5o6l5aSx6LSlXG4gICAgICBjb25zdCBjb25uZWN0aW9uRXJyb3IgPSBuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gZmFpbGVkJylcbiAgICAgIG1vY2tQcmlzbWFDbGllbnQuJGNvbm5lY3QubW9ja1JlamVjdGVkVmFsdWUoY29ubmVjdGlvbkVycm9yKVxuICAgICAgXG4gICAgICBhd2FpdCBleHBlY3QoY29ubmVjdGlvbi5jb25uZWN0KCkpLnJlamVjdHMudG9UaHJvdygnQ29ubmVjdGlvbiBmYWlsZWQnKVxuICAgICAgXG4gICAgICAvLyDnrYnlvoXplJnor6/kuovku7ZcbiAgICAgIGNvbnN0IGVycm9yID0gYXdhaXQgZXJyb3JQcm9taXNlXG4gICAgICBleHBlY3QoZXJyb3IpLnRvQmUoY29ubmVjdGlvbkVycm9yKVxuICAgIH0pXG4gIH0pXG59KSJdLCJuYW1lcyI6WyJqZXN0IiwibW9jayIsIk1vY2tlZFByaXNtYUNsaWVudCIsIlByaXNtYUNsaWVudCIsImRlc2NyaWJlIiwiY29ubmVjdGlvbiIsIm1vY2tQcmlzbWFDbGllbnQiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsIiRjb25uZWN0IiwiZm4iLCIkZGlzY29ubmVjdCIsIiRxdWVyeVJhdyIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIkVuaGFuY2VkRGF0YWJhc2VDb25uZWN0aW9uIiwibWF4Q29ubmVjdGlvbnMiLCJtaW5Db25uZWN0aW9ucyIsImVuYWJsZWQiLCJtYXhSZXRyaWVzIiwiaW50ZXJ2YWxNcyIsImFmdGVyRWFjaCIsImlzQ29ubmVjdGVkIiwiZGlzY29ubmVjdCIsIml0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ1bmRlZmluZWQiLCJ0ZXN0IiwiY29ubmVjdCIsImV4cGVjdCIsInRvQmUiLCJnZXRTdGF0ZSIsIkNvbm5lY3Rpb25TdGF0ZSIsIkNPTk5FQ1RFRCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJjb25uZWN0aW9uRXJyb3IiLCJFcnJvciIsIm1vY2tSZWplY3RlZFZhbHVlIiwicmVqZWN0cyIsInRvVGhyb3ciLCJGQUlMRUQiLCJESVNDT05ORUNURUQiLCJ1cGRhdGVDb25maWciLCJyZXRyeURlbGF5TXMiLCJtb2NrUmVqZWN0ZWRWYWx1ZU9uY2UiLCJtb2NrUmVzb2x2ZWRWYWx1ZU9uY2UiLCJyZWNvbm5lY3RpbmdQcm9taXNlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvbmNlIiwicmVjb25uZWN0ZWRQcm9taXNlIiwiZXJyb3JQcm9taXNlIiwic2V0VGltZW91dCIsImhlYWx0aF9jaGVjayIsImhlYWx0aENoZWNrUHJvbWlzZSIsInJlc3VsdCIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYXJyYXlDb250YWluaW5nIiwic3RyaW5nQ29udGFpbmluZyIsInRpbWVvdXRNcyIsInF1ZXJ5UmVzdWx0IiwiZXhlY3V0ZVF1ZXJ5IiwiY2xpZW50IiwidG9FcXVhbCIsInN0YXRzIiwiZ2V0U3RhdHMiLCJ0b3RhbFF1ZXJpZXMiLCJ0b0JlR3JlYXRlclRoYW4iLCJhdmdMYXRlbmN5IiwiZmFpbGVkUXVlcmllcyIsInN0YXRlIiwiY29ubmVjdGVkQXQiLCJ0b0JlSW5zdGFuY2VPZiIsIkRhdGUiLCJyZWNvbm5lY3RBdHRlbXB0cyIsInVwdGltZSIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJuZXdQb29sQ29uZmlnIiwibm90IiwibmV3UmVjb25uZWN0aW9uQ29uZmlnIiwibmV3SGVhbHRoQ2hlY2tDb25maWciLCJlbmhhbmNlZERiIiwiY29ubmVjdERhdGFiYXNlIiwiaXNEYXRhYmFzZUNvbm5lY3RlZCIsImdldERhdGFiYXNlU3RhdHMiLCJkaXNjb25uZWN0RGF0YWJhc2UiLCJncmFjZWZ1bFNodXRkb3duIiwicmVzb2x2ZXMiLCJjb25uZWN0ZWRQcm9taXNlIiwiZGlzY29ubmVjdGVkUHJvbWlzZSIsImVycm9yIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Q0FLQzs7Ozt5QkFFaUU7b0NBVTNEO3dCQUNzQjtBQUU3QixjQUFjO0FBQ2RBLGFBQUksQ0FBQ0MsSUFBSSxDQUFDO0FBQ1YsTUFBTUMscUJBQXFCQyxvQkFBWTtBQUV2Q0MsSUFBQUEsaUJBQVEsRUFBQyxnQkFBZ0I7SUFDdkIsSUFBSUM7SUFDSixJQUFJQztJQUVKQyxJQUFBQSxtQkFBVSxFQUFDO1FBQ1QsU0FBUztRQUNUUCxhQUFJLENBQUNRLGFBQWE7UUFFbEIsaUJBQWlCO1FBQ2pCRixtQkFBbUI7WUFDakJHLFVBQVVULGFBQUksQ0FBQ1UsRUFBRTtZQUNqQkMs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