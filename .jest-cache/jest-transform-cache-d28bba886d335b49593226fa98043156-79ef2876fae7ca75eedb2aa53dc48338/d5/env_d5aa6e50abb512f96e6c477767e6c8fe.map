{"version":3,"sources":["E:\\zk-agent\\config\\env.ts"],"sourcesContent":["// @ts-nocheck\n/**\r\n * @file 环境变量配置管理\r\n * @description 统一管理和验证环境变量配置\r\n * @author ZK-Agent Team\r\n * @date 2024-01-20\r\n */\r\n\r\nimport { z } from 'zod';\r\n\r\n// 环境变量验证 Schema\r\nconst envSchema = z.object({\r\n  // 基础配置\r\n  NODE_ENV: z.enum(['development', 'production', 'test']).default('development'),\r\n  NEXT_PUBLIC_APP_URL: z.string().url().default('http://localhost:3000'),\r\n  NEXT_PUBLIC_APP_NAME: z.string().default('ZK-Agent'),\r\n  NEXT_PUBLIC_APP_VERSION: z.string().default('1.0.0'),\r\n\r\n  // 数据库配置\r\n  DATABASE_URL: z.string().min(1, '数据库连接字符串不能为空'),\r\n  DATABASE_POOL_MIN: z.coerce.number().min(1).default(2),\r\n  DATABASE_POOL_MAX: z.coerce.number().min(1).default(10),\r\n\r\n  // Redis 配置\r\n  REDIS_URL: z.string().default('redis://localhost:6379'),\r\n  REDIS_PASSWORD: z.string().optional(),\r\n  REDIS_DB: z.coerce.number().min(0).default(0),\r\n\r\n  // 认证配置\r\n  JWT_SECRET: z.string().min(32, 'JWT密钥长度至少32位'),\r\n  JWT_EXPIRES_IN: z.string().default('7d'),\r\n  JWT_REFRESH_EXPIRES_IN: z.string().default('30d'),\r\n  NEXTAUTH_SECRET: z.string().min(32, 'NextAuth密钥长度至少32位'),\r\n  NEXTAUTH_URL: z.string().url().optional(),\r\n  BCRYPT_ROUNDS: z.coerce.number().min(10).max(15).default(12),\r\n\r\n  // AI 服务配置\r\n  FASTGPT_BASE_URL: z.string().url().optional(),\r\n  FASTGPT_API_KEY: z.string().optional(),\r\n  FASTGPT_APP_ID: z.string().optional(),\r\n  QWEN_BASE_URL: z.string().url().optional(),\r\n  QWEN_API_KEY: z.string().optional(),\r\n  SILICONFLOW_BASE_URL: z.string().url().optional(),\r\n  SILICONFLOW_API_KEY: z.string().optional(),\r\n  OPENAI_API_KEY: z.string().optional(),\r\n  OPENAI_BASE_URL: z.string().url().optional(),\r\n\r\n  // 文件存储配置\r\n  UPLOAD_DIR: z.string().default('./uploads'),\r\n  TEMP_DIR: z.string().default('./temp'),\r\n  AWS_ACCESS_KEY_ID: z.string().optional(),\r\n  AWS_SECRET_ACCESS_KEY: z.string().optional(),\r\n  AWS_REGION: z.string().optional(),\r\n  AWS_S3_BUCKET: z.string().optional(),\r\n  ALIYUN_ACCESS_KEY_ID: z.string().optional(),\r\n  ALIYUN_ACCESS_KEY_SECRET: z.string().optional(),\r\n  ALIYUN_OSS_REGION: z.string().optional(),\r\n  ALIYUN_OSS_BUCKET: z.string().optional(),\r\n\r\n  // 邮件配置\r\n  SMTP_HOST: z.string().optional(),\r\n  SMTP_PORT: z.coerce.number().optional(),\r\n  SMTP_USER: z.string().optional(),\r\n  SMTP_PASS: z.string().optional(),\r\n  SMTP_FROM: z.string().optional(),\r\n\r\n  // 监控配置\r\n  LOG_LEVEL: z.enum(['error', 'warn', 'info', 'debug']).default('info'),\r\n  LOG_FILE_PATH: z.string().default('./logs'),\r\n  SENTRY_DSN: z.string().optional(),\r\n  SENTRY_ENVIRONMENT: z.string().optional(),\r\n  PROMETHEUS_ENABLED: z.coerce.boolean().default(false),\r\n  PROMETHEUS_PORT: z.coerce.number().default(9090),\r\n\r\n  // 第三方服务配置\r\n  WECHAT_APP_ID: z.string().optional(),\r\n  WECHAT_APP_SECRET: z.string().optional(),\r\n  STRIPE_PUBLIC_KEY: z.string().optional(),\r\n  STRIPE_SECRET_KEY: z.string().optional(),\r\n  STRIPE_WEBHOOK_SECRET: z.string().optional(),\r\n\r\n  // 开发配置\r\n  DEBUG: z.coerce.boolean().default(false),\r\n  VERBOSE_LOGGING: z.coerce.boolean().default(false),\r\n  RATE_LIMIT_ENABLED: z.coerce.boolean().default(true),\r\n  RATE_LIMIT_WINDOW_MS: z.coerce.number().default(900000),\r\n  RATE_LIMIT_MAX_REQUESTS: z.coerce.number().default(100),\r\n  CORS_ORIGIN: z.string().default('http://localhost:3000'),\r\n  CORS_CREDENTIALS: z.coerce.boolean().default(true),\r\n\r\n  // 性能配置\r\n  CACHE_ENABLED: z.coerce.boolean().default(true),\r\n  CACHE_TTL: z.coerce.number().default(3600),\r\n  COMPRESSION_ENABLED: z.coerce.boolean().default(true),\r\n  COMPRESSION_LEVEL: z.coerce.number().min(1).max(9).default(6),\r\n\r\n  // WebSocket 配置\r\n  WS_PORT: z.coerce.number().default(3001),\r\n  WS_HEARTBEAT_INTERVAL: z.coerce.number().default(30000),\r\n  WS_MAX_CONNECTIONS: z.coerce.number().default(1000),\r\n\r\n  // CAD 配置\r\n  CAD_MAX_FILE_SIZE: z.coerce.number().default(52428800),\r\n  CAD_SUPPORTED_FORMATS: z.string().default('dwg,dxf,step,iges,obj'),\r\n  CAD_ANALYSIS_TIMEOUT: z.coerce.number().default(300000),\r\n\r\n  // 海报配置\r\n  POSTER_MAX_QUEUE_SIZE: z.coerce.number().default(100),\r\n  POSTER_GENERATION_TIMEOUT: z.coerce.number().default(120000),\r\n  POSTER_OUTPUT_FORMATS: z.string().default('png,jpg,pdf'),\r\n\r\n  // 安全配置\r\n  HTTPS_ENABLED: z.coerce.boolean().default(false),\r\n  SSL_CERT_PATH: z.string().optional(),\r\n  SSL_KEY_PATH: z.string().optional(),\r\n  SECURITY_HEADERS_ENABLED: z.coerce.boolean().default(true),\r\n  CSP_ENABLED: z.coerce.boolean().default(true),\r\n  IP_WHITELIST: z.string().optional(),\r\n\r\n  // 备份配置\r\n  BACKUP_ENABLED: z.coerce.boolean().default(false),\r\n  BACKUP_SCHEDULE: z.string().default('0 2 * * *'),\r\n  BACKUP_RETENTION_DAYS: z.coerce.number().default(30),\r\n  BACKUP_STORAGE_PATH: z.string().default('./backups'),\r\n});\r\n\r\n// 验证环境变量\r\nfunction validateEnv(): z.infer<typeof envSchema> {\r\n  // 在测试环境中使用宽松的验证\r\n  if (process.env.NODE_ENV === 'test') {\r\n    const testSchema = envSchema.partial({\r\n      JWT_SECRET: true,\r\n      NEXTAUTH_SECRET: true,\r\n      DATABASE_URL: true,\r\n    }).extend({\r\n      JWT_SECRET: z.string().default('test-jwt-secret-key-for-testing-purposes-only-32-chars-minimum'),\r\n      NEXTAUTH_SECRET: z.string().default('test-nextauth-secret-key-for-testing-purposes-only-32-chars-minimum'),\r\n      DATABASE_URL: z.string().default('postgresql://test:test@localhost:5432/test_db'),\r\n    });\r\n    \r\n    try {\r\n      return testSchema.parse(process.env);\r\n    } catch (error) {\r\n      console.warn('Test environment validation warning:', error);\r\n      // 在测试环境中返回默认值\r\n      return testSchema.parse({});\r\n    }\r\n  }\r\n\r\n  try {\r\n    return envSchema.parse(process.env);\r\n  } catch (error) {\r\n    if (error instanceof z.ZodError) {\r\n      const missingVars = error.errors.map(err => `${err.path.join('.')}: ${err.message}`);\r\n      throw new Error(`环境变量验证失败:\\n${missingVars.join('\\n')}`);\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n\r\n// 导出验证后的环境变量\r\nexport const env = validateEnv();\r\n\r\n// 环境变量类型\r\nexport type Env = typeof env;\r\n\r\n// 检查是否为生产环境\r\nexport const isProduction = env.NODE_ENV === 'production';\r\nexport const isDevelopment = env.NODE_ENV === 'development';\r\nexport const isTest = env.NODE_ENV === 'test';\r\n\r\n// 数据库配置\r\nexport const dbConfig = {\r\n  url: env.DATABASE_URL,\r\n  pool: {\r\n    min: env.DATABASE_POOL_MIN,\r\n    max: env.DATABASE_POOL_MAX,\r\n  },\r\n};\r\n\r\n// Redis 配置\r\nexport const redisConfig = {\r\n  url: env.REDIS_URL,\r\n  password: env.REDIS_PASSWORD,\r\n  db: env.REDIS_DB,\r\n};\r\n\r\n// JWT 配置\r\nexport const jwtConfig = {\r\n  secret: env.JWT_SECRET,\r\n  expiresIn: env.JWT_EXPIRES_IN,\r\n  refreshExpiresIn: env.JWT_REFRESH_EXPIRES_IN,\r\n};\r\n\r\n// AI 服务配置\r\nexport const aiConfig = {\r\n  fastgpt: {\r\n    baseUrl: env.FASTGPT_BASE_URL,\r\n    apiKey: env.FASTGPT_API_KEY,\r\n    appId: env.FASTGPT_APP_ID,\r\n  },\r\n  qwen: {\r\n    baseUrl: env.QWEN_BASE_URL,\r\n    apiKey: env.QWEN_API_KEY,\r\n  },\r\n  siliconflow: {\r\n    baseUrl: env.SILICONFLOW_BASE_URL,\r\n    apiKey: env.SILICONFLOW_API_KEY,\r\n  },\r\n  openai: {\r\n    baseUrl: env.OPENAI_BASE_URL,\r\n    apiKey: env.OPENAI_API_KEY,\r\n  },\r\n};\r\n\r\n// 文件存储配置\r\nexport const storageConfig = {\r\n  uploadDir: env.UPLOAD_DIR,\r\n  tempDir: env.TEMP_DIR,\r\n  aws: {\r\n    accessKeyId: env.AWS_ACCESS_KEY_ID,\r\n    secretAccessKey: env.AWS_SECRET_ACCESS_KEY,\r\n    region: env.AWS_REGION,\r\n    bucket: env.AWS_S3_BUCKET,\r\n  },\r\n  aliyun: {\r\n    accessKeyId: env.ALIYUN_ACCESS_KEY_ID,\r\n    accessKeySecret: env.ALIYUN_ACCESS_KEY_SECRET,\r\n    region: env.ALIYUN_OSS_REGION,\r\n    bucket: env.ALIYUN_OSS_BUCKET,\r\n  },\r\n};\r\n\r\n// 邮件配置\r\nexport const emailConfig = {\r\n  host: env.SMTP_HOST,\r\n  port: env.SMTP_PORT,\r\n  user: env.SMTP_USER,\r\n  pass: env.SMTP_PASS,\r\n  from: env.SMTP_FROM,\r\n};\r\n\r\n// 监控配置\r\nexport const monitoringConfig = {\r\n  logLevel: env.LOG_LEVEL,\r\n  logFilePath: env.LOG_FILE_PATH,\r\n  sentry: {\r\n    dsn: env.SENTRY_DSN,\r\n    environment: env.SENTRY_ENVIRONMENT,\r\n  },\r\n  prometheus: {\r\n    enabled: env.PROMETHEUS_ENABLED,\r\n    port: env.PROMETHEUS_PORT,\r\n  },\r\n};\r\n\r\n// 安全配置\r\nexport const securityConfig = {\r\n  bcryptRounds: env.BCRYPT_ROUNDS,\r\n  rateLimit: {\r\n    enabled: env.RATE_LIMIT_ENABLED,\r\n    windowMs: env.RATE_LIMIT_WINDOW_MS,\r\n    maxRequests: env.RATE_LIMIT_MAX_REQUESTS,\r\n  },\r\n  cors: {\r\n    origin: env.CORS_ORIGIN,\r\n    credentials: env.CORS_CREDENTIALS,\r\n  },\r\n  https: {\r\n    enabled: env.HTTPS_ENABLED,\r\n    certPath: env.SSL_CERT_PATH,\r\n    keyPath: env.SSL_KEY_PATH,\r\n  },\r\n  headers: {\r\n    enabled: env.SECURITY_HEADERS_ENABLED,\r\n    csp: env.CSP_ENABLED,\r\n  },\r\n  ipWhitelist: env.IP_WHITELIST?.split(',').filter(Boolean) || [],\r\n};\r\n\r\n// 性能配置\r\nexport const performanceConfig = {\r\n  cache: {\r\n    enabled: env.CACHE_ENABLED,\r\n    ttl: env.CACHE_TTL,\r\n  },\r\n  compression: {\r\n    enabled: env.COMPRESSION_ENABLED,\r\n    level: env.COMPRESSION_LEVEL,\r\n  },\r\n};\r\n\r\n// WebSocket 配置\r\nexport const wsConfig = {\r\n  port: env.WS_PORT,\r\n  heartbeatInterval: env.WS_HEARTBEAT_INTERVAL,\r\n  maxConnections: env.WS_MAX_CONNECTIONS,\r\n};\r\n\r\n// CAD 配置\r\nexport const cadConfig = {\r\n  maxFileSize: env.CAD_MAX_FILE_SIZE,\r\n  supportedFormats: env.CAD_SUPPORTED_FORMATS.split(','),\r\n  analysisTimeout: env.CAD_ANALYSIS_TIMEOUT,\r\n};\r\n\r\n// 海报配置\r\nexport const posterConfig = {\r\n  maxQueueSize: env.POSTER_MAX_QUEUE_SIZE,\r\n  generationTimeout: env.POSTER_GENERATION_TIMEOUT,\r\n  outputFormats: env.POSTER_OUTPUT_FORMATS.split(','),\r\n};\r\n\r\n// 备份配置\r\nexport const backupConfig = {\r\n  enabled: env.BACKUP_ENABLED,\r\n  schedule: env.BACKUP_SCHEDULE,\r\n  retentionDays: env.BACKUP_RETENTION_DAYS,\r\n  storagePath: env.BACKUP_STORAGE_PATH,\r\n}; "],"names":["aiConfig","backupConfig","cadConfig","dbConfig","emailConfig","env","isDevelopment","isProduction","isTest","jwtConfig","monitoringConfig","performanceConfig","posterConfig","redisConfig","securityConfig","storageConfig","wsConfig","envSchema","z","object","NODE_ENV","enum","default","NEXT_PUBLIC_APP_URL","string","url","NEXT_PUBLIC_APP_NAME","NEXT_PUBLIC_APP_VERSION","DATABASE_URL","min","DATABASE_POOL_MIN","coerce","number","DATABASE_POOL_MAX","REDIS_URL","REDIS_PASSWORD","optional","REDIS_DB","JWT_SECRET","JWT_EXPIRES_IN","JWT_REFRESH_EXPIRES_IN","NEXTAUTH_SECRET","NEXTAUTH_URL","BCRYPT_ROUNDS","max","FASTGPT_BASE_URL","FASTGPT_API_KEY","FASTGPT_APP_ID","QWEN_BASE_URL","QWEN_API_KEY","SILICONFLOW_BASE_URL","SILICONFLOW_API_KEY","OPENAI_API_KEY","OPENAI_BASE_URL","UPLOAD_DIR","TEMP_DIR","AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY","AWS_REGION","AWS_S3_BUCKET","ALIYUN_ACCESS_KEY_ID","ALIYUN_ACCESS_KEY_SECRET","ALIYUN_OSS_REGION","ALIYUN_OSS_BUCKET","SMTP_HOST","SMTP_PORT","SMTP_USER","SMTP_PASS","SMTP_FROM","LOG_LEVEL","LOG_FILE_PATH","SENTRY_DSN","SENTRY_ENVIRONMENT","PROMETHEUS_ENABLED","boolean","PROMETHEUS_PORT","WECHAT_APP_ID","WECHAT_APP_SECRET","STRIPE_PUBLIC_KEY","STRIPE_SECRET_KEY","STRIPE_WEBHOOK_SECRET","DEBUG","VERBOSE_LOGGING","RATE_LIMIT_ENABLED","RATE_LIMIT_WINDOW_MS","RATE_LIMIT_MAX_REQUESTS","CORS_ORIGIN","CORS_CREDENTIALS","CACHE_ENABLED","CACHE_TTL","COMPRESSION_ENABLED","COMPRESSION_LEVEL","WS_PORT","WS_HEARTBEAT_INTERVAL","WS_MAX_CONNECTIONS","CAD_MAX_FILE_SIZE","CAD_SUPPORTED_FORMATS","CAD_ANALYSIS_TIMEOUT","POSTER_MAX_QUEUE_SIZE","POSTER_GENERATION_TIMEOUT","POSTER_OUTPUT_FORMATS","HTTPS_ENABLED","SSL_CERT_PATH","SSL_KEY_PATH","SECURITY_HEADERS_ENABLED","CSP_ENABLED","IP_WHITELIST","BACKUP_ENABLED","BACKUP_SCHEDULE","BACKUP_RETENTION_DAYS","BACKUP_STORAGE_PATH","validateEnv","process","testSchema","partial","extend","parse","error","console","warn","ZodError","missingVars","errors","map","err","path","join","message","Error","pool","password","db","secret","expiresIn","refreshExpiresIn","fastgpt","baseUrl","apiKey","appId","qwen","siliconflow","openai","uploadDir","tempDir","aws","accessKeyId","secretAccessKey","region","bucket","aliyun","accessKeySecret","host","port","user","pass","from","logLevel","logFilePath","sentry","dsn","environment","prometheus","enabled","bcryptRounds","rateLimit","windowMs","maxRequests","cors","origin","credentials","https","certPath","keyPath","headers","csp","ipWhitelist","split","filter","Boolean","cache","ttl","compression","level","heartbeatInterval","maxConnections","maxFileSize","supportedFormats","analysisTimeout","maxQueueSize","generationTimeout","outputFormats","schedule","retentionDays","storagePath"],"mappings":"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"}