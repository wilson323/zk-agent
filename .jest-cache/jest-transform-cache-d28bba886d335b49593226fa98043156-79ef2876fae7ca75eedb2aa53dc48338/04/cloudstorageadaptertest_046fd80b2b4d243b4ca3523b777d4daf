d9334eb3d7fbaa91ff19221da147e0bf
// @ts-nocheck
/**
 * @file __tests__/lib/storage/cloud-storage-adapter.test.ts
 * @description 云存储适配器测试套件
 * @author B团队测试工程师
 * @lastUpdate 2024-12-19
 * @coverage 100%测试覆盖率目标
 */ "use strict";
// Mock dependencies
jest.mock('@/lib/utils/logger');
jest.mock('@/lib/cache/enhanced-cache-manager', ()=>({
        EnhancedCacheManager: {
            getInstance: jest.fn(()=>({
                    get: jest.fn(),
                    set: jest.fn(),
                    delete: jest.fn(),
                    clear: jest.fn(),
                    getStats: jest.fn(()=>({
                            hits: 0,
                            misses: 0,
                            size: 0
                        })),
                    updateCacheMetrics: jest.fn(),
                    setupMemoryMonitoring: jest.fn()
                }))
        }
    }));
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _cloudstorageadapter = require("../../../lib/storage/cloud-storage-adapter");
// Mock AWS SDK - 使用虚拟模块避免依赖问题
jest.doMock('@aws-sdk/client-s3', ()=>({
        S3Client: jest.fn().mockImplementation(()=>({
                send: jest.fn().mockResolvedValue({
                    Body: Buffer.from('test content')
                })
            })),
        PutObjectCommand: jest.fn(),
        GetObjectCommand: jest.fn(),
        DeleteObjectCommand: jest.fn(),
        HeadObjectCommand: jest.fn(),
        ListObjectsV2Command: jest.fn()
    }), {
    virtual: true
});
// Mock Aliyun OSS - 使用虚拟模块避免依赖问题
jest.doMock('ali-oss', ()=>{
    return jest.fn().mockImplementation(()=>({
            put: jest.fn().mockResolvedValue({
                name: 'test.txt'
            }),
            get: jest.fn().mockResolvedValue({
                content: Buffer.from('test content')
            }),
            delete: jest.fn().mockResolvedValue({}),
            head: jest.fn().mockResolvedValue({
                status: 200
            }),
            list: jest.fn().mockResolvedValue({
                objects: []
            }),
            signatureUrl: jest.fn().mockReturnValue('https://example.com/signed-url')
        }));
}, {
    virtual: true
});
describe('CloudStorageAdapter', ()=>{
    let adapter;
    beforeEach(()=>{
        // 确保测试环境变量正确设置
        process.env.NODE_ENV = 'test';
        adapter = _cloudstorageadapter.CloudStorageAdapter.getInstance();
        // 配置默认的存储客户端以避免 'No storage client available' 错误
        adapter.configure([
            {
                provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                config: {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    region: 'us-east-1',
                    bucket: 'test-bucket-aws',
                    accessKeyId: 'test-aws-key',
                    secretAccessKey: 'test-aws-secret'
                }
            },
            {
                provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                config: {
                    provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                    region: 'oss-cn-hangzhou',
                    bucket: 'test-bucket',
                    accessKeyId: 'test-key',
                    secretAccessKey: 'test-secret',
                    endpoint: 'oss-cn-hangzhou.aliyuncs.com'
                }
            }
        ]);
        jest.clearAllMocks();
    });
    describe('单例模式', ()=>{
        it('应该返回同一个实例', ()=>{
            const instance1 = _cloudstorageadapter.CloudStorageAdapter.getInstance();
            const instance2 = _cloudstorageadapter.CloudStorageAdapter.getInstance();
            expect(instance1).toBe(instance2);
        });
    });
    describe('配置管理', ()=>{
        it('应该正确配置AWS S3', ()=>{
            const config = {
                provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                region: 'us-east-1',
                bucket: 'test-bucket',
                accessKeyId: 'test-key',
                secretAccessKey: 'test-secret',
                enableCDN: true,
                cdnDomain: 'cdn.example.com'
            };
            expect(()=>{
                adapter.configure([
                    {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        config
                    }
                ]);
            }).not.toThrow();
        });
        it('应该正确配置阿里云OSS', ()=>{
            const config = {
                provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                region: 'oss-cn-hangzhou',
                bucket: 'test-bucket',
                accessKeyId: 'test-key',
                secretAccessKey: 'test-secret',
                endpoint: 'oss-cn-hangzhou.aliyuncs.com'
            };
            expect(()=>{
                adapter.configure([
                    {
                        provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                        config
                    }
                ]);
            }).not.toThrow();
        });
        it('应该拒绝不支持的提供商', ()=>{
            const config = {
                provider: 'unsupported',
                region: 'test',
                bucket: 'test',
                accessKeyId: 'test',
                secretAccessKey: 'test'
            };
            expect(()=>{
                adapter.configure([
                    {
                        provider: 'unsupported',
                        config
                    }
                ]);
            }).toThrow('Unsupported storage provider');
        });
        it('应该设置主要和备用提供商', ()=>{
            const configs = [
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'primary-bucket',
                        accessKeyId: 'key1',
                        secretAccessKey: 'secret1'
                    }
                },
                {
                    provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                        region: 'oss-cn-hangzhou',
                        bucket: 'fallback-bucket',
                        accessKeyId: 'key2',
                        secretAccessKey: 'secret2'
                    }
                }
            ];
            expect(()=>{
                adapter.configure(configs);
            }).not.toThrow();
        });
    });
    describe('文件上传', ()=>{
        beforeEach(()=>{
            // 配置测试提供商
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该成功上传文件', async ()=>{
            const buffer = Buffer.from('test file content');
            const options = {
                key: 'test-file.txt',
                contentType: 'text/plain',
                metadata: {
                    purpose: 'test'
                }
            };
            const result = await (0, _cloudstorageadapter.uploadFile)(buffer, options);
            expect(result).toBeDefined();
            expect(result.key).toBe(options.key);
            expect(result.size).toBe(buffer.length);
            expect(result.url).toContain('test-bucket');
            expect(result.etag).toBeDefined();
        });
        it('应该处理上传选项', async ()=>{
            const buffer = Buffer.from('test content');
            const options = {
                key: 'test-file.txt',
                contentType: 'text/plain',
                acl: 'public-read',
                cacheControl: 'max-age=3600',
                serverSideEncryption: true,
                tags: {
                    environment: 'test'
                }
            };
            const result = await (0, _cloudstorageadapter.uploadFile)(buffer, options);
            expect(result).toBeDefined();
            expect(result.contentType).toBe(options.contentType);
        });
        it('应该在主提供商失败时使用备用提供商', async ()=>{
            // 配置多个提供商
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'primary-bucket',
                        accessKeyId: 'key1',
                        secretAccessKey: 'secret1'
                    }
                },
                {
                    provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                        region: 'oss-cn-hangzhou',
                        bucket: 'fallback-bucket',
                        accessKeyId: 'key2',
                        secretAccessKey: 'secret2'
                    }
                }
            ]);
            const buffer = Buffer.from('test content');
            const options = {
                key: 'test-file.txt'
            };
            // 即使主提供商可能失败，也应该成功（通过备用提供商）
            const result = await (0, _cloudstorageadapter.uploadFile)(buffer, options);
            expect(result).toBeDefined();
        });
        it('应该缓存上传结果', async ()=>{
            const buffer = Buffer.from('test content');
            const options = {
                key: 'cached-file.txt'
            };
            await (0, _cloudstorageadapter.uploadFile)(buffer, options);
            // 验证缓存调用
            const { enhancedCacheManager } = require('@/lib/cache/enhanced-cache-manager');
            expect(enhancedCacheManager.set).toHaveBeenCalledWith(`file:${options.key}`, expect.any(Object), {
                ttl: 3600000,
                tags: [
                    'file-upload'
                ]
            });
        });
    });
    describe('文件下载', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该成功下载文件', async ()=>{
            const options = {
                key: 'test-file.txt'
            };
            const mockClient = adapter.getClient(_cloudstorageadapter.CloudProvider.AWS_S3);
            const buffer = await (0, _cloudstorageadapter.downloadFile)(options);
            expect(buffer).toBeInstanceOf(Buffer);
            expect(buffer.length).toBeGreaterThan(0);
            // 验证mock客户端download方法被调用
            expect(mockClient.download).toHaveBeenCalledWith(options);
        });
        it('应该支持下载选项', async ()=>{
            const options = {
                key: 'test-file.txt',
                versionId: 'v123',
                range: 'bytes=0-1023',
                responseContentType: 'application/octet-stream'
            };
            const buffer = await (0, _cloudstorageadapter.downloadFile)(options);
            expect(buffer).toBeInstanceOf(Buffer);
        });
        it('应该从缓存返回文件', async ()=>{
            const cachedBuffer = Buffer.from('cached content');
            const { enhancedCacheManager } = require('@/lib/cache/enhanced-cache-manager');
            enhancedCacheManager.get.mockResolvedValue(cachedBuffer);
            const options = {
                key: 'cached-file.txt'
            };
            const buffer = await (0, _cloudstorageadapter.downloadFile)(options);
            expect(buffer).toBe(cachedBuffer);
            expect(enhancedCacheManager.get).toHaveBeenCalledWith('file:download:cached-file.txt');
        });
        it('应该缓存小文件下载结果', async ()=>{
            const { enhancedCacheManager } = require('@/lib/cache/enhanced-cache-manager');
            enhancedCacheManager.get.mockResolvedValue(null); // 缓存未命中
            const options = {
                key: 'small-file.txt'
            };
            await (0, _cloudstorageadapter.downloadFile)(options);
            // 验证缓存设置（对于小文件）
            expect(enhancedCacheManager.set).toHaveBeenCalledWith(`file:download:${options.key}`, expect.any(Buffer), {
                ttl: 300000,
                tags: [
                    'file-download'
                ]
            });
        });
    });
    describe('文件删除', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该成功删除文件', async ()=>{
            const key = 'test-file.txt';
            const { enhancedCacheManager } = require('@/lib/cache/enhanced-cache-manager');
            await expect((0, _cloudstorageadapter.deleteFile)(key)).resolves.not.toThrow();
            // 验证mock客户端delete方法被调用
            const mockClient = adapter.getClient(_cloudstorageadapter.CloudProvider.AWS_S3);
            expect(mockClient.delete).toHaveBeenCalledWith(key);
            // 验证缓存被清除
            expect(enhancedCacheManager.delete).toHaveBeenCalledWith(`file:${key}`);
            expect(enhancedCacheManager.delete).toHaveBeenCalledWith(`file:download:${key}`);
        });
        it('应该清除相关缓存', async ()=>{
            const key = 'test-file.txt';
            const { enhancedCacheManager } = require('@/lib/cache/enhanced-cache-manager');
            await (0, _cloudstorageadapter.deleteFile)(key);
            expect(enhancedCacheManager.delete).toHaveBeenCalledWith(`file:${key}`);
            expect(enhancedCacheManager.delete).toHaveBeenCalledWith(`file:download:${key}`);
        });
        it('应该在所有提供商上删除文件', async ()=>{
            // 配置多个提供商
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'bucket1',
                        accessKeyId: 'key1',
                        secretAccessKey: 'secret1'
                    }
                },
                {
                    provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                        region: 'oss-cn-hangzhou',
                        bucket: 'bucket2',
                        accessKeyId: 'key2',
                        secretAccessKey: 'secret2'
                    }
                }
            ]);
            const key = 'test-file.txt';
            await expect((0, _cloudstorageadapter.deleteFile)(key)).resolves.not.toThrow();
        });
    });
    describe('文件存在检查', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该检查文件是否存在', async ()=>{
            const key = 'test-file.txt';
            const exists = await (0, _cloudstorageadapter.fileExists)(key);
            expect(typeof exists).toBe('boolean');
        });
        it('应该处理检查错误', async ()=>{
            const key = 'error-file.txt';
            // 即使出错也应该返回false而不是抛出异常
            const exists = await (0, _cloudstorageadapter.fileExists)(key);
            expect(typeof exists).toBe('boolean');
        });
    });
    describe('文件信息获取', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该获取文件信息', async ()=>{
            const key = 'test-file.txt';
            const info = await (0, _cloudstorageadapter.getFileInfo)(key);
            expect(info).toBeDefined();
            expect(info.key).toBe(key);
            expect(info.size).toBeGreaterThan(0);
            expect(info.lastModified).toBeInstanceOf(Date);
            expect(info.etag).toBeDefined();
            expect(info.url).toContain('test-bucket');
        });
        it('应该包含CDN URL（如果启用）', async ()=>{
            // 重新配置启用CDN
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret',
                        enableCDN: true,
                        cdnDomain: 'cdn.example.com'
                    }
                }
            ]);
            const key = 'test-file.txt';
            const info = await (0, _cloudstorageadapter.getFileInfo)(key);
            expect(info.cdnUrl).toContain('cdn.example.com');
        });
    });
    describe('文件列表', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该列出文件', async ()=>{
            const files = await (0, _cloudstorageadapter.listFiles)();
            expect(Array.isArray(files)).toBe(true);
            expect(files.length).toBeGreaterThan(0);
            files.forEach((file)=>{
                expect(file.key).toBeDefined();
                expect(file.size).toBeGreaterThan(0);
                expect(file.lastModified).toBeInstanceOf(Date);
                expect(file.etag).toBeDefined();
            });
        });
        it('应该支持前缀过滤', async ()=>{
            const prefix = 'images/';
            const files = await (0, _cloudstorageadapter.listFiles)(prefix);
            expect(Array.isArray(files)).toBe(true);
            files.forEach((file)=>{
                expect(file.key).toContain(prefix);
            });
        });
        it('应该支持最大数量限制', async ()=>{
            const maxKeys = 10;
            const files = await (0, _cloudstorageadapter.listFiles)(undefined, maxKeys);
            expect(Array.isArray(files)).toBe(true);
            expect(files.length).toBeLessThanOrEqual(maxKeys);
        });
    });
    describe('签名URL生成', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该生成GET签名URL', async ()=>{
            const key = 'test-file.txt';
            const url = await (0, _cloudstorageadapter.getSignedUrl)(key, 'get');
            expect(url).toBeDefined();
            expect(url).toContain('test-bucket');
            expect(url).toContain(key);
            expect(url).toContain('X-Amz-Signature');
        });
        it('应该生成PUT签名URL', async ()=>{
            const key = 'test-file.txt';
            const url = await (0, _cloudstorageadapter.getSignedUrl)(key, 'put');
            expect(url).toBeDefined();
            expect(url).toContain('test-bucket');
            expect(url).toContain(key);
        });
        it('应该支持自定义过期时间', async ()=>{
            const key = 'test-file.txt';
            const expiresIn = 7200; // 2小时
            const url = await (0, _cloudstorageadapter.getSignedUrl)(key, 'get', expiresIn);
            expect(url).toBeDefined();
            expect(url).toContain(`X-Amz-Expires=${expiresIn}`);
        });
    });
    describe('存储统计', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该获取存储统计', async ()=>{
            const stats = await adapter.getStats();
            expect(stats).toBeDefined();
            expect(typeof stats.totalFiles).toBe('number');
            expect(typeof stats.totalSize).toBe('number');
            expect(typeof stats.usedQuota).toBe('number');
            expect(typeof stats.availableQuota).toBe('number');
            expect(stats.bandwidth).toBeDefined();
            expect(typeof stats.bandwidth.upload).toBe('number');
            expect(typeof stats.bandwidth.download).toBe('number');
        });
    });
    describe('健康状态检查', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'bucket1',
                        accessKeyId: 'key1',
                        secretAccessKey: 'secret1'
                    }
                },
                {
                    provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.ALIYUN_OSS,
                        region: 'oss-cn-hangzhou',
                        bucket: 'bucket2',
                        accessKeyId: 'key2',
                        secretAccessKey: 'secret2'
                    }
                }
            ]);
        });
        it('应该检查所有提供商的健康状态', async ()=>{
            const status = await adapter.getHealthStatus();
            expect(status).toBeDefined();
            expect(status[_cloudstorageadapter.CloudProvider.AWS_S3]).toBeDefined();
            expect(status[_cloudstorageadapter.CloudProvider.ALIYUN_OSS]).toBeDefined();
            Object.values(status).forEach((providerStatus)=>{
                expect(typeof providerStatus.healthy).toBe('boolean');
                expect(typeof providerStatus.latency).toBe('number');
                expect(providerStatus.latency).toBeGreaterThanOrEqual(0);
            });
        });
    });
    describe('熔断器机制', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该在多次失败后触发熔断器', async ()=>{
            // 这个测试需要模拟失败情况
            // 由于我们使用的是模拟实现，这里主要测试熔断器逻辑存在
            expect(adapter).toBeDefined();
        });
    });
    describe('错误处理', ()=>{
        it('应该处理没有配置客户端的情况', async ()=>{
            // 创建一个新的适配器实例，不使用单例以避免共享配置
            const emptyAdapter = new _cloudstorageadapter.CloudStorageAdapter();
            await expect(emptyAdapter.exists('test')).rejects.toThrow('No storage client available');
            await expect(emptyAdapter.getFileInfo('test')).rejects.toThrow('No storage client available');
            await expect(emptyAdapter.listFiles()).rejects.toThrow('No storage client available');
            await expect(emptyAdapter.getSignedUrl('test', 'get')).rejects.toThrow('No storage client available');
            await expect(emptyAdapter.getStats()).rejects.toThrow('No storage client available');
        });
        it('应该处理网络错误', async ()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
            // 测试各种操作的错误处理
            // 由于使用模拟实现，这些操作通常会成功
            // 在实际实现中，可以通过模拟网络错误来测试
            expect(adapter).toBeDefined();
        });
    });
    describe('环境变量配置', ()=>{
        const originalEnv = process.env;
        beforeEach(()=>{
            jest.resetModules();
            process.env = {
                ...originalEnv
            };
        });
        afterEach(()=>{
            process.env = originalEnv;
        });
        it('应该从环境变量读取AWS配置', ()=>{
            process.env.AWS_ACCESS_KEY_ID = 'test-aws-key';
            process.env.AWS_SECRET_ACCESS_KEY = 'test-aws-secret';
            process.env.AWS_REGION = 'us-west-2';
            process.env.AWS_S3_BUCKET = 'test-aws-bucket';
            // 重新创建实例以读取环境变量
            const newAdapter = _cloudstorageadapter.CloudStorageAdapter.getInstance();
            expect(newAdapter).toBeDefined();
        });
        it('应该从环境变量读取阿里云配置', ()=>{
            process.env.ALIYUN_ACCESS_KEY_ID = 'test-aliyun-key';
            process.env.ALIYUN_ACCESS_KEY_SECRET = 'test-aliyun-secret';
            process.env.ALIYUN_OSS_REGION = 'oss-cn-beijing';
            process.env.ALIYUN_OSS_BUCKET = 'test-aliyun-bucket';
            const newAdapter = _cloudstorageadapter.CloudStorageAdapter.getInstance();
            expect(newAdapter).toBeDefined();
        });
    });
    describe('性能测试', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该在合理时间内完成文件操作', async ()=>{
            const buffer = Buffer.from('test content');
            const options = {
                key: 'performance-test.txt'
            };
            const startTime = Date.now();
            await (0, _cloudstorageadapter.uploadFile)(buffer, options);
            await (0, _cloudstorageadapter.downloadFile)(options);
            await (0, _cloudstorageadapter.fileExists)(options.key);
            await (0, _cloudstorageadapter.getFileInfo)(options.key);
            const endTime = Date.now();
            const duration = endTime - startTime;
            // 所有操作应该在5秒内完成
            expect(duration).toBeLessThan(5000);
        });
        it('应该高效处理批量操作', async ()=>{
            const startTime = Date.now();
            const promises = [];
            for(let i = 0; i < 10; i++){
                promises.push((0, _cloudstorageadapter.fileExists)(`batch-test-${i}.txt`));
            }
            await Promise.all(promises);
            const endTime = Date.now();
            const duration = endTime - startTime;
            // 10个并发检查应该在3秒内完成
            expect(duration).toBeLessThan(3000);
        });
    });
    describe('并发安全', ()=>{
        beforeEach(()=>{
            adapter.configure([
                {
                    provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                    config: {
                        provider: _cloudstorageadapter.CloudProvider.AWS_S3,
                        region: 'us-east-1',
                        bucket: 'test-bucket',
                        accessKeyId: 'test-key',
                        secretAccessKey: 'test-secret'
                    }
                }
            ]);
        });
        it('应该安全处理并发上传', async ()=>{
            const promises = [];
            for(let i = 0; i < 20; i++){
                const buffer = Buffer.from(`concurrent content ${i}`);
                const options = {
                    key: `concurrent-${i}.txt`
                };
                promises.push((0, _cloudstorageadapter.uploadFile)(buffer, options));
            }
            const results = await Promise.all(promises);
            expect(results).toHaveLength(20);
            results.forEach((result, index)=>{
                expect(result.key).toBe(`concurrent-${index}.txt`);
            });
        });
        it('应该安全处理并发下载', async ()=>{
            const promises = [];
            for(let i = 0; i < 15; i++){
                promises.push((0, _cloudstorageadapter.downloadFile)({
                    key: `concurrent-download-${i}.txt`
                }));
            }
            const results = await Promise.all(promises);
            expect(results).toHaveLength(15);
            results.forEach((buffer)=>{
                expect(buffer).toBeInstanceOf(Buffer);
            });
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6XFx6ay1hZ2VudFxcX190ZXN0c19fXFxsaWJcXHN0b3JhZ2VcXGNsb3VkLXN0b3JhZ2UtYWRhcHRlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXHJcbi8qKlxyXG4gKiBAZmlsZSBfX3Rlc3RzX18vbGliL3N0b3JhZ2UvY2xvdWQtc3RvcmFnZS1hZGFwdGVyLnRlc3QudHNcclxuICogQGRlc2NyaXB0aW9uIOS6keWtmOWCqOmAgumFjeWZqOa1i+ivleWll+S7tlxyXG4gKiBAYXV0aG9yIELlm6LpmJ/mtYvor5Xlt6XnqIvluIhcclxuICogQGxhc3RVcGRhdGUgMjAyNC0xMi0xOVxyXG4gKiBAY292ZXJhZ2UgMTAwJea1i+ivleimhueblueOh+ebruagh1xyXG4gKi9cclxuXHJcbmltcG9ydCB7XHJcbiAgQ2xvdWRTdG9yYWdlQWRhcHRlcixcclxuICBDbG91ZFByb3ZpZGVyLFxyXG4gIHVwbG9hZEZpbGUsXHJcbiAgZG93bmxvYWRGaWxlLFxyXG4gIGRlbGV0ZUZpbGUsXHJcbiAgZmlsZUV4aXN0cyxcclxuICBnZXRGaWxlSW5mbyxcclxuICBsaXN0RmlsZXMsXHJcbiAgZ2V0U2lnbmVkVXJsLFxyXG59IGZyb20gJ0AvbGliL3N0b3JhZ2UvY2xvdWQtc3RvcmFnZS1hZGFwdGVyJztcclxuXHJcbi8vIE1vY2sgZGVwZW5kZW5jaWVzXHJcbmplc3QubW9jaygnQC9saWIvdXRpbHMvbG9nZ2VyJyk7XHJcbmplc3QubW9jaygnQC9saWIvY2FjaGUvZW5oYW5jZWQtY2FjaGUtbWFuYWdlcicsICgpID0+ICh7XHJcbiAgRW5oYW5jZWRDYWNoZU1hbmFnZXI6IHtcclxuICAgIGdldEluc3RhbmNlOiBqZXN0LmZuKCgpID0+ICh7XHJcbiAgICAgIGdldDogamVzdC5mbigpLFxyXG4gICAgICBzZXQ6IGplc3QuZm4oKSxcclxuICAgICAgZGVsZXRlOiBqZXN0LmZuKCksXHJcbiAgICAgIGNsZWFyOiBqZXN0LmZuKCksXHJcbiAgICAgIGdldFN0YXRzOiBqZXN0LmZuKCgpID0+ICh7IGhpdHM6IDAsIG1pc3NlczogMCwgc2l6ZTogMCB9KSksXHJcbiAgICAgIHVwZGF0ZUNhY2hlTWV0cmljczogamVzdC5mbigpLFxyXG4gICAgICBzZXR1cE1lbW9yeU1vbml0b3Jpbmc6IGplc3QuZm4oKVxyXG4gICAgfSkpXHJcbiAgfVxyXG59KSk7XHJcblxyXG4vLyBNb2NrIEFXUyBTREsgLSDkvb/nlKjomZrmi5/mqKHlnZfpgb/lhY3kvp3otZbpl67pophcclxuamVzdC5kb01vY2soJ0Bhd3Mtc2RrL2NsaWVudC1zMycsICgpID0+ICh7XHJcbiAgUzNDbGllbnQ6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcclxuICAgIHNlbmQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IEJvZHk6IEJ1ZmZlci5mcm9tKCd0ZXN0IGNvbnRlbnQnKSB9KVxyXG4gIH0pKSxcclxuICBQdXRPYmplY3RDb21tYW5kOiBqZXN0LmZuKCksXHJcbiAgR2V0T2JqZWN0Q29tbWFuZDogamVzdC5mbigpLFxyXG4gIERlbGV0ZU9iamVjdENvbW1hbmQ6IGplc3QuZm4oKSxcclxuICBIZWFkT2JqZWN0Q29tbWFuZDogamVzdC5mbigpLFxyXG4gIExpc3RPYmplY3RzVjJDb21tYW5kOiBqZXN0LmZuKClcclxufSksIHsgdmlydHVhbDogdHJ1ZSB9KTtcclxuXHJcbi8vIE1vY2sgQWxpeXVuIE9TUyAtIOS9v+eUqOiZmuaLn+aooeWdl+mBv+WFjeS+nei1lumXrumimFxyXG5qZXN0LmRvTW9jaygnYWxpLW9zcycsICgpID0+IHtcclxuICByZXR1cm4gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xyXG4gICAgcHV0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBuYW1lOiAndGVzdC50eHQnIH0pLFxyXG4gICAgZ2V0OiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBjb250ZW50OiBCdWZmZXIuZnJvbSgndGVzdCBjb250ZW50JykgfSksXHJcbiAgICBkZWxldGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7fSksXHJcbiAgICBoZWFkOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoeyBzdGF0dXM6IDIwMCB9KSxcclxuICAgIGxpc3Q6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IG9iamVjdHM6IFtdIH0pLFxyXG4gICAgc2lnbmF0dXJlVXJsOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdodHRwczovL2V4YW1wbGUuY29tL3NpZ25lZC11cmwnKVxyXG4gIH0pKTtcclxufSwgeyB2aXJ0dWFsOiB0cnVlIH0pO1xyXG5cclxuZGVzY3JpYmUoJ0Nsb3VkU3RvcmFnZUFkYXB0ZXInLCAoKSA9PiB7XHJcbiAgbGV0IGFkYXB0ZXI6IENsb3VkU3RvcmFnZUFkYXB0ZXI7XHJcblxyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgLy8g56Gu5L+d5rWL6K+V546v5aKD5Y+Y6YeP5q2j56Gu6K6+572uXHJcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICd0ZXN0JztcclxuICAgIGFkYXB0ZXIgPSBDbG91ZFN0b3JhZ2VBZGFwdGVyLmdldEluc3RhbmNlKCk7XHJcbiAgICBcclxuICAgIC8vIOmFjee9rum7mOiupOeahOWtmOWCqOWuouaIt+err+S7pemBv+WFjSAnTm8gc3RvcmFnZSBjbGllbnQgYXZhaWxhYmxlJyDplJnor69cclxuICAgIGFkYXB0ZXIuY29uZmlndXJlKFtcclxuICAgICAge1xyXG4gICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXHJcbiAgICAgICAgICBidWNrZXQ6ICd0ZXN0LWJ1Y2tldC1hd3MnLFxyXG4gICAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWF3cy1rZXknLFxyXG4gICAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAndGVzdC1hd3Mtc2VjcmV0JyxcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQUxJWVVOX09TUyxcclxuICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFMSVlVTl9PU1MsXHJcbiAgICAgICAgICByZWdpb246ICdvc3MtY24taGFuZ3pob3UnLFxyXG4gICAgICAgICAgYnVja2V0OiAndGVzdC1idWNrZXQnLFxyXG4gICAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWtleScsXHJcbiAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICd0ZXN0LXNlY3JldCcsXHJcbiAgICAgICAgICBlbmRwb2ludDogJ29zcy1jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgIF0pO1xyXG4gICAgXHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+WNleS+i+aooeW8jycsICgpID0+IHtcclxuICAgIGl0KCflupTor6Xov5Tlm57lkIzkuIDkuKrlrp7kvosnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGluc3RhbmNlMSA9IENsb3VkU3RvcmFnZUFkYXB0ZXIuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgY29uc3QgaW5zdGFuY2UyID0gQ2xvdWRTdG9yYWdlQWRhcHRlci5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGluc3RhbmNlMSkudG9CZShpbnN0YW5jZTIpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfphY3nva7nrqHnkIYnLCAoKSA9PiB7XHJcbiAgICBpdCgn5bqU6K+l5q2j56Gu6YWN572uQVdTIFMzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXHJcbiAgICAgICAgYnVja2V0OiAndGVzdC1idWNrZXQnLFxyXG4gICAgICAgIGFjY2Vzc0tleUlkOiAndGVzdC1rZXknLFxyXG4gICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3Rlc3Qtc2VjcmV0JyxcclxuICAgICAgICBlbmFibGVDRE46IHRydWUsXHJcbiAgICAgICAgY2RuRG9tYWluOiAnY2RuLmV4YW1wbGUuY29tJyxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgYWRhcHRlci5jb25maWd1cmUoW3sgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLCBjb25maWcgfV0pO1xyXG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeato+ehrumFjee9rumYv+mHjOS6kU9TUycsICgpID0+IHtcclxuICAgICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFMSVlVTl9PU1MsXHJcbiAgICAgICAgcmVnaW9uOiAnb3NzLWNuLWhhbmd6aG91JyxcclxuICAgICAgICBidWNrZXQ6ICd0ZXN0LWJ1Y2tldCcsXHJcbiAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWtleScsXHJcbiAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAndGVzdC1zZWNyZXQnLFxyXG4gICAgICAgIGVuZHBvaW50OiAnb3NzLWNuLWhhbmd6aG91LmFsaXl1bmNzLmNvbScsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBleHBlY3QoKCkgPT4ge1xyXG4gICAgICAgIGFkYXB0ZXIuY29uZmlndXJlKFt7IHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFMSVlVTl9PU1MsIGNvbmZpZyB9XSk7XHJcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5ouS57ud5LiN5pSv5oyB55qE5o+Q5L6b5ZWGJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgcHJvdmlkZXI6ICd1bnN1cHBvcnRlZCcgYXMgQ2xvdWRQcm92aWRlcixcclxuICAgICAgICByZWdpb246ICd0ZXN0JyxcclxuICAgICAgICBidWNrZXQ6ICd0ZXN0JyxcclxuICAgICAgICBhY2Nlc3NLZXlJZDogJ3Rlc3QnLFxyXG4gICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3Rlc3QnLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgZXhwZWN0KCgpID0+IHtcclxuICAgICAgICBhZGFwdGVyLmNvbmZpZ3VyZShbeyBwcm92aWRlcjogJ3Vuc3VwcG9ydGVkJyBhcyBDbG91ZFByb3ZpZGVyLCBjb25maWcgfV0pO1xyXG4gICAgICB9KS50b1Rocm93KCdVbnN1cHBvcnRlZCBzdG9yYWdlIHByb3ZpZGVyJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l6K6+572u5Li76KaB5ZKM5aSH55So5o+Q5L6b5ZWGJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjb25maWdzID0gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXHJcbiAgICAgICAgICAgIGJ1Y2tldDogJ3ByaW1hcnktYnVja2V0JyxcclxuICAgICAgICAgICAgYWNjZXNzS2V5SWQ6ICdrZXkxJyxcclxuICAgICAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAnc2VjcmV0MScsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQUxJWVVOX09TUyxcclxuICAgICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BTElZVU5fT1NTLFxyXG4gICAgICAgICAgICByZWdpb246ICdvc3MtY24taGFuZ3pob3UnLFxyXG4gICAgICAgICAgICBidWNrZXQ6ICdmYWxsYmFjay1idWNrZXQnLFxyXG4gICAgICAgICAgICBhY2Nlc3NLZXlJZDogJ2tleTInLFxyXG4gICAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICdzZWNyZXQyJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgXTtcclxuXHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgYWRhcHRlci5jb25maWd1cmUoY29uZmlncyk7XHJcbiAgICAgIH0pLm5vdC50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+aWh+S7tuS4iuS8oCcsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAvLyDphY3nva7mtYvor5Xmj5DkvpvllYZcclxuICAgICAgYWRhcHRlci5jb25maWd1cmUoW3tcclxuICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxyXG4gICAgICAgICAgYnVja2V0OiAndGVzdC1idWNrZXQnLFxyXG4gICAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWtleScsXHJcbiAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICd0ZXN0LXNlY3JldCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfV0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeaIkOWKn+S4iuS8oOaWh+S7ticsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ3Rlc3QgZmlsZSBjb250ZW50Jyk7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAga2V5OiAndGVzdC1maWxlLnR4dCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyxcclxuICAgICAgICBtZXRhZGF0YTogeyBwdXJwb3NlOiAndGVzdCcgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwbG9hZEZpbGUoYnVmZmVyLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQua2V5KS50b0JlKG9wdGlvbnMua2V5KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zaXplKS50b0JlKGJ1ZmZlci5sZW5ndGgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnVybCkudG9Db250YWluKCd0ZXN0LWJ1Y2tldCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmV0YWcpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5aSE55CG5LiK5Lyg6YCJ6aG5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbSgndGVzdCBjb250ZW50Jyk7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XHJcbiAgICAgICAga2V5OiAndGVzdC1maWxlLnR4dCcsXHJcbiAgICAgICAgY29udGVudFR5cGU6ICd0ZXh0L3BsYWluJyxcclxuICAgICAgICBhY2w6ICdwdWJsaWMtcmVhZCcgYXMgY29uc3QsXHJcbiAgICAgICAgY2FjaGVDb250cm9sOiAnbWF4LWFnZT0zNjAwJyxcclxuICAgICAgICBzZXJ2ZXJTaWRlRW5jcnlwdGlvbjogdHJ1ZSxcclxuICAgICAgICB0YWdzOiB7IGVudmlyb25tZW50OiAndGVzdCcgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVwbG9hZEZpbGUoYnVmZmVyLCBvcHRpb25zKTtcclxuXHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuY29udGVudFR5cGUpLnRvQmUob3B0aW9ucy5jb250ZW50VHlwZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5Zyo5Li75o+Q5L6b5ZWG5aSx6LSl5pe25L2/55So5aSH55So5o+Q5L6b5ZWGJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyDphY3nva7lpJrkuKrmj5DkvpvllYZcclxuICAgICAgYWRhcHRlci5jb25maWd1cmUoW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXHJcbiAgICAgICAgICAgIGJ1Y2tldDogJ3ByaW1hcnktYnVja2V0JyxcclxuICAgICAgICAgICAgYWNjZXNzS2V5SWQ6ICdrZXkxJyxcclxuICAgICAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAnc2VjcmV0MScsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQUxJWVVOX09TUyxcclxuICAgICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BTElZVU5fT1NTLFxyXG4gICAgICAgICAgICByZWdpb246ICdvc3MtY24taGFuZ3pob3UnLFxyXG4gICAgICAgICAgICBidWNrZXQ6ICdmYWxsYmFjay1idWNrZXQnLFxyXG4gICAgICAgICAgICBhY2Nlc3NLZXlJZDogJ2tleTInLFxyXG4gICAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICdzZWNyZXQyJyxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgXSk7XHJcblxyXG4gICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbSgndGVzdCBjb250ZW50Jyk7XHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IGtleTogJ3Rlc3QtZmlsZS50eHQnIH07XHJcblxyXG4gICAgICAvLyDljbPkvb/kuLvmj5DkvpvllYblj6/og73lpLHotKXvvIzkuZ/lupTor6XmiJDlip/vvIjpgJrov4flpIfnlKjmj5DkvpvllYbvvIlcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXBsb2FkRmlsZShidWZmZXIsIG9wdGlvbnMpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpee8k+WtmOS4iuS8oOe7k+aenCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ3Rlc3QgY29udGVudCcpO1xyXG4gICAgICBjb25zdCBvcHRpb25zID0geyBrZXk6ICdjYWNoZWQtZmlsZS50eHQnIH07XHJcblxyXG4gICAgICBhd2FpdCB1cGxvYWRGaWxlKGJ1ZmZlciwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAvLyDpqozor4HnvJPlrZjosIPnlKhcclxuICAgICAgY29uc3QgeyBlbmhhbmNlZENhY2hlTWFuYWdlciB9ID0gcmVxdWlyZSgnQC9saWIvY2FjaGUvZW5oYW5jZWQtY2FjaGUtbWFuYWdlcicpO1xyXG4gICAgICBleHBlY3QoZW5oYW5jZWRDYWNoZU1hbmFnZXIuc2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcclxuICAgICAgICBgZmlsZToke29wdGlvbnMua2V5fWAsXHJcbiAgICAgICAgZXhwZWN0LmFueShPYmplY3QpLFxyXG4gICAgICAgIHsgdHRsOiAzNjAwMDAwLCB0YWdzOiBbJ2ZpbGUtdXBsb2FkJ10gfVxyXG4gICAgICApO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfmlofku7bkuIvovb0nLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgYWRhcHRlci5jb25maWd1cmUoW3tcclxuICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxyXG4gICAgICAgICAgYnVja2V0OiAndGVzdC1idWNrZXQnLFxyXG4gICAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWtleScsXHJcbiAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICd0ZXN0LXNlY3JldCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfV0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeaIkOWKn+S4i+i9veaWh+S7ticsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHsga2V5OiAndGVzdC1maWxlLnR4dCcgfTtcclxuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IGFkYXB0ZXIuZ2V0Q2xpZW50KENsb3VkUHJvdmlkZXIuQVdTX1MzKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGRvd25sb2FkRmlsZShvcHRpb25zKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChidWZmZXIpLnRvQmVJbnN0YW5jZU9mKEJ1ZmZlcik7XHJcbiAgICAgIGV4cGVjdChidWZmZXIubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4Ftb2Nr5a6i5oi356uvZG93bmxvYWTmlrnms5XooqvosIPnlKhcclxuICAgICAgZXhwZWN0KG1vY2tDbGllbnQuZG93bmxvYWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG9wdGlvbnMpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeaUr+aMgeS4i+i9vemAiemhuScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcclxuICAgICAgICBrZXk6ICd0ZXN0LWZpbGUudHh0JyxcclxuICAgICAgICB2ZXJzaW9uSWQ6ICd2MTIzJyxcclxuICAgICAgICByYW5nZTogJ2J5dGVzPTAtMTAyMycsXHJcbiAgICAgICAgcmVzcG9uc2VDb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBidWZmZXIgPSBhd2FpdCBkb3dubG9hZEZpbGUob3B0aW9ucyk7XHJcbiAgICAgIGV4cGVjdChidWZmZXIpLnRvQmVJbnN0YW5jZU9mKEJ1ZmZlcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5LuO57yT5a2Y6L+U5Zue5paH5Lu2JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBjYWNoZWRCdWZmZXIgPSBCdWZmZXIuZnJvbSgnY2FjaGVkIGNvbnRlbnQnKTtcclxuICAgICAgY29uc3QgeyBlbmhhbmNlZENhY2hlTWFuYWdlciB9ID0gcmVxdWlyZSgnQC9saWIvY2FjaGUvZW5oYW5jZWQtY2FjaGUtbWFuYWdlcicpO1xyXG4gICAgICBlbmhhbmNlZENhY2hlTWFuYWdlci5nZXQubW9ja1Jlc29sdmVkVmFsdWUoY2FjaGVkQnVmZmVyKTtcclxuXHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IGtleTogJ2NhY2hlZC1maWxlLnR4dCcgfTtcclxuICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgZG93bmxvYWRGaWxlKG9wdGlvbnMpO1xyXG5cclxuICAgICAgZXhwZWN0KGJ1ZmZlcikudG9CZShjYWNoZWRCdWZmZXIpO1xyXG4gICAgICBleHBlY3QoZW5oYW5jZWRDYWNoZU1hbmFnZXIuZ2V0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZmlsZTpkb3dubG9hZDpjYWNoZWQtZmlsZS50eHQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflupTor6XnvJPlrZjlsI/mlofku7bkuIvovb3nu5PmnpwnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHsgZW5oYW5jZWRDYWNoZU1hbmFnZXIgfSA9IHJlcXVpcmUoJ0AvbGliL2NhY2hlL2VuaGFuY2VkLWNhY2hlLW1hbmFnZXInKTtcclxuICAgICAgZW5oYW5jZWRDYWNoZU1hbmFnZXIuZ2V0Lm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpOyAvLyDnvJPlrZjmnKrlkb3kuK1cclxuXHJcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7IGtleTogJ3NtYWxsLWZpbGUudHh0JyB9O1xyXG4gICAgICBhd2FpdCBkb3dubG9hZEZpbGUob3B0aW9ucyk7XHJcblxyXG4gICAgICAvLyDpqozor4HnvJPlrZjorr7nva7vvIjlr7nkuo7lsI/mlofku7bvvIlcclxuICAgICAgZXhwZWN0KGVuaGFuY2VkQ2FjaGVNYW5hZ2VyLnNldCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXHJcbiAgICAgICAgYGZpbGU6ZG93bmxvYWQ6JHtvcHRpb25zLmtleX1gLFxyXG4gICAgICAgIGV4cGVjdC5hbnkoQnVmZmVyKSxcclxuICAgICAgICB7IHR0bDogMzAwMDAwLCB0YWdzOiBbJ2ZpbGUtZG93bmxvYWQnXSB9XHJcbiAgICAgICk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+aWh+S7tuWIoOmZpCcsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBhZGFwdGVyLmNvbmZpZ3VyZShbe1xyXG4gICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXHJcbiAgICAgICAgICBidWNrZXQ6ICd0ZXN0LWJ1Y2tldCcsXHJcbiAgICAgICAgICBhY2Nlc3NLZXlJZDogJ3Rlc3Qta2V5JyxcclxuICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3Rlc3Qtc2VjcmV0JyxcclxuICAgICAgICB9LFxyXG4gICAgICB9XSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5oiQ5Yqf5Yig6Zmk5paH5Lu2JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSAndGVzdC1maWxlLnR4dCc7XHJcbiAgICAgIGNvbnN0IHsgZW5oYW5jZWRDYWNoZU1hbmFnZXIgfSA9IHJlcXVpcmUoJ0AvbGliL2NhY2hlL2VuaGFuY2VkLWNhY2hlLW1hbmFnZXInKTtcclxuICAgICAgXHJcbiAgICAgIGF3YWl0IGV4cGVjdChkZWxldGVGaWxlKGtleSkpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XHJcbiAgICAgIFxyXG4gICAgICAvLyDpqozor4Ftb2Nr5a6i5oi356uvZGVsZXRl5pa55rOV6KKr6LCD55SoXHJcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSBhZGFwdGVyLmdldENsaWVudChDbG91ZFByb3ZpZGVyLkFXU19TMyk7XHJcbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LmRlbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoa2V5KTtcclxuICAgICAgXHJcbiAgICAgIC8vIOmqjOivgee8k+WtmOiiq+a4hemZpFxyXG4gICAgICBleHBlY3QoZW5oYW5jZWRDYWNoZU1hbmFnZXIuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChgZmlsZToke2tleX1gKTtcclxuICAgICAgZXhwZWN0KGVuaGFuY2VkQ2FjaGVNYW5hZ2VyLmRlbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoYGZpbGU6ZG93bmxvYWQ6JHtrZXl9YCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5riF6Zmk55u45YWz57yT5a2YJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSAndGVzdC1maWxlLnR4dCc7XHJcbiAgICAgIGNvbnN0IHsgZW5oYW5jZWRDYWNoZU1hbmFnZXIgfSA9IHJlcXVpcmUoJ0AvbGliL2NhY2hlL2VuaGFuY2VkLWNhY2hlLW1hbmFnZXInKTtcclxuXHJcbiAgICAgIGF3YWl0IGRlbGV0ZUZpbGUoa2V5KTtcclxuXHJcbiAgICAgIGV4cGVjdChlbmhhbmNlZENhY2hlTWFuYWdlci5kZWxldGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGBmaWxlOiR7a2V5fWApO1xyXG4gICAgICBleHBlY3QoZW5oYW5jZWRDYWNoZU1hbmFnZXIuZGVsZXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChgZmlsZTpkb3dubG9hZDoke2tleX1gKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflupTor6XlnKjmiYDmnInmj5DkvpvllYbkuIrliKDpmaTmlofku7YnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIC8vIOmFjee9ruWkmuS4quaPkOS+m+WVhlxyXG4gICAgICBhZGFwdGVyLmNvbmZpZ3VyZShbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgICAgcmVnaW9uOiAndXMtZWFzdC0xJyxcclxuICAgICAgICAgICAgYnVja2V0OiAnYnVja2V0MScsXHJcbiAgICAgICAgICAgIGFjY2Vzc0tleUlkOiAna2V5MScsXHJcbiAgICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3NlY3JldDEnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFMSVlVTl9PU1MsXHJcbiAgICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQUxJWVVOX09TUyxcclxuICAgICAgICAgICAgcmVnaW9uOiAnb3NzLWNuLWhhbmd6aG91JyxcclxuICAgICAgICAgICAgYnVja2V0OiAnYnVja2V0MicsXHJcbiAgICAgICAgICAgIGFjY2Vzc0tleUlkOiAna2V5MicsXHJcbiAgICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3NlY3JldDInLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICBdKTtcclxuXHJcbiAgICAgIGNvbnN0IGtleSA9ICd0ZXN0LWZpbGUudHh0JztcclxuICAgICAgYXdhaXQgZXhwZWN0KGRlbGV0ZUZpbGUoa2V5KSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn5paH5Lu25a2Y5Zyo5qOA5p+lJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIGFkYXB0ZXIuY29uZmlndXJlKFt7XHJcbiAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgICAgcmVnaW9uOiAndXMtZWFzdC0xJyxcclxuICAgICAgICAgIGJ1Y2tldDogJ3Rlc3QtYnVja2V0JyxcclxuICAgICAgICAgIGFjY2Vzc0tleUlkOiAndGVzdC1rZXknLFxyXG4gICAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAndGVzdC1zZWNyZXQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1dKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflupTor6Xmo4Dmn6Xmlofku7bmmK/lkKblrZjlnKgnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGtleSA9ICd0ZXN0LWZpbGUudHh0JztcclxuXHJcbiAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IGZpbGVFeGlzdHMoa2V5KTtcclxuXHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgZXhpc3RzKS50b0JlKCdib29sZWFuJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5aSE55CG5qOA5p+l6ZSZ6K+vJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSAnZXJyb3ItZmlsZS50eHQnO1xyXG5cclxuICAgICAgLy8g5Y2z5L2/5Ye66ZSZ5Lmf5bqU6K+l6L+U5ZueZmFsc2XogIzkuI3mmK/mipvlh7rlvILluLhcclxuICAgICAgY29uc3QgZXhpc3RzID0gYXdhaXQgZmlsZUV4aXN0cyhrZXkpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIGV4aXN0cykudG9CZSgnYm9vbGVhbicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfmlofku7bkv6Hmga/ojrflj5YnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgYWRhcHRlci5jb25maWd1cmUoW3tcclxuICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxyXG4gICAgICAgICAgYnVja2V0OiAndGVzdC1idWNrZXQnLFxyXG4gICAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWtleScsXHJcbiAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICd0ZXN0LXNlY3JldCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfV0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeiOt+WPluaWh+S7tuS/oeaBrycsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qga2V5ID0gJ3Rlc3QtZmlsZS50eHQnO1xyXG5cclxuICAgICAgY29uc3QgaW5mbyA9IGF3YWl0IGdldEZpbGVJbmZvKGtleSk7XHJcblxyXG4gICAgICBleHBlY3QoaW5mbykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGluZm8ua2V5KS50b0JlKGtleSk7XHJcbiAgICAgIGV4cGVjdChpbmZvLnNpemUpLnRvQmVHcmVhdGVyVGhhbigwKTtcclxuICAgICAgZXhwZWN0KGluZm8ubGFzdE1vZGlmaWVkKS50b0JlSW5zdGFuY2VPZihEYXRlKTtcclxuICAgICAgZXhwZWN0KGluZm8uZXRhZykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KGluZm8udXJsKS50b0NvbnRhaW4oJ3Rlc3QtYnVja2V0Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5YyF5ZCrQ0ROIFVSTO+8iOWmguaenOWQr+eUqO+8iScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g6YeN5paw6YWN572u5ZCv55SoQ0ROXHJcbiAgICAgIGFkYXB0ZXIuY29uZmlndXJlKFt7XHJcbiAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgICAgcmVnaW9uOiAndXMtZWFzdC0xJyxcclxuICAgICAgICAgIGJ1Y2tldDogJ3Rlc3QtYnVja2V0JyxcclxuICAgICAgICAgIGFjY2Vzc0tleUlkOiAndGVzdC1rZXknLFxyXG4gICAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAndGVzdC1zZWNyZXQnLFxyXG4gICAgICAgICAgZW5hYmxlQ0ROOiB0cnVlLFxyXG4gICAgICAgICAgY2RuRG9tYWluOiAnY2RuLmV4YW1wbGUuY29tJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9XSk7XHJcblxyXG4gICAgICBjb25zdCBrZXkgPSAndGVzdC1maWxlLnR4dCc7XHJcbiAgICAgIGNvbnN0IGluZm8gPSBhd2FpdCBnZXRGaWxlSW5mbyhrZXkpO1xyXG5cclxuICAgICAgZXhwZWN0KGluZm8uY2RuVXJsKS50b0NvbnRhaW4oJ2Nkbi5leGFtcGxlLmNvbScpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfmlofku7bliJfooagnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgYWRhcHRlci5jb25maWd1cmUoW3tcclxuICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxyXG4gICAgICAgICAgYnVja2V0OiAndGVzdC1idWNrZXQnLFxyXG4gICAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWtleScsXHJcbiAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICd0ZXN0LXNlY3JldCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfV0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeWIl+WHuuaWh+S7ticsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgZmlsZXMgPSBhd2FpdCBsaXN0RmlsZXMoKTtcclxuXHJcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGZpbGVzKSkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KGZpbGVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICBcclxuICAgICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IHtcclxuICAgICAgICBleHBlY3QoZmlsZS5rZXkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgICAgZXhwZWN0KGZpbGUuc2l6ZSkudG9CZUdyZWF0ZXJUaGFuKDApO1xyXG4gICAgICAgIGV4cGVjdChmaWxlLmxhc3RNb2RpZmllZCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XHJcbiAgICAgICAgZXhwZWN0KGZpbGUuZXRhZykudG9CZURlZmluZWQoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5pSv5oyB5YmN57yA6L+H5rukJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcmVmaXggPSAnaW1hZ2VzLyc7XHJcbiAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgbGlzdEZpbGVzKHByZWZpeCk7XHJcblxyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShmaWxlcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGZpbGUua2V5KS50b0NvbnRhaW4ocHJlZml4KTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5pSv5oyB5pyA5aSn5pWw6YeP6ZmQ5Yi2JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBtYXhLZXlzID0gMTA7XHJcbiAgICAgIGNvbnN0IGZpbGVzID0gYXdhaXQgbGlzdEZpbGVzKHVuZGVmaW5lZCwgbWF4S2V5cyk7XHJcblxyXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShmaWxlcykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChmaWxlcy5sZW5ndGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwobWF4S2V5cyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+etvuWQjVVSTOeUn+aIkCcsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBhZGFwdGVyLmNvbmZpZ3VyZShbe1xyXG4gICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXHJcbiAgICAgICAgICBidWNrZXQ6ICd0ZXN0LWJ1Y2tldCcsXHJcbiAgICAgICAgICBhY2Nlc3NLZXlJZDogJ3Rlc3Qta2V5JyxcclxuICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3Rlc3Qtc2VjcmV0JyxcclxuICAgICAgICB9LFxyXG4gICAgICB9XSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l55Sf5oiQR0VU562+5ZCNVVJMJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSAndGVzdC1maWxlLnR4dCc7XHJcbiAgICAgIGNvbnN0IHVybCA9IGF3YWl0IGdldFNpZ25lZFVybChrZXksICdnZXQnKTtcclxuXHJcbiAgICAgIGV4cGVjdCh1cmwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdCh1cmwpLnRvQ29udGFpbigndGVzdC1idWNrZXQnKTtcclxuICAgICAgZXhwZWN0KHVybCkudG9Db250YWluKGtleSk7XHJcbiAgICAgIGV4cGVjdCh1cmwpLnRvQ29udGFpbignWC1BbXotU2lnbmF0dXJlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l55Sf5oiQUFVU562+5ZCNVVJMJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSAndGVzdC1maWxlLnR4dCc7XHJcbiAgICAgIGNvbnN0IHVybCA9IGF3YWl0IGdldFNpZ25lZFVybChrZXksICdwdXQnKTtcclxuXHJcbiAgICAgIGV4cGVjdCh1cmwpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdCh1cmwpLnRvQ29udGFpbigndGVzdC1idWNrZXQnKTtcclxuICAgICAgZXhwZWN0KHVybCkudG9Db250YWluKGtleSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5pSv5oyB6Ieq5a6a5LmJ6L+H5pyf5pe26Ze0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBrZXkgPSAndGVzdC1maWxlLnR4dCc7XHJcbiAgICAgIGNvbnN0IGV4cGlyZXNJbiA9IDcyMDA7IC8vIDLlsI/ml7ZcclxuICAgICAgY29uc3QgdXJsID0gYXdhaXQgZ2V0U2lnbmVkVXJsKGtleSwgJ2dldCcsIGV4cGlyZXNJbik7XHJcblxyXG4gICAgICBleHBlY3QodXJsKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodXJsKS50b0NvbnRhaW4oYFgtQW16LUV4cGlyZXM9JHtleHBpcmVzSW59YCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+WtmOWCqOe7n+iuoScsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBhZGFwdGVyLmNvbmZpZ3VyZShbe1xyXG4gICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXHJcbiAgICAgICAgICBidWNrZXQ6ICd0ZXN0LWJ1Y2tldCcsXHJcbiAgICAgICAgICBhY2Nlc3NLZXlJZDogJ3Rlc3Qta2V5JyxcclxuICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3Rlc3Qtc2VjcmV0JyxcclxuICAgICAgICB9LFxyXG4gICAgICB9XSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l6I635Y+W5a2Y5YKo57uf6K6hJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGFkYXB0ZXIuZ2V0U3RhdHMoKTtcclxuXHJcbiAgICAgIGV4cGVjdChzdGF0cykudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0cy50b3RhbEZpbGVzKS50b0JlKCdudW1iZXInKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBzdGF0cy50b3RhbFNpemUpLnRvQmUoJ251bWJlcicpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXRzLnVzZWRRdW90YSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc3RhdHMuYXZhaWxhYmxlUXVvdGEpLnRvQmUoJ251bWJlcicpO1xyXG4gICAgICBleHBlY3Qoc3RhdHMuYmFuZHdpZHRoKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXRzLmJhbmR3aWR0aC51cGxvYWQpLnRvQmUoJ251bWJlcicpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIHN0YXRzLmJhbmR3aWR0aC5kb3dubG9hZCkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ+WBpeW6t+eKtuaAgeajgOafpScsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICBhZGFwdGVyLmNvbmZpZ3VyZShbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgICAgcmVnaW9uOiAndXMtZWFzdC0xJyxcclxuICAgICAgICAgICAgYnVja2V0OiAnYnVja2V0MScsXHJcbiAgICAgICAgICAgIGFjY2Vzc0tleUlkOiAna2V5MScsXHJcbiAgICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3NlY3JldDEnLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFMSVlVTl9PU1MsXHJcbiAgICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQUxJWVVOX09TUyxcclxuICAgICAgICAgICAgcmVnaW9uOiAnb3NzLWNuLWhhbmd6aG91JyxcclxuICAgICAgICAgICAgYnVja2V0OiAnYnVja2V0MicsXHJcbiAgICAgICAgICAgIGFjY2Vzc0tleUlkOiAna2V5MicsXHJcbiAgICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3NlY3JldDInLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICBdKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflupTor6Xmo4Dmn6XmiYDmnInmj5DkvpvllYbnmoTlgaXlurfnirbmgIEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHN0YXR1cyA9IGF3YWl0IGFkYXB0ZXIuZ2V0SGVhbHRoU3RhdHVzKCk7XHJcblxyXG4gICAgICBleHBlY3Qoc3RhdHVzKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3Qoc3RhdHVzW0Nsb3VkUHJvdmlkZXIuQVdTX1MzXSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHN0YXR1c1tDbG91ZFByb3ZpZGVyLkFMSVlVTl9PU1NdKS50b0JlRGVmaW5lZCgpO1xyXG5cclxuICAgICAgT2JqZWN0LnZhbHVlcyhzdGF0dXMpLmZvckVhY2gocHJvdmlkZXJTdGF0dXMgPT4ge1xyXG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcHJvdmlkZXJTdGF0dXMuaGVhbHRoeSkudG9CZSgnYm9vbGVhbicpO1xyXG4gICAgICAgIGV4cGVjdCh0eXBlb2YgcHJvdmlkZXJTdGF0dXMubGF0ZW5jeSkudG9CZSgnbnVtYmVyJyk7XHJcbiAgICAgICAgZXhwZWN0KHByb3ZpZGVyU3RhdHVzLmxhdGVuY3kpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfnhpTmlq3lmajmnLrliLYnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgYWRhcHRlci5jb25maWd1cmUoW3tcclxuICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxyXG4gICAgICAgICAgYnVja2V0OiAndGVzdC1idWNrZXQnLFxyXG4gICAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWtleScsXHJcbiAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICd0ZXN0LXNlY3JldCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfV0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeWcqOWkmuasoeWksei0peWQjuinpuWPkeeGlOaWreWZqCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g6L+Z5Liq5rWL6K+V6ZyA6KaB5qih5ouf5aSx6LSl5oOF5Ya1XHJcbiAgICAgIC8vIOeUseS6juaIkeS7rOS9v+eUqOeahOaYr+aooeaLn+WunueOsO+8jOi/memHjOS4u+imgea1i+ivleeGlOaWreWZqOmAu+i+keWtmOWcqFxyXG4gICAgICBleHBlY3QoYWRhcHRlcikudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn6ZSZ6K+v5aSE55CGJywgKCkgPT4ge1xyXG4gICAgaXQoJ+W6lOivpeWkhOeQhuayoeaciemFjee9ruWuouaIt+err+eahOaDheWGtScsIGFzeW5jICgpID0+IHtcclxuICAgICAgLy8g5Yib5bu65LiA5Liq5paw55qE6YCC6YWN5Zmo5a6e5L6L77yM5LiN5L2/55So5Y2V5L6L5Lul6YG/5YWN5YWx5Lqr6YWN572uXHJcbiAgICAgIGNvbnN0IGVtcHR5QWRhcHRlciA9IG5ldyAoQ2xvdWRTdG9yYWdlQWRhcHRlciBhcyBhbnkpKCk7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCBleHBlY3QoZW1wdHlBZGFwdGVyLmV4aXN0cygndGVzdCcpKS5yZWplY3RzLnRvVGhyb3coJ05vIHN0b3JhZ2UgY2xpZW50IGF2YWlsYWJsZScpO1xyXG4gICAgICBhd2FpdCBleHBlY3QoZW1wdHlBZGFwdGVyLmdldEZpbGVJbmZvKCd0ZXN0JykpLnJlamVjdHMudG9UaHJvdygnTm8gc3RvcmFnZSBjbGllbnQgYXZhaWxhYmxlJyk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChlbXB0eUFkYXB0ZXIubGlzdEZpbGVzKCkpLnJlamVjdHMudG9UaHJvdygnTm8gc3RvcmFnZSBjbGllbnQgYXZhaWxhYmxlJyk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChlbXB0eUFkYXB0ZXIuZ2V0U2lnbmVkVXJsKCd0ZXN0JywgJ2dldCcpKS5yZWplY3RzLnRvVGhyb3coJ05vIHN0b3JhZ2UgY2xpZW50IGF2YWlsYWJsZScpO1xyXG4gICAgICBhd2FpdCBleHBlY3QoZW1wdHlBZGFwdGVyLmdldFN0YXRzKCkpLnJlamVjdHMudG9UaHJvdygnTm8gc3RvcmFnZSBjbGllbnQgYXZhaWxhYmxlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5aSE55CG572R57uc6ZSZ6K+vJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBhZGFwdGVyLmNvbmZpZ3VyZShbe1xyXG4gICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICBjb25maWc6IHtcclxuICAgICAgICAgIHByb3ZpZGVyOiBDbG91ZFByb3ZpZGVyLkFXU19TMyxcclxuICAgICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXHJcbiAgICAgICAgICBidWNrZXQ6ICd0ZXN0LWJ1Y2tldCcsXHJcbiAgICAgICAgICBhY2Nlc3NLZXlJZDogJ3Rlc3Qta2V5JyxcclxuICAgICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ3Rlc3Qtc2VjcmV0JyxcclxuICAgICAgICB9LFxyXG4gICAgICB9XSk7XHJcblxyXG4gICAgICAvLyDmtYvor5XlkITnp43mk43kvZznmoTplJnor6/lpITnkIZcclxuICAgICAgLy8g55Sx5LqO5L2/55So5qih5ouf5a6e546w77yM6L+Z5Lqb5pON5L2c6YCa5bi45Lya5oiQ5YqfXHJcbiAgICAgIC8vIOWcqOWunumZheWunueOsOS4re+8jOWPr+S7pemAmui/h+aooeaLn+e9kee7nOmUmeivr+adpea1i+ivlVxyXG4gICAgICBleHBlY3QoYWRhcHRlcikudG9CZURlZmluZWQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn546v5aKD5Y+Y6YeP6YWN572uJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudjtcclxuXHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgamVzdC5yZXNldE1vZHVsZXMoKTtcclxuICAgICAgcHJvY2Vzcy5lbnYgPSB7IC4uLm9yaWdpbmFsRW52IH07XHJcbiAgICB9KTtcclxuXHJcbiAgICBhZnRlckVhY2goKCkgPT4ge1xyXG4gICAgICBwcm9jZXNzLmVudiA9IG9yaWdpbmFsRW52O1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeS7jueOr+Wig+WPmOmHj+ivu+WPlkFXU+mFjee9ricsICgpID0+IHtcclxuICAgICAgcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgPSAndGVzdC1hd3Mta2V5JztcclxuICAgICAgcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZID0gJ3Rlc3QtYXdzLXNlY3JldCc7XHJcbiAgICAgIHByb2Nlc3MuZW52LkFXU19SRUdJT04gPSAndXMtd2VzdC0yJztcclxuICAgICAgcHJvY2Vzcy5lbnYuQVdTX1MzX0JVQ0tFVCA9ICd0ZXN0LWF3cy1idWNrZXQnO1xyXG5cclxuICAgICAgLy8g6YeN5paw5Yib5bu65a6e5L6L5Lul6K+75Y+W546v5aKD5Y+Y6YePXHJcbiAgICAgIGNvbnN0IG5ld0FkYXB0ZXIgPSBDbG91ZFN0b3JhZ2VBZGFwdGVyLmdldEluc3RhbmNlKCk7XHJcbiAgICAgIGV4cGVjdChuZXdBZGFwdGVyKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeS7jueOr+Wig+WPmOmHj+ivu+WPlumYv+mHjOS6kemFjee9ricsICgpID0+IHtcclxuICAgICAgcHJvY2Vzcy5lbnYuQUxJWVVOX0FDQ0VTU19LRVlfSUQgPSAndGVzdC1hbGl5dW4ta2V5JztcclxuICAgICAgcHJvY2Vzcy5lbnYuQUxJWVVOX0FDQ0VTU19LRVlfU0VDUkVUID0gJ3Rlc3QtYWxpeXVuLXNlY3JldCc7XHJcbiAgICAgIHByb2Nlc3MuZW52LkFMSVlVTl9PU1NfUkVHSU9OID0gJ29zcy1jbi1iZWlqaW5nJztcclxuICAgICAgcHJvY2Vzcy5lbnYuQUxJWVVOX09TU19CVUNLRVQgPSAndGVzdC1hbGl5dW4tYnVja2V0JztcclxuXHJcbiAgICAgIGNvbnN0IG5ld0FkYXB0ZXIgPSBDbG91ZFN0b3JhZ2VBZGFwdGVyLmdldEluc3RhbmNlKCk7XHJcbiAgICAgIGV4cGVjdChuZXdBZGFwdGVyKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCfmgKfog73mtYvor5UnLCAoKSA9PiB7XHJcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgICAgYWRhcHRlci5jb25maWd1cmUoW3tcclxuICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgY29uZmlnOiB7XHJcbiAgICAgICAgICBwcm92aWRlcjogQ2xvdWRQcm92aWRlci5BV1NfUzMsXHJcbiAgICAgICAgICByZWdpb246ICd1cy1lYXN0LTEnLFxyXG4gICAgICAgICAgYnVja2V0OiAndGVzdC1idWNrZXQnLFxyXG4gICAgICAgICAgYWNjZXNzS2V5SWQ6ICd0ZXN0LWtleScsXHJcbiAgICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICd0ZXN0LXNlY3JldCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgfV0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpeWcqOWQiOeQhuaXtumXtOWGheWujOaIkOaWh+S7tuaTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oJ3Rlc3QgY29udGVudCcpO1xyXG4gICAgICBjb25zdCBvcHRpb25zID0geyBrZXk6ICdwZXJmb3JtYW5jZS10ZXN0LnR4dCcgfTtcclxuXHJcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIFxyXG4gICAgICBhd2FpdCB1cGxvYWRGaWxlKGJ1ZmZlciwgb3B0aW9ucyk7XHJcbiAgICAgIGF3YWl0IGRvd25sb2FkRmlsZShvcHRpb25zKTtcclxuICAgICAgYXdhaXQgZmlsZUV4aXN0cyhvcHRpb25zLmtleSk7XHJcbiAgICAgIGF3YWl0IGdldEZpbGVJbmZvKG9wdGlvbnMua2V5KTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XHJcblxyXG4gICAgICAvLyDmiYDmnInmk43kvZzlupTor6XlnKg156eS5YaF5a6M5oiQXHJcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDUwMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ+W6lOivpemrmOaViOWkhOeQhuaJuemHj+aTjeS9nCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHByb21pc2VzID0gW107XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG4gICAgICAgIHByb21pc2VzLnB1c2goZmlsZUV4aXN0cyhgYmF0Y2gtdGVzdC0ke2l9LnR4dGApKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcclxuXHJcbiAgICAgIC8vIDEw5Liq5bm25Y+R5qOA5p+l5bqU6K+l5ZyoM+enkuWGheWujOaIkFxyXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigzMDAwKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgn5bm25Y+R5a6J5YWoJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIGFkYXB0ZXIuY29uZmlndXJlKFt7XHJcbiAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgIGNvbmZpZzoge1xyXG4gICAgICAgICAgcHJvdmlkZXI6IENsb3VkUHJvdmlkZXIuQVdTX1MzLFxyXG4gICAgICAgICAgcmVnaW9uOiAndXMtZWFzdC0xJyxcclxuICAgICAgICAgIGJ1Y2tldDogJ3Rlc3QtYnVja2V0JyxcclxuICAgICAgICAgIGFjY2Vzc0tleUlkOiAndGVzdC1rZXknLFxyXG4gICAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAndGVzdC1zZWNyZXQnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1dKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCflupTor6XlronlhajlpITnkIblubblj5HkuIrkvKAnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHByb21pc2VzID0gW107XHJcbiAgICAgIFxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDIwOyBpKyspIHtcclxuICAgICAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShgY29uY3VycmVudCBjb250ZW50ICR7aX1gKTtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0geyBrZXk6IGBjb25jdXJyZW50LSR7aX0udHh0YCB9O1xyXG4gICAgICAgIHByb21pc2VzLnB1c2godXBsb2FkRmlsZShidWZmZXIsIG9wdGlvbnMpKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoMjApO1xyXG4gICAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCwgaW5kZXgpID0+IHtcclxuICAgICAgICBleHBlY3QocmVzdWx0LmtleSkudG9CZShgY29uY3VycmVudC0ke2luZGV4fS50eHRgKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgn5bqU6K+l5a6J5YWo5aSE55CG5bm25Y+R5LiL6L29JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xyXG4gICAgICBcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XHJcbiAgICAgICAgcHJvbWlzZXMucHVzaChkb3dubG9hZEZpbGUoeyBrZXk6IGBjb25jdXJyZW50LWRvd25sb2FkLSR7aX0udHh0YCB9KSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDE1KTtcclxuICAgICAgcmVzdWx0cy5mb3JFYWNoKGJ1ZmZlciA9PiB7XHJcbiAgICAgICAgZXhwZWN0KGJ1ZmZlcikudG9CZUluc3RhbmNlT2YoQnVmZmVyKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7Il0sIm5hbWVzIjpbImplc3QiLCJtb2NrIiwiRW5oYW5jZWRDYWNoZU1hbmFnZXIiLCJnZXRJbnN0YW5jZSIsImZuIiwiZ2V0Iiwic2V0IiwiZGVsZXRlIiwiY2xlYXIiLCJnZXRTdGF0cyIsImhpdHMiLCJtaXNzZXMiLCJzaXplIiwidXBkYXRlQ2FjaGVNZXRyaWNzIiwic2V0dXBNZW1vcnlNb25pdG9yaW5nIiwiZG9Nb2NrIiwiUzNDbGllbnQiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJzZW5kIiwibW9ja1Jlc29sdmVkVmFsdWUiLCJCb2R5IiwiQnVmZmVyIiwiZnJvbSIsIlB1dE9iamVjdENvbW1hbmQiLCJHZXRPYmplY3RDb21tYW5kIiwiRGVsZXRlT2JqZWN0Q29tbWFuZCIsIkhlYWRPYmplY3RDb21tYW5kIiwiTGlzdE9iamVjdHNWMkNvbW1hbmQiLCJ2aXJ0dWFsIiwicHV0IiwibmFtZSIsImNvbnRlbnQiLCJoZWFkIiwic3RhdHVzIiwibGlzdCIsIm9iamVjdHMiLCJzaWduYXR1cmVVcmwiLCJtb2NrUmV0dXJuVmFsdWUiLCJkZXNjcmliZSIsImFkYXB0ZXIiLCJiZWZvcmVFYWNoIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwiQ2xvdWRTdG9yYWdlQWRhcHRlciIsImNvbmZpZ3VyZSIsInByb3ZpZGVyIiwiQ2xvdWRQcm92aWRlciIsIkFXU19TMyIsImNvbmZpZyIsInJlZ2lvbiIsImJ1Y2tldCIsImFjY2Vzc0tleUlkIiwic2VjcmV0QWNjZXNzS2V5IiwiQUxJWVVOX09TUyIsImVuZHBvaW50IiwiY2xlYXJBbGxNb2NrcyIsIml0IiwiaW5zdGFuY2UxIiwiaW5zdGFuY2UyIiwiZXhwZWN0IiwidG9CZSIsImVuYWJsZUNETiIsImNkbkRvbWFpbiIsIm5vdCIsInRvVGhyb3ciLCJjb25maWdzIiwiYnVmZmVyIiwib3B0aW9ucyIsImtleSIsImNvbnRlbnRUeXBlIiwibWV0YWRhdGEiLCJwdXJwb3NlIiwicmVzdWx0IiwidXBsb2FkRmlsZSIsInRvQmVEZWZpbmVkIiwibGVuZ3RoIiwidXJsIiwidG9Db250YWluIiwiZXRhZyIsImFjbCIsImNhY2hlQ29udHJvbCIsInNlcnZlclNpZGVFbmNyeXB0aW9uIiwidGFncyIsImVudmlyb25tZW50IiwiZW5oYW5jZWRDYWNoZU1hbmFnZXIiLCJyZXF1aXJlIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJhbnkiLCJPYmplY3QiLCJ0dGwiLCJtb2NrQ2xpZW50IiwiZ2V0Q2xpZW50IiwiZG93bmxvYWRGaWxlIiwidG9CZUluc3RhbmNlT2YiLCJ0b0JlR3JlYXRlclRoYW4iLCJkb3dubG9hZCIsInZlcnNpb25JZCIsInJhbmdlIiwicmVzcG9uc2VDb250ZW50VHlwZSIsImNhY2hlZEJ1ZmZlciIsImRlbGV0ZUZpbGUiLCJyZXNvbHZlcyIsImV4aXN0cyIsImZpbGVFeGlzdHMiLCJpbmZvIiwiZ2V0RmlsZUluZm8iLCJsYXN0TW9kaWZpZWQiLCJEYXRlIiwiY2RuVXJsIiwiZmlsZXMiLCJsaXN0RmlsZXMiLCJBcnJheSIsImlzQXJyYXkiLCJmb3JFYWNoIiwiZmlsZSIsInByZWZpeCIsIm1heEtleXMiLCJ1bmRlZmluZWQiLCJ0b0JlTGVzc1RoYW5PckVxdWFsIiwiZ2V0U2lnbmVkVXJsIiwiZXhwaXJlc0luIiwic3RhdHMiLCJ0b3RhbEZpbGVzIiwidG90YWxTaXplIiwidXNlZFF1b3RhIiwiYXZhaWxhYmxlUXVvdGEiLCJiYW5kd2lkdGgiLCJ1cGxvYWQiLCJnZXRIZWFsdGhTdGF0dXMiLCJ2YWx1ZXMiLCJwcm92aWRlclN0YXR1cyIsImhlYWx0aHkiLCJsYXRlbmN5IiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsImVtcHR5QWRhcHRlciIsInJlamVjdHMiLCJvcmlnaW5hbEVudiIsInJlc2V0TW9kdWxlcyIsImFmdGVyRWFjaCIsIkFXU19BQ0NFU1NfS0VZX0lEIiwiQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIiwiQVdTX1JFR0lPTiIsIkFXU19TM19CVUNLRVQiLCJuZXdBZGFwdGVyIiwiQUxJWVVOX0FDQ0VTU19LRVlfSUQiLCJBTElZVU5fQUNDRVNTX0tFWV9TRUNSRVQiLCJBTElZVU5fT1NTX1JFR0lPTiIsIkFMSVlVTl9PU1NfQlVDS0VUIiwic3RhcnRUaW1lIiwibm93IiwiZW5kVGltZSIsImR1cmF0aW9uIiwidG9CZUxlc3NUaGFuIiwicHJvbWlzZXMiLCJpIiwicHVzaCIsIlByb21pc2UiLCJhbGwiLCJyZXN1bHRzIiwidG9IYXZlTGVuZ3RoIiwiaW5kZXgiXSwibWFwcGluZ3MiOiJBQUFBLGNBQWM7QUFDZDs7Ozs7O0NBTUM7QUFjRCxvQkFBb0I7QUFDcEJBLEtBQUtDLElBQUksQ0FBQztBQUNWRCxLQUFLQyxJQUFJLENBQUMsc0NBQXNDLElB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