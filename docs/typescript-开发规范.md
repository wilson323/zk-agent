# TypeScript 开发规范

## 1. 类型定义规范

### 1.1 接口定义集中管理

- **问题**: 项目中出现了`types/core/interfaces.ts`文件缺失，但其他文件却引用了该模块的问题。
- **规范**: 
  - 核心接口应集中在专门的类型定义文件中管理
  - 创建新模块时，确保所有依赖的类型定义文件已经存在
  - 在删除或移动类型定义文件前，确保没有其他模块依赖它

### 1.2 接口实现完整性

- **问题**: `production-cache-manager.ts`中返回的对象未完全实现`CacheStats`接口要求的所有属性。
- **规范**:
  - 实现接口时必须实现接口定义的所有必需属性
  - 使用TypeScript的类型检查确保接口实现的完整性
  - 对可能为undefined的属性提供默认值或空值处理

### 1.3 模块导入路径

- **问题**: `versioning/utils.tsx`中导入了不存在的模块路径`@/lib/versioning/version-manager`。
- **规范**:
  - 使用相对路径导入同一目录下的模块
  - 使用别名路径(@/)导入时，确保该路径在tsconfig.json中正确配置
  - 在导入前验证模块路径是否存在
  - 对于频繁使用的类型，考虑在本地文件中重新定义，减少外部依赖

## 2. 代码重复问题

### 2.1 避免重复导入

- **问题**: 多个文件中存在重复导入同一模块的情况。
- **规范**:
  - 避免在同一文件中多次导入相同的模块
  - 使用命名导入而非默认导入，更清晰地表明依赖关系
  - 定期使用工具检查并清理未使用的导入

## 3. 错误处理规范

### 3.1 空值处理

- **问题**: 代码中存在对可能为undefined的对象属性直接访问的情况。
- **规范**:
  - 访问可能为undefined的对象属性前，先进行空值检查
  - 使用可选链操作符（?.）简化空值检查
  - 为可能为undefined的值提供默认值（使用 || 或 ??）
  - 在函数参数中为可选参数提供默认值

## 4. 项目结构规范

### 4.1 模块组织

- **规范**:
  - 相关功能应组织在同一目录下
  - 公共类型定义应放在types目录下
  - 工具函数应放在utils目录下
  - 组件应放在components目录下

### 4.2 文件命名

- **规范**:
  - 接口定义文件使用.interface.ts后缀
  - 类型定义文件使用.types.ts后缀
  - 组件文件使用.tsx后缀
  - 工具函数文件使用.utils.ts后缀

## 5. 代码质量保障

### 5.1 TypeScript严格模式

- **规范**:
  - 启用TypeScript的严格模式（strict: true）
  - 启用noImplicitAny，避免隐式any类型
  - 启用strictNullChecks，强制处理null和undefined
  - 定期运行类型检查，及时修复类型错误

### 5.2 代码审查

- **规范**:
  - 提交代码前进行自我代码审查
  - 使用ESLint和Prettier保持代码风格一致
  - 定期进行团队代码审查，确保代码质量
  - 对发现的类型问题进行记录和总结，避免重复出现