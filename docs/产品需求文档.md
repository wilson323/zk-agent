### **产品需求文档 (PRD)**

**文档版本:** 1.0
**创建日期:** 2025年6月27日
**作者:** AI Agent

---

#### **1. 引言**

`zk-agent` 是一个AI多智能体宇宙平台，旨在集成对话智能体、CAD分析专家和AI海报设计师等多种功能。本文档将详细阐述 `zk-agent` 平台中 **CAD分析工具** 的产品需求。

#### **2. 目标用户**

*   **工程师/设计师:** 需要对CAD文件进行结构、设备、风险和合规性分析的用户。
*   **项目经理:** 需要获取CAD项目概览、风险评估和报告的用户。
*   **质量控制人员:** 需要验证CAD设计是否符合标准和规范的用户。
*   **安全审计人员:** 需要评估安防系统设计中潜在风险和漏洞的用户。

#### **3. 核心价值**

CAD分析工具旨在通过自动化和智能化的方式，帮助用户：

*   **提高效率:** 快速上传、查看和分析CAD文件，减少手动检查时间。
*   **提升质量:** 自动识别设计中的潜在问题、风险和不合规项。
*   **优化决策:** 提供详细的分析报告和优化建议，辅助用户做出更明智的决策。
*   **确保合规:** 自动检查设计是否符合行业标准和规范。

#### **4. 功能列表**

##### **4.1 CAD文件上传与管理**

*   **文件上传:**
    *   支持拖放上传和文件选择器上传。
    *   支持批量上传模式。
    *   支持的文件格式：`.dwg`, `.dxf`, `.step`, `.stp`, `.iges`, `.igs`, `.stl`。
    *   文件大小限制：最大50MB。
    *   文件完整性校验：上传前对文件内容进行校验，防止损坏文件。
    *   上传历史记录：显示最近上传的文件列表。
*   **文件预处理:**
    *   上传后模拟文件上传进度。

##### **4.2 CAD模型查看器**

*   **3D模型预览:**
    *   在浏览器中直接预览上传的CAD模型。
    *   支持旋转、缩放、平移等基本3D操作。
    *   支持全屏模式。
*   **图层管理:**
    *   显示CAD文件中的所有图层。
    *   支持切换图层的可见性。
*   **视图控制:**
    *   重置视图到初始状态。
    *   导出当前视图为图片。

##### **4.3 智能CAD分析**

*   **分析模块配置 (高级设置):**
    *   **结构分析:** 识别建筑结构和组件层次。
    *   **设备检测:** 自动识别安防设备类型和位置（如摄像头、传感器、报警器、门禁点、灭火器等）。
    *   **风险评估:** 评估安全风险和潜在问题（如碰撞、公差超标、材料不匹配、安全漏洞、放置错误等）。
    *   **合规性检查:** 检查是否符合相关标准规范（如GB50348-2018, GA/T75-1994等）。
    *   **检测灵敏度:** 可配置“低”、“中”、“高”三种灵敏度。
    *   **风险阈值:** 可配置“保守”、“平衡”、“积极”三种阈值。
    *   **合规标准选择:** 用户可选择适用的合规标准。
*   **分析执行:**
    *   用户点击“开始分析”按钮触发分析过程。
    *   显示分析进度和状态。
*   **分析结果:**
    *   **概述:**
        *   文件信息：文件名、文件大小、文件类型、创建日期、最后修改日期。
        *   问题摘要：高、中、低严重级别的问题数量和描述。
        *   装配概览：显示总装配数量、子装配数量和问题数量。
        *   设备分布统计：按类别统计设备数量。
    *   **零件/实体信息:**
        *   列出所有零件/实体，包括ID、名称、材料、重量、尺寸、问题数量。
        *   支持按类别、风险等级筛选。
        *   支持按名称、风险、类别排序。
        *   支持仅显示有问题的项目。
        *   支持导出筛选后的数据。
    *   **材料分析:**
        *   材料分布：显示各种材料的使用比例。
        *   材料成本分析（待实现，目前为占位图）。
    *   **优化建议:**
        *   提供针对检测到的问题的具体优化建议。
        *   显示可制造性评分（如材料选择、公差控制、装配性、成本效益等）。
    *   **合规性:**
        *   列出评估的合规标准及其符合状态（符合、不符合、部分符合）。
        *   详细说明不符合或部分符合的规则、描述、严重性及受影响的实体。
        *   提供合规性改进建议。
    *   **3D视图 (高级):**
        *   在分析结果页面集成3D模型视图，可与分析结果联动。
        *   支持重置视角、导出视图。
        *   支持旋转X、Y、Z轴。
        *   显示选中设备的详细信息。
        *   初始化Three.js场景，并根据设备类别显示不同颜色的模型。
    *   **性能分析:**
        *   显示分析耗时、识别准确率、置信度和复杂度等性能指标。

##### **4.4 报告生成与分享**

*   **报告生成:**
    *   支持生成专业的分析报告。
    *   可配置报告格式：PDF、DOCX、HTML、XLSX。
    *   可配置报告内容：是否包含图片、是否包含建议。
    *   支持高级导出选项，包括品牌、水印、压缩等。
*   **报告下载:**
    *   用户可直接下载生成的报告。
*   **分享功能:**
    *   生成可分享的链接，设置权限（查看、下载）和有效期。

#### **5. 非功能性需求**

*   **性能:**
    *   CAD文件上传和分析应在合理时间内完成。
    *   3D模型加载和操作应流畅。
*   **安全性:**
    *   文件上传和存储应安全可靠。
    *   用户数据和分析结果应受到保护。
    *   API接口应进行身份验证和授权。
*   **可用性:**
    *   用户界面应直观、易于操作。
    *   提供清晰的错误提示和操作指引。
*   **可扩展性:**
    *   系统架构应支持未来功能扩展和模块集成。
*   **兼容性:**
    *   支持主流浏览器。
