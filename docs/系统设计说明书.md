### **系统设计说明书 (SDS)**

**文档版本:** 1.0
**创建日期:** 2025年6月27日
**作者:** AI Agent

---

#### **1. 整体架构**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

#### **2. 数据库设计**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

#### **3. 功能模块设计**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

#### **4. API 接口设计**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

#### **5. 功能逻辑流程图**

##### **5.1 用户注册登录流程**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

##### **5.2 CAD 分析流程**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

##### **5.3 海报生成流程**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

##### **5.4 聊天流程**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

##### **5.5 系统健康检查流程**

（此部分内容已在上次更新中完成，此处省略以保持简洁）

##### **5.6 管理员用户管理流程**

```mermaid
graph TD
    A[管理员] --> B{访问用户管理页面};
    B --> C[发送获取用户列表请求 (GET /api/admin/users)];
    C --> D{后端验证管理员权限};
    D -- 权限不足 --> E[返回权限不足错误];
    D -- 权限通过 --> F[从数据库获取用户列表 (支持分页, 搜索, 筛选)];
    F --> G[返回用户列表数据];
    G --> H[前端显示用户列表];

    H --> I{选择操作};

    I -- 创建用户 --> J[点击“创建用户”按钮];
    J --> K[填写新用户信息 (邮箱, 姓名, 角色)];
    K --> L[发送创建用户请求 (POST /api/admin/users)];
    L --> M{后端验证数据并创建用户};
    M -- 失败 --> N[返回创建失败信息];
    M -- 成功 --> O[返回创建成功信息, 更新用户列表];
    O --> H;

    I -- 查看/编辑用户 --> P[点击用户列表中的用户];
    P --> Q[发送获取用户详情请求 (GET /api/admin/users/[id])];
    Q --> R{后端获取用户详情};
    R -- 失败 --> S[返回用户未找到错误];
    R -- 成功 --> T[返回用户详情数据];
    T --> U[前端显示用户详情/编辑表单];

    U -- 更新用户 --> V[修改用户信息];
    V --> W[发送更新用户请求 (PUT /api/admin/users/[id])];
    W --> X{后端验证数据并更新用户};
    X -- 失败 --> Y[返回更新失败信息];
    X -- 成功 --> Z[返回更新成功信息, 更新用户列表];
    Z --> H;

    I -- 删除用户 --> AA[点击“删除用户”按钮];
    AA --> BB{确认删除};
    BB -- 取消 --> H;
    BB -- 确认 --> CC[发送删除用户请求 (DELETE /api/admin/users/[id])];
    CC --> DD{后端删除用户};
    DD -- 失败 --> EE[返回删除失败信息];
    DD -- 成功 --> FF[返回删除成功信息, 更新用户列表];
    FF --> H;

    E --> A;
    N --> A;
    S --> A;
    Y --> A;
    EE --> A;
```